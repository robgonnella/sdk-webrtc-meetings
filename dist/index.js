module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=85)}([function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(){var n=this,i=n._,o={},s=Array.prototype,a=Object.prototype,c=Function.prototype,u=s.push,l=s.slice,f=s.concat,d=a.toString,p=a.hasOwnProperty,h=s.forEach,m=s.map,g=s.reduce,v=s.reduceRight,y=s.filter,b=s.every,C=s.some,S=s.indexOf,_=s.lastIndexOf,T=Array.isArray,E=Object.keys,w=c.bind,x=function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};e.exports&&(t=e.exports=x),t._=x,x.VERSION="1.4.3";var R=x.each=x.forEach=function(e,t,n){if(null!=e)if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===o)return}else for(var s in e)if(x.has(e,s)&&t.call(n,e[s],s,e)===o)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:m&&e.map===m?e.map(t,n):(R(e,function(e,i,o){r[r.length]=t.call(n,e,i,o)}),r)};var k="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),g&&e.reduce===g)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(R(e,function(e,o,s){i?n=t.call(r,n,e,o,s):(n=e,i=!0)}),!i)throw new TypeError(k);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),v&&e.reduceRight===v)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var s=x.keys(e);o=s.length}if(R(e,function(a,c,u){c=s?s[--o]:--o,i?n=t.call(r,n,e[c],c,u):(n=e[c],i=!0)}),!i)throw new TypeError(k);return n},x.find=x.detect=function(e,t,n){var r;return A(e,function(e,i,o){if(t.call(n,e,i,o))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:y&&e.filter===y?e.filter(t,n):(R(e,function(e,i,o){t.call(n,e,i,o)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,n){t||(t=x.identity);var r=!0;return null==e?r:b&&e.every===b?e.every(t,n):(R(e,function(e,i,s){if(!(r=r&&t.call(n,e,i,s)))return o}),!!r)};var A=x.some=x.any=function(e,t,n){t||(t=x.identity);var r=!1;return null==e?r:C&&e.some===C?e.some(t,n):(R(e,function(e,i,s){if(r||(r=t.call(n,e,i,s)))return o}),!!r)};x.contains=x.include=function(e,t){return null!=e&&(S&&e.indexOf===S?-1!=e.indexOf(t):A(e,function(e){return e===t}))},x.invoke=function(e,t){var n=l.call(arguments,2);return x.map(e,function(e){return(x.isFunction(t)?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t){return x.isEmpty(t)?[]:x.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return R(e,function(e,i,o){var s=t?t.call(n,e,i,o):e;s>=r.computed&&(r={value:e,computed:s})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return R(e,function(e,i,o){var s=t?t.call(n,e,i,o):e;s<r.computed&&(r={value:e,computed:s})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return R(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var I=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=I(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var M=function(e,t,n,r){var i={},o=I(t||x.identity);return R(e,function(t,s){var a=o.call(n,t,s,e);r(i,a,t)}),i};x.groupBy=function(e,t,n){return M(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return M(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){for(var i=(n=null==n?x.identity:I(n)).call(r,t),o=0,s=e.length;o<s;){var a=o+s>>>1;n.call(r,e[a])<i?o=a+1:s=a}return o},x.toArray=function(e){return e?x.isArray(e)?l.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:l.call(e,0,t)},x.initial=function(e,t,n){return l.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};x.flatten=function(e,t){return function e(t,n,r){return R(t,function(t){x.isArray(t)?n?u.apply(r,t):e(t,n,r):r.push(t)}),r}(e,t,[])},x.without=function(e){return x.difference(e,l.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,o=[],s=[];return R(i,function(n,r){(t?r&&s[s.length-1]===n:x.contains(s,n))||(s.push(n),o.push(e[r]))}),o},x.union=function(){return x.uniq(f.apply(s,arguments))},x.intersection=function(e){var t=l.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=f.apply(s,l.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=l.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t),r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return e[r=x.sortedIndex(e,t)]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(S&&e.indexOf===S)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(_&&e.lastIndexOf===_)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);i<r;)o[i++]=e,e+=n;return o};var P=function(){};x.bind=function(e,t){var n,r;if(e.bind===w&&w)return w.apply(e,l.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=l.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(l.call(arguments)));P.prototype=e.prototype;var i=new P;P.prototype=null;var o=e.apply(i,n.concat(l.call(arguments)));return Object(o)===o?o:i}},x.bindAll=function(e){var t=l.call(arguments,1);return 0==t.length&&(t=x.functions(e)),R(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(l.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,o,s=0,a=function(){s=new Date,i=null,o=e.apply(n,r)};return function(){var c=new Date,u=t-(c-s);return n=this,r=arguments,u<=0?(clearTimeout(i),i=null,s=c,o=e.apply(n,r)):i||(i=setTimeout(a,u)),o}},x.debounce=function(e,t,n){var r,i;return function(){var o=this,s=arguments,a=n&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,n||(i=e.apply(o,s))},t),a&&(i=e.apply(o,s)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return u.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return R(l.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=f.apply(s,l.call(arguments,1));return R(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=f.apply(s,l.call(arguments,1));for(var r in e)x.contains(n,r)||(t[r]=e[r]);return t},x.defaults=function(e){return R(l.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};x.isEqual=function(e,t){return function e(t,n,i,o){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof x&&(t=t._wrapped),n instanceof x&&(n=n._wrapped);var s=d.call(t);if(s!=d.call(n))return!1;switch(s){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=r(t)||"object"!=r(n))return!1;for(var a=i.length;a--;)if(i[a]==t)return o[a]==n;i.push(t),o.push(n);var c=0,u=!0;if("[object Array]"==s){if(u=(c=t.length)==n.length)for(;c--&&(u=e(t[c],n[c],i,o)););}else{var l=t.constructor,f=n.constructor;if(l!==f&&!(x.isFunction(l)&&l instanceof l&&x.isFunction(f)&&f instanceof f))return!1;for(var p in t)if(x.has(t,p)&&(c++,!(u=x.has(n,p)&&e(t[p],n[p],i,o))))break;if(u){for(p in n)if(x.has(n,p)&&!c--)break;u=!c}}return i.pop(),o.pop(),u}(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=T||function(e){return"[object Array]"==d.call(e)},x.isObject=function(e){return e===Object(e)},R(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return d.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),x.isFunction=function(e){return"function"==typeof e},x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==d.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return p.call(e,t)},x.noConflict=function(){return n._=i,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};O.unescape=x.invert(O.escape);var N={escape:new RegExp("["+x.keys(O.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(O.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(N[e],function(t){return O[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){R(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),B.call(this,n.apply(x,e))}})};var j=0;x.uniqueId=function(e){var t=""+ ++j;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){n=x.defaults({},n,x.templateSettings);var r=new RegExp([(n.escape||D).source,(n.interpolate||D).source,(n.evaluate||D).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,s,a){return o+=e.slice(i,a).replace(F,function(e){return"\\"+L[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),s&&(o+="';\n"+s+"\n__p+='"),i=a+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(n.variable||"obj","_",o)}catch(e){throw e.source=o,e}if(t)return s(t,x);var a=function(e){return s.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var B=function(e){return this._chain?x(e).chain():e};x.mixin(x),R(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],B.call(this,n)}}),R(["concat","join","slice"],function(e){var t=s[e];x.prototype[e]=function(){return B.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},function(e,t,n){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(2),o=n(4),s=n(9),a={windows:{chrome:[{screenWidth:1920,columns:267},{screenWidth:1080,columns:147}],firefox:[{screenWidth:1920,columns:271},{screenWidth:1080,columns:151}],opera:[{screenWidth:1920,columns:315},{screenWidth:1080,columns:175}],ie:[{screenWidth:1920,columns:270},{screenWidth:1080,columns:149}]},mac:{chrome:[{screenWidth:1280,columns:176},{screenWidth:1024,columns:139}],firefox:[{screenWidth:1280,columns:190},{screenWidth:1024,columns:151}],safari:[{screenWidth:1280,columns:135},{screenWidth:1024,columns:99}]}},c={chrome:" skinny.js:12345".length,firefox:"skinny.js?7211GG0 (line 12345)".length,opera:"skinny.js:12345".length,safari:"skinny.js:12345".length,ie:"LOG: ".length},u={ALL:{func:null,include:function(e){return/all/i.test(e)},exclude:null},ERROR:{func:"error",include:function(e){return/\+error/i.test(e)},exclude:function(e){return/\-error/i.test(e)}},WARN:{func:"warn",include:function(e){return/\+warn/i.test(e)},exclude:function(e){return/\-warn/i.test(e)}},INFO:{func:"info",include:function(e){return/\+info/i.test(e)},exclude:function(e){return/\-info/i.test(e)}},LOG:{func:"log",include:function(e){return/\+log/i.test(e)},exclude:function(e){return/\-log/i.test(e)}},DEBUG:{func:"debug",include:function(e){return/\+debug/i.test(e)},exclude:function(e){return/\-debug/i.test(e)}}},l=["debug","log","info","warn","error"],f=o.Class({STATIC:{TIME_FORMAT:"hh:mm:ss.SSSS"},constructor:function(){i.bindAll(this)},getCurrentLogLevel:function(){var e=this.controlLevel(),t=i(l).indexOf(e),n=t>=0?i(l).first(t):l;return["all"].concat(n.join("-")).join("-")},log:function(){this._log(arguments,u.LOG)},debug:function(){this._log(arguments,u.DEBUG)},info:function(){this._log(arguments,u.INFO)},warn:function(){this._log(arguments,u.WARN)},error:function(){this._log(arguments,u.ERROR)},isLevel:function(e){return"object"===(void 0===t?"undefined":r(t))&&"object"===r(t.env)?new RegExp(e).test("warn-error"):new RegExp("level="+e,"i").test(window.location.search)},controlLevel:function(){var e=this;return i.find(l,function(t){return e.isLevel(t)})},_log:function(e,t){try{var n=new Date,r=("0"+n.getHours()).substr(-2)+":"+("0"+n.getMinutes()).substr(-2)+":"+("0"+n.getSeconds()).substr(-2)+"."+("000"+n.getMilliseconds()).substr(-4);if(e[0]="["+r+"]("+t.func.toUpperCase()+"): "+e[0],window.console&&window.console.log){window.location.search.match(/log=debug/);var o=this.getCurrentLogLevel();if(u.ALL.include(o)&&!t.exclude(o)||t.include(o)){if("debug"===t.func)return window.console.log.apply(window.console,e);"function"==typeof window.console[t.func]?window.console[t.func].apply(window.console,e):window.console[t.func](i(e).toArray().join(", "))}}}catch(e){console.log(e.stack)}},pluginLog:function(e,t,n,r){try{var i=[];i[0]=e.toUpperCase()+"  ♦ ["+t+":"+n+"]"+r[0].replace(/\s+\(/g," (")}catch(e){}},check:function(e){var t=u[e.toUpperCase()],n=this.controlLevel();return!!t&&(u.ALL.include(n)&&!t.exclude(n)||t.include(n))},prepare:function(e,t,n,r){var o=i(r).toArray();e=e.toUpperCase();var a=(new moment).format(f.TIME_FORMAT);o[0]=a+" @ "+(e+"  ").substr(0,5)+" ♦ "+o[0];var u="("+t+":"+("0000"+n).substr(-Math.max(String(n).length,3))+")";if(o.length>1)o.push(u);else{var l=o[0].length,d=Math.max(1,this.getConsoleColumns()-c[s.browser]-l-u.length-1);d=isNaN(d)?1:d;var p=new Array(d+1).join(" ");o[0]+=p+u}return o},getCurrentTime:function(e){var t=new Date,n="";switch(e){case"hh:mm:ss.SSSS":n=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+t.getMilliseconds();break;default:console.error("Invalid time format passed for log formatting")}return n},getConsoleColumns:function(){var e,t,n=s.browser,r=s.os,i=a[r]&&a[r][n]?a[r][n]:0,o=window.innerWidth;return i?(e=(i[0].columns-i[1].columns)/(i[0].screenWidth-i[1].screenWidth),t=i[0].columns-e*i[0].screenWidth):(e=0,t=0),Math.floor(e*o+t)}});e.exports=new f}).call(this,n(12))},function(e,t,n){e.exports=n(87)},function(e,t,n){(function(r){var i,o,s;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s="object"==("undefined"==typeof self?"undefined":a(self))&&self.self===self&&self||"object"==(void 0===r?"undefined":a(r))&&r.global===r&&r,i=[n(88),n(27),t],void 0===(o=function(e,t,n){s.Backbone=function(e,t,n,r){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],c(e,this),i)};case 4:return function(e,i,o){return n[t](this[r],c(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}}(t,i,r))})},c=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?u(e):n.isString(e)?function(t){return t.get(e)}:e},u=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},f=/\s+/,d=function e(t,r,i,o,s){var c,u=0;if(i&&"object"===a(i)){void 0!==o&&"context"in s&&void 0===s.context&&(s.context=o);for(c=n.keys(i);u<c.length;u++)r=e(t,r,c[u],i[c[u]],s)}else if(i&&f.test(i))for(c=i.split(f);u<c.length;u++)r=t(r,c[u],o,s);else r=t(r,i,o,s);return r};l.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,r,i){if(e._events=d(h,e._events||{},t,n,{context:r,ctx:e,listening:i}),i){var o=e._listeners||(e._listeners={});o[i.id]=i}return e};l.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[i];if(!s){var a=this._listenId||(this._listenId=n.uniqueId("l"));s=o[i]={obj:e,objId:i,id:a,listeningTo:o,count:0}}return p(e,t,r,this,s),this};var h=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return e};l.off=function(e,t,n){return this._events?(this._events=d(m,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:n.keys(i),s=0;s<o.length;s++){var a=i[o[s]];if(!a)break;a.obj.off(t,r,this)}return this};var m=function(e,t,r,i){if(e){var o,s=0,a=i.context,c=i.listeners;if(t||r||a){for(var u=t?[t]:n.keys(e);s<u.length;s++){t=u[s];var l=e[t];if(!l)break;for(var f=[],d=0;d<l.length;d++){var p=l[d];r&&r!==p.callback&&r!==p.callback._callback||a&&a!==p.context?f.push(p):(o=p.listening)&&0==--o.count&&(delete c[o.id],delete o.listeningTo[o.objId])}f.length?e[t]=f:delete e[t]}return e}for(var h=n.keys(c);s<h.length;s++)o=c[h[s]],delete c[o.id],delete o.listeningTo[o.objId]}};l.once=function(e,t,r){var i=d(g,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},l.listenToOnce=function(e,t,r){var i=d(g,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var g=function(e,t,r,i){if(r){var o=e[t]=n.once(function(){i(t,o),r.apply(this,arguments)});o._callback=r}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return d(v,this._events,e,void 0,n),this};var v=function(e,t,n,r){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&y(i,r),o&&y(o,[t].concat(r))}return e},y=function(e,t){var n,r=-1,i=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var b=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"===a(e)?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,s=r.silent,c=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,f=this.changed,d=this._previousAttributes;for(var p in i)t=i[p],n.isEqual(l[p],t)||c.push(p),n.isEqual(d[p],t)?delete f[p]:f[p]=t,o?delete l[p]:l[p]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!s){c.length&&(this._pending=r);for(var h=0;h<c.length;h++)this.trigger("change:"+c[h],this,l[c[h]],r)}if(u)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var o=e[i];n.isEqual(t[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},F(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"===a(e)?(i=e,r=t):(i={})[e]=t;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var s=this,c=r.success,u=this.attributes;r.success=function(e){s.attributes=u;var t=r.parse?s.parse(e,r):e;if(o&&(t=n.extend({},i,t)),t&&!s.set(t,r))return!1;c&&c.call(r.context,s,e,r),s.trigger("sync",s,e,r)},F(this,r),i&&o&&(this.attributes=n.extend({},u,i));var l=this.isNew()?"create":r.patch?"patch":"update";"patch"!==l||r.attrs||(r.attrs=i);var f=this.sync(l,this,r);return this.attributes=u,f},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&o(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var s=!1;return this.isNew()?n.defer(e.success):(F(this,e),s=this.sync("delete",this,e)),i||o(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}}),s(b,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var C=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},S={add:!0,remove:!0,merge:!0},_={add:!0,remove:!1},T=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r,i=Array(e.length-n),o=t.length;for(r=0;r<i.length;r++)i[r]=e[r+n];for(r=0;r<o;r++)e[r+n]=t[r];for(r=0;r<i.length;r++)e[r+o+n]=i[r]};n.extend(C.prototype,l,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,_))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){(t=n.extend({},S,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,s,a=[],c=[],u=[],l=[],f={},d=t.add,p=t.merge,h=t.remove,m=!1,g=this.comparator&&null==i&&!1!==t.sort,v=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){o=e[s];var y=this.get(o);if(y){if(p&&o!==y){var b=this._isModel(o)?o.attributes:o;t.parse&&(b=y.parse(b,t)),y.set(b,t),u.push(y),g&&!m&&(m=y.hasChanged(v))}f[y.cid]||(f[y.cid]=!0,a.push(y)),e[s]=y}else d&&(o=e[s]=this._prepareModel(o,t))&&(c.push(o),this._addReference(o,t),f[o.cid]=!0,a.push(o))}if(h){for(s=0;s<this.length;s++)o=this.models[s],f[o.cid]||l.push(o);l.length&&this._removeModels(l,t)}var C=!1,_=!g&&d&&h;if(a.length&&_?(C=this.length!==a.length||n.some(this.models,function(e,t){return e!==a[t]}),this.models.length=0,T(this.models,a,0),this.length=this.models.length):c.length&&(g&&(m=!0),T(this.models,c,null==i?this.length:i),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(s=0;s<c.length;s++)null!=i&&(t.index=i+s),(o=c[s]).trigger("add",o,this,t);(m||C)&&this.trigger("sort",this,t),(c.length||l.length||u.length)&&(t.changes={added:c,removed:l,merged:u},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},F(this,e),this.sync("read",this,e)},create:function(e,t){var r=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;r||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,n){r&&i.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=o,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}}),s(C,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var E=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments)},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(w);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var o=R[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||L()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1);var c=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,c&&c.call(i.context,e,t,n)};var u=i.xhr=t.ajax(n.extend(s,i));return r.trigger("request",r,u,i),u};var R={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,I=/(\(\?)?:\w+/g,M=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,l,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,function(n){var s=o._extractParameters(e,n);!1!==o.execute(i,s,r)&&(o.trigger.apply(o,["route:"+r].concat(s)),o.trigger("route",r,s),t.history.trigger("route",o,r,s))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace(A,"(?:$1)?").replace(I,function(e,t){return t?e:"([^/?]+)"}).replace(M,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var O=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,D=/#.*$/;O.started=!1,n.extend(O.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(N,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");if(O.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(j,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!O.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(D,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new O,b.extend=C.extend=k.extend=E.extend=O.extend=function(e,t){var r,i=this;return r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t),r.prototype=n.create(i.prototype,e),r.prototype.constructor=r,r.__super__=i.prototype,r};var L=function(){throw new Error('A "url" property or function must be specified')},F=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}(s,n,e,t)}.apply(t,i))||(e.exports=o)}).call(this,n(1))},function(e,t,n){"use strict";var r=n(0),i=n(72);function o(){i.call(this)}r(o,i),o.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},o.prototype.once=function(e,t){var n=this,r=!1;this.on(e,function i(){n.removeListener(e,i),r||(r=!0,t.apply(this,arguments))})},o.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].apply(this,r)}},o.prototype.on=o.prototype.addListener=i.prototype.addEventListener,o.prototype.removeListener=i.prototype.removeEventListener,e.exports.EventEmitter=o},function(e,t,n){"use strict";var r=n(71);e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},function(e,t,n){(function(e,r,i){var o,s;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"===a(t)&&"object"===a(i))i.exports=e();else{void 0===(s="function"==typeof(o=e)?o.call(t,n,t,i):o)||(i.exports=s)}}(function(){"use strict";var t=!1;try{throw new Error}catch(e){t=!!e.stack}var n,i=E(),o=function(){},s=function(){var t={task:void 0,next:null},n=t,i=!1,o=void 0,c=!1,u=[];function l(){for(var e,n;t.next;)e=(t=t.next).task,t.task=void 0,(n=t.domain)&&(t.domain=void 0,n.enter()),f(e,n);for(;u.length;)f(e=u.pop());i=!1}function f(e,t){try{e()}catch(e){if(c)throw t&&t.exit(),setTimeout(l,0),t&&t.enter(),e;setTimeout(function(){throw e},0)}t&&t.exit()}if(s=function(t){n=n.next={task:t,domain:c&&e.domain,next:null},i||(i=!0,o())},"object"===(void 0===e?"undefined":a(e))&&"[object process]"===e.toString()&&e.nextTick)c=!0,o=function(){e.nextTick(l)};else if("function"==typeof r)o="undefined"!=typeof window?r.bind(window,l):function(){r(l)};else if("undefined"!=typeof MessageChannel){var d=new MessageChannel;d.port1.onmessage=function(){o=p,d.port1.onmessage=l,l()};var p=function(){d.port2.postMessage(0)};o=function(){setTimeout(l,0),p()}}else o=function(){setTimeout(l,0)};return s.runAfter=function(e){u.push(e),i||(i=!0,o())},s}(),c=Function.call;function u(e){return function(){return c.apply(e,arguments)}}var l,f=u(Array.prototype.slice),d=u(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),p=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),h=u(Array.prototype.map||function(e,t){var n=this,r=[];return d(n,function(i,o,s){r.push(e.call(t,o,s,n))},void 0),r}),m=Object.create||function(e){function t(){}return t.prototype=e,new t},g=Object.defineProperty||function(e,t,n){return e[t]=n.value,e},v=u(Object.prototype.hasOwnProperty),y=Object.keys||function(e){var t=[];for(var n in e)v(e,n)&&t.push(n);return t},b=u(Object.prototype.toString);l="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var C="From previous event:";function S(e,n){if(t&&n.stack&&"object"===a(e)&&null!==e&&e.stack){for(var r=[],i=n;i;i=i.source)i.stack&&(!e.__minimumStackCounter__||e.__minimumStackCounter__>i.stackCounter)&&(g(e,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),r.unshift(i.stack));r.unshift(e.stack);var o=function(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];!T(i)&&(-1===(o=i).indexOf("(module.js:")&&-1===o.indexOf("(node.js:"))&&i&&n.push(i)}var o;return n.join("\n")}(r.join("\n"+C+"\n"));g(e,"stack",{value:o,configurable:!0})}}function _(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function T(e){var t=_(e);if(!t)return!1;var r=t[0],o=t[1];return r===n&&o>=i&&o<=K}function E(){if(t)try{throw new Error}catch(t){var e=t.stack.split("\n"),r=_(e[0].indexOf("@")>0?e[1]:e[2]);if(!r)return;return n=r[0],r[1]}}function w(e){return e instanceof I?e:N(e)?(t=e,n=R(),w.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(e){n.reject(e)}}),n.promise):G(e);var t,n}w.resolve=w,w.nextTick=s,w.longStackSupport=!1;var x=1;function R(){var e,n=[],r=[],i=m(R.prototype),o=m(I.prototype);if(o.promiseDispatch=function(t,i,o){var s=f(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):w.nextTick(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(n)return o;var t=P(e);return O(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},w.longStackSupport&&t)try{throw new Error}catch(e){o.stack=e.stack.substring(e.stack.indexOf("\n")+1),o.stackCounter=x++}function s(i){e=i,w.longStackSupport&&t&&(o.source=i),d(n,function(e,t){w.nextTick(function(){i.promiseDispatch.apply(i,t)})},void 0),n=void 0,r=void 0}return i.promise=o,i.resolve=function(t){e||s(w(t))},i.fulfill=function(t){e||s(G(t))},i.reject=function(t){e||s(H(t))},i.notify=function(t){e||d(r,function(e,n){w.nextTick(function(){n(t)})},void 0)},i}function k(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=R();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function A(e){return k(function(t,n){for(var r=0,i=e.length;r<i;r++)w(e[r]).then(t,n)})}function I(e,t,n){void 0===t&&(t=function(e){return H(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=m(I.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=e[i]?e[i].apply(r,o):t.call(r,i,o)}catch(e){s=H(e)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function M(e,t,n,r){return w(e).then(t,n,r)}function P(e){if(O(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function O(e){return e instanceof I}function N(e){return(t=e)===Object(t)&&"function"==typeof e.then;var t}"object"===(void 0===e?"undefined":a(e))&&e&&e.env&&e.env.Q_DEBUG&&(w.longStackSupport=!0),w.defer=R,R.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(f(arguments,1)):e.resolve(n)}},w.Promise=k,w.promise=k,k.race=A,k.all=J,k.reject=H,k.resolve=w,w.passByCopy=function(e){return e},I.prototype.passByCopy=function(){return this},w.join=function(e,t){return w(e).join(t)},I.prototype.join=function(e){return w([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)})},w.race=A,I.prototype.race=function(){return this.then(w.race)},w.makePromise=I,I.prototype.toString=function(){return"[object Promise]"},I.prototype.then=function(e,t,n){var r=this,i=R(),o=!1;return w.nextTick(function(){r.promiseDispatch(function(t){o||(o=!0,i.resolve(function(t){try{return"function"==typeof e?e(t):t}catch(e){return H(e)}}(t)))},"when",[function(e){o||(o=!0,i.resolve(function(e){if("function"==typeof t){S(e,r);try{return t(e)}catch(e){return H(e)}}return H(e)}(e)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=function(e){return"function"==typeof n?n(e):e}(e)}catch(e){if(r=!0,!w.onerror)throw e;w.onerror(e)}r||i.notify(t)}]),i.promise},w.tap=function(e,t){return w(e).tap(t)},I.prototype.tap=function(e){return e=w(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},w.when=M,I.prototype.thenResolve=function(e){return this.then(function(){return e})},w.thenResolve=function(e,t){return w(e).thenResolve(t)},I.prototype.thenReject=function(e){return this.then(function(){throw e})},w.thenReject=function(e,t){return w(e).thenReject(t)},w.nearer=P,w.isPromise=O,w.isPromiseAlike=N,w.isPending=function(e){return O(e)&&"pending"===e.inspect().state},I.prototype.isPending=function(){return"pending"===this.inspect().state},w.isFulfilled=function(e){return!O(e)||"fulfilled"===e.inspect().state},I.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},w.isRejected=function(e){return O(e)&&"rejected"===e.inspect().state},I.prototype.isRejected=function(){return"rejected"===this.inspect().state};var j,D,L,F=[],B=[],U=[],V=!0;function q(){F.length=0,B.length=0,V||(V=!0)}function H(t){var n=I({when:function(n){return n&&function(t){if(V){var n=p(B,t);-1!==n&&("object"===(void 0===e?"undefined":a(e))&&"function"==typeof e.emit&&w.nextTick.runAfter(function(){var r=p(U,t);-1!==r&&(e.emit("rejectionHandled",F[n],t),U.splice(r,1))}),B.splice(n,1),F.splice(n,1))}}(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return function(t,n){V&&("object"===(void 0===e?"undefined":a(e))&&"function"==typeof e.emit&&w.nextTick.runAfter(function(){-1!==p(B,t)&&(e.emit("unhandledRejection",n,t),U.push(t))}),B.push(t),n&&void 0!==n.stack?F.push(n.stack):F.push("(no stack) "+n))}(n,t),n}function G(e){return I({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null==t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return y(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function W(e,t,n){return w(e).spread(t,n)}function z(e,t,n){return w(e).dispatch(t,n)}function J(e){return M(e,function(e){var t=0,n=R();return d(e,function(r,i,o){var s;O(i)&&"fulfilled"===(s=i.inspect()).state?e[o]=s.value:(++t,M(i,function(r){e[o]=r,0==--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function $(e){if(0===e.length)return w.resolve();var t=w.defer(),n=0;return d(e,function(r,i,o){var s=e[o];n++,M(s,function(e){t.resolve(e)},function(e){if(0==--n){var r=e||new Error(""+e);r.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+r.message,t.reject(r)}},function(e){t.notify({index:o,value:e})})},void 0),t.promise}function X(e){return M(e,function(e){return e=h(e,w),M(J(h(e,function(e){return M(e,o,o)})),function(){return e})})}w.resetUnhandledRejections=q,w.getUnhandledReasons=function(){return F.slice()},w.stopUnhandledRejectionTracking=function(){q(),V=!1},q(),w.reject=H,w.fulfill=G,w.master=function(e){return I({isDef:function(){}},function(t,n){return z(e,t,n)},function(){return w(e).inspect()})},w.spread=W,I.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},w.async=function(e){return function(){function t(e,t){var o;if("undefined"==typeof StopIteration){try{o=n[e](t)}catch(e){return H(e)}return o.done?w(o.value):M(o.value,r,i)}try{o=n[e](t)}catch(e){return function(e){return"[object StopIteration]"===b(e)||e instanceof l}(e)?w(e.value):H(e)}return M(o,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}},w.spawn=function(e){w.done(w.async(e)())},w.return=function(e){throw new l(e)},w.promised=function(e){return function(){return W([this,J(arguments)],function(t,n){return e.apply(t,n)})}},w.dispatch=z,I.prototype.dispatch=function(e,t){var n=this,r=R();return w.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},w.get=function(e,t){return w(e).dispatch("get",[t])},I.prototype.get=function(e){return this.dispatch("get",[e])},w.set=function(e,t,n){return w(e).dispatch("set",[t,n])},I.prototype.set=function(e,t){return this.dispatch("set",[e,t])},w.del=w.delete=function(e,t){return w(e).dispatch("delete",[t])},I.prototype.del=I.prototype.delete=function(e){return this.dispatch("delete",[e])},w.mapply=w.post=function(e,t,n){return w(e).dispatch("post",[t,n])},I.prototype.mapply=I.prototype.post=function(e,t){return this.dispatch("post",[e,t])},w.send=w.mcall=w.invoke=function(e,t){return w(e).dispatch("post",[t,f(arguments,2)])},I.prototype.send=I.prototype.mcall=I.prototype.invoke=function(e){return this.dispatch("post",[e,f(arguments,1)])},w.fapply=function(e,t){return w(e).dispatch("apply",[void 0,t])},I.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},w.try=w.fcall=function(e){return w(e).dispatch("apply",[void 0,f(arguments,1)])},I.prototype.fcall=function(){return this.dispatch("apply",[void 0,f(arguments)])},w.fbind=function(e){var t=w(e),n=f(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(f(arguments))])}},I.prototype.fbind=function(){var e=this,t=f(arguments);return function(){return e.dispatch("apply",[this,t.concat(f(arguments))])}},w.keys=function(e){return w(e).dispatch("keys",[])},I.prototype.keys=function(){return this.dispatch("keys",[])},w.all=J,I.prototype.all=function(){return J(this)},w.any=$,I.prototype.any=function(){return $(this)},w.allResolved=(j=X,D="allResolved",L="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(D+" is deprecated, use "+L+" instead.",new Error("").stack),j.apply(j,arguments)}),I.prototype.allResolved=function(){return X(this)},w.allSettled=function(e){return w(e).allSettled()},I.prototype.allSettled=function(){return this.then(function(e){return J(h(e,function(e){function t(){return e.inspect()}return(e=w(e)).then(t,t)}))})},w.fail=w.catch=function(e,t){return w(e).then(void 0,t)},I.prototype.fail=I.prototype.catch=function(e){return this.then(void 0,e)},w.progress=function(e,t){return w(e).then(void 0,void 0,t)},I.prototype.progress=function(e){return this.then(void 0,void 0,e)},w.fin=w.finally=function(e,t){return w(e).finally(t)},I.prototype.fin=I.prototype.finally=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=w(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},w.done=function(e,t,n,r){return w(e).done(t,n,r)},I.prototype.done=function(t,n,r){var i=function(e){w.nextTick(function(){if(S(e,o),!w.onerror)throw e;w.onerror(e)})},o=t||n||r?this.then(t,n,r):this;"object"===(void 0===e?"undefined":a(e))&&e&&e.domain&&(i=e.domain.bind(i)),o.then(void 0,i)},w.timeout=function(e,t,n){return w(e).timeout(t,n)},I.prototype.timeout=function(e,t){var n=R(),r=setTimeout(function(){t&&"string"!=typeof t||((t=new Error(t||"Timed out after "+e+" ms")).code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},w.delay=function(e,t){return void 0===t&&(t=e,e=void 0),w(e).delay(t)},I.prototype.delay=function(e){return this.then(function(t){var n=R();return setTimeout(function(){n.resolve(t)},e),n.promise})},w.nfapply=function(e,t){return w(e).nfapply(t)},I.prototype.nfapply=function(e){var t=R(),n=f(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},w.nfcall=function(e){var t=f(arguments,1);return w(e).nfapply(t)},I.prototype.nfcall=function(){var e=f(arguments),t=R();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},w.nfbind=w.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=f(arguments,1);return function(){var n=t.concat(f(arguments)),r=R();return n.push(r.makeNodeResolver()),w(e).fapply(n).fail(r.reject),r.promise}},I.prototype.nfbind=I.prototype.denodeify=function(){var e=f(arguments);return e.unshift(this),w.denodeify.apply(void 0,e)},w.nbind=function(e,t){var n=f(arguments,2);return function(){var r=n.concat(f(arguments)),i=R();return r.push(i.makeNodeResolver()),w(function(){return e.apply(t,arguments)}).fapply(r).fail(i.reject),i.promise}},I.prototype.nbind=function(){var e=f(arguments,0);return e.unshift(this),w.nbind.apply(void 0,e)},w.nmapply=w.npost=function(e,t,n){return w(e).npost(t,n)},I.prototype.nmapply=I.prototype.npost=function(e,t){var n=f(t||[]),r=R();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},w.nsend=w.nmcall=w.ninvoke=function(e,t){var n=f(arguments,2),r=R();return n.push(r.makeNodeResolver()),w(e).dispatch("post",[t,n]).fail(r.reject),r.promise},I.prototype.nsend=I.prototype.nmcall=I.prototype.ninvoke=function(e){var t=f(arguments,1),n=R();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},w.nodeify=function(e,t){return w(e).nodeify(t)},I.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){w.nextTick(function(){e(null,t)})},function(t){w.nextTick(function(){e(t)})})},w.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var K=E();return w})}).call(this,n(12),n(46).setImmediate,n(21)(e))},function(e,t){e.exports=new function(e){e=e||window.navigator.userAgent,this.browser=null,this.os=null,this.osVersion=null,this.version=null,this.majorVersion=null,this.instructionSet="x86",this.device="workstation",this.cookies=!1;var t={mac:{is:function(e){return/macintosh/i.test(e)},getVersion:function(e){return/Mac OS X ([\d_\.]+)[;\)]/i.exec(e)[1].replace(/_/g,".")}},windows:{is:function(e){return/windows/i.test(e)},getVersion:function(e){return/windows.*?([\d\.]+?)[;\)]/i.exec(e)[1]}},solaris:{is:function(e){return/sunos/i.test(e)},getVersion:function(e){return"0"}},bsd:{is:function(e){return/bsd/i.test(e)},getVersion:function(e){return 0}},linux:{is:function(e){return/linux/i.test(e)},getVersion:function(e){return"0"}}},n={firefox:{is:function(e){return/firefox/i.test(e)},getVersion:function(e){return/firefox\/(.+?)(?:\s|$)/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}},chrome:{is:function(e){return/chrome\//i.test(e)&&!n.edge.is(e)&&!n.opera.is(e)},getVersion:function(e){return/chrome\/(.+?)(?:\s|$)/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}},safari:{is:function(e){return/safari/i.test(e)&&!n.chrome.is(e)&&!n.edge.is(e)&&!n.opera.is(e)},getVersion:function(e){return/version\/(.+?)(?:\s|$)/i.exec(e)?/version\/(.+?)(?:\s|$)/i.exec(e)[1]:"6.0"},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}},ie:{is:function(e){return/msie|Trident/i.test(e)},getVersion:function(e){return-1!=e.indexOf("Trident")?parseFloat(/Trident\/(.+?)[\);]/i.exec(e)[1])+4+".0":/msie (.+?);/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]},getInstructionSet:function(e){return/x64;/i.test(e)?"x86-64":"x86"}},opera:{is:function(e){return/(Opera|OPR)\/(\d+(\.\d+)?)/i.test(e)},getVersion:function(e){return/OPR\/(.+?)(?:\s|$)/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}},edge:{is:function(e){return/Edge/i.test(e)},getVersion:function(e){return/Edge\/(.+?)(?:\s|$)/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}}},r={ipad:{is:function(e){return/ipad/i.test(e)}},ipod:{is:function(e){return/ipod/i.test(e)}},iphone:{is:function(e){return/iphone/i.test(e)}},android:{is:function(e){return/android/i.test(e)}}};for(var i in r)if(r[i].is(e)){this.device=i;break}for(var o in t){var s=t[o];if(s.is(e)){this.os=o,this.osVersion=s.getVersion(e);break}}for(var a in n){var c=n[a];if(c.is(e)){this.browser=a,this.version=c.getVersion(e),this.majorVersion=c.getMajorVersion(this.version),c.getInstructionSet&&(this.instructionSet=c.getInstructionSet(e));break}}this.cookies=window.navigator.cookieEnabled}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=!0,o=!0;function s(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}e.exports={extractVersion:s,wrapPeerConnectionEvent:function(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+r(e)+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+r(e)+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=s(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)n.browser="chrome",n.version=s(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=s(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=s(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return n}}},function(e,t,n){(function(e,r){var i;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */(function(){var s=n(173),a={function:!0,object:!0},c=a[o(t)]&&t&&!t.nodeType&&t,u=a["undefined"==typeof window?"undefined":o(window)]&&window||this,l=c&&a[o(e)]&&e&&!e.nodeType&&"object"==(void 0===r?"undefined":o(r))&&r;function f(e,t){e||(e=u.Object()),t||(t=u.Object());var n=e.Number||u.Number,r=e.String||u.String,i=e.Object||u.Object,s=e.Date||u.Date,c=e.SyntaxError||u.SyntaxError,l=e.TypeError||u.TypeError,d=e.Math||u.Math,p=e.JSON||u.JSON;"object"==o(p)&&p&&(t.stringify=p.stringify,t.parse=p.parse);var h,m,g,v=i.prototype,y=v.toString,b=new s(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}function C(e){if(C[e]!==g)return C[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=C("json-stringify")&&C("json-parse");else{var o,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,u="function"==typeof c&&b;if(u){(o=function(){return 1}).toJSON=o;try{u="0"===c(0)&&"0"===c(new n)&&'""'==c(new r)&&c(y)===g&&c(g)===g&&c()===g&&"1"===c(o)&&"[1]"==c([o])&&"[null]"==c([g])&&"null"==c(null)&&"[null,null,null]"==c([g,y,null])&&c({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===c(null,o)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new s(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new s(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new s(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new s(-1))}catch(e){u=!1}}i=u}if("json-parse"==e){var l=t.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){var f=5==(o=l(a)).a.length&&1===o.a[0];if(f){try{f=!l('"\t"')}catch(e){}if(f)try{f=1!==l("01")}catch(e){}if(f)try{f=1!==l("1.")}catch(e){}}}}catch(e){f=!1}i=f}}return C[e]=!!i}if(!C("json")){var S=C("bug-string-char-index");if(!b)var _=d.floor,T=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(e,t){return T[t]+365*(e-1970)+_((e-1969+(t=+(t>1)))/4)-_((e-1901+t)/100)+_((e-1601+t)/400)};if((h=v.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),m=function(e,t){var n,r,i,s=0;for(i in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)h.call(r,i)&&s++;return n=r=null,s?m=2==s?function(e,t){var n,r={},i="[object Function]"==y.call(e);for(n in e)i&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,i="[object Function]"==y.call(e);for(n in e)i&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,i,s="[object Function]"==y.call(e),c=!s&&"function"!=typeof e.constructor&&a[o(e.hasOwnProperty)]&&e.hasOwnProperty||h;for(n in e)s&&"prototype"==n||!c.call(e,n)||t(n);for(i=r.length;n=r[--i];c.call(e,n)&&t(n));}),m(e,t)},!C("json-stringify")){var w={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},x=function(e,t){return("000000"+(t||0)).slice(-e)},R=function(e){for(var t='"',n=0,r=e.length,i=!S||r>10,o=i&&(S?e.split(""):e);n<r;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=w[s];break;default:if(s<32){t+="\\u00"+x(2,s.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'};t.stringify=function(e,t,n){var r,i,s,c;if(a[o(t)]&&t)if("[object Function]"==(c=y.call(t)))i=t;else if("[object Array]"==c){s={};for(var u,f=0,d=t.length;f<d;u=t[f++],("[object String]"==(c=y.call(u))||"[object Number]"==c)&&(s[u]=1));}if(n)if("[object Number]"==(c=y.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==c&&(r=n.length<=10?n:n.slice(0,10));return function e(t,n,r,i,s,a,c){var u,f,d,p,v,b,C,S,T,w,k,A,I,M,P,O;try{u=n[t]}catch(e){}if("object"==o(u)&&u)if("[object Date]"!=(f=y.call(u))||h.call(u,"toJSON"))"function"==typeof u.toJSON&&("[object Number]"!=f&&"[object String]"!=f&&"[object Array]"!=f||h.call(u,"toJSON"))&&(u=u.toJSON(t));else if(u>-1/0&&u<1/0){if(E){for(v=_(u/864e5),d=_(v/365.2425)+1970-1;E(d+1,0)<=v;d++);for(p=_((v-E(d,0))/30.42);E(d,p+1)<=v;p++);v=1+v-E(d,p),C=_((b=(u%864e5+864e5)%864e5)/36e5)%24,S=_(b/6e4)%60,T=_(b/1e3)%60,w=b%1e3}else d=u.getUTCFullYear(),p=u.getUTCMonth(),v=u.getUTCDate(),C=u.getUTCHours(),S=u.getUTCMinutes(),T=u.getUTCSeconds(),w=u.getUTCMilliseconds();u=(d<=0||d>=1e4?(d<0?"-":"+")+x(6,d<0?-d:d):x(4,d))+"-"+x(2,p+1)+"-"+x(2,v)+"T"+x(2,C)+":"+x(2,S)+":"+x(2,T)+"."+x(3,w)+"Z"}else u=null;if(r&&(u=r.call(n,t,u)),null===u)return"null";if("[object Boolean]"==(f=y.call(u)))return""+u;if("[object Number]"==f)return u>-1/0&&u<1/0?""+u:"null";if("[object String]"==f)return R(""+u);if("object"==o(u)){for(M=c.length;M--;)if(c[M]===u)throw l();if(c.push(u),k=[],P=a,a+=s,"[object Array]"==f){for(I=0,M=u.length;I<M;I++)A=e(I,u,r,i,s,a,c),k.push(A===g?"null":A);O=k.length?s?"[\n"+a+k.join(",\n"+a)+"\n"+P+"]":"["+k.join(",")+"]":"[]"}else m(i||u,function(t){var n=e(t,u,r,i,s,a,c);n!==g&&k.push(R(t)+":"+(s?" ":"")+n)}),O=k.length?s?"{\n"+a+k.join(",\n"+a)+"\n"+P+"}":"{"+k.join(",")+"}":"{}";return c.pop(),O}}("",((u={})[""]=e,u),i,s,r,"",[])}}if(!C("json-parse")){var k,A,I=r.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},P=function(){throw k=A=null,c()},O=function(){for(var e,t,n,r,i,o=A,s=o.length;k<s;)switch(i=o.charCodeAt(k)){case 9:case 10:case 13:case 32:k++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=S?o.charAt(k):o[k],k++,e;case 34:for(e="@",k++;k<s;)if((i=o.charCodeAt(k))<32)P();else if(92==i)switch(i=o.charCodeAt(++k)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=M[i],k++;break;case 117:for(t=++k,n=k+4;k<n;k++)(i=o.charCodeAt(k))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||P();e+=I("0x"+o.slice(t,k));break;default:P()}else{if(34==i)break;for(i=o.charCodeAt(k),t=k;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++k);e+=o.slice(t,k)}if(34==o.charCodeAt(k))return k++,e;P();default:if(t=k,45==i&&(r=!0,i=o.charCodeAt(++k)),i>=48&&i<=57){for(48==i&&((i=o.charCodeAt(k+1))>=48&&i<=57)&&P(),r=!1;k<s&&((i=o.charCodeAt(k))>=48&&i<=57);k++);if(46==o.charCodeAt(k)){for(n=++k;n<s&&((i=o.charCodeAt(n))>=48&&i<=57);n++);n==k&&P(),k=n}if(101==(i=o.charCodeAt(k))||69==i){for(43!=(i=o.charCodeAt(++k))&&45!=i||k++,n=k;n<s&&((i=o.charCodeAt(n))>=48&&i<=57);n++);n==k&&P(),k=n}return+o.slice(t,k)}if(r&&P(),"true"==o.slice(k,k+4))return k+=4,!0;if("false"==o.slice(k,k+5))return k+=5,!1;if("null"==o.slice(k,k+4))return k+=4,null;P()}return"$"},N=function(e,t,n){var r=j(e,t,n);r===g?delete e[t]:e[t]=r},j=function(e,t,n){var r,i=e[t];if("object"==o(i)&&i)if("[object Array]"==y.call(i))for(r=i.length;r--;)N(i,r,n);else m(i,function(e){N(i,e,n)});return n.call(e,t,i)};t.parse=function(e,t){var n,r;return k=0,A=""+e,n=function e(t){var n,r;if("$"==t&&P(),"string"==typeof t){if("@"==(S?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=O());r||(r=!0))r&&(","==t?"]"==(t=O())&&P():P()),","==t&&P(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=O());r||(r=!0))r&&(","==t?"}"==(t=O())&&P():P()),","!=t&&"string"==typeof t&&"@"==(S?t.charAt(0):t[0])&&":"==O()||P(),n[t.slice(1)]=e(O());return n}P()}return t}(O()),"$"!=O()&&P(),k=A=null,t&&"[object Function]"==y.call(t)?j(((r={})[""]=n,r),"",t):n}}}return t.runInContext=f,t}if(!l||l.global!==l&&l.window!==l&&l.self!==l||(u=l),c&&!s)f(u,c);else{var d=u.JSON,p=u.JSON3,h=!1,m=f(u,u.JSON3={noConflict:function(){return h||(h=!0,u.JSON=d,u.JSON3=p,d=p=null),m}});u.JSON={parse:m.parse,stringify:m.stringify}}s&&(void 0===(i=function(){return m}.call(t,n,t,e))||(e.exports=i))}).call(this)}).call(this,n(21)(e),n(1))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=n(4),i=n(2),o=(n(3),r.Class({STATIC:{MESSAGE_BASE:{bluejay:"1.0"}},constructor:function(e){this.messageId=0,this.METHODS={CONNECT:"connect",UPDATE:"update",ANSWER:"answer",DISCONNECT:"disconnect",KEEPALIVE:"keepalive",CANDIDATE:"candidate",MUTE:"mute",TOKEN:"token",INFO:"info",ICE:"ice"},this.TOKEN_TYPES={STATUS:"status",RELEASE:"release",TOKENINDICATION:"tokenindication",CONTENTINDICATION:"contentindication"},this.TOKEN_STATUS={GRANTED:"granted",DENIED:"denied",REVOKED:"revoked",RELEASED:"released",WAITING:"waiting_user_confirmation",CANCELLED:"cancelled"}},generateMsgId:function(){return++this.messageId},setCallid:function(e){this.callId=e},getCallId:function(){return this.callId},getRequestMessage:function(e){return i.extend({},o.MESSAGE_BASE,{call:this.callId,id:this.generateMsgId()},e)},getConnectMessage:function(e){return this.getRequestMessage({method:"connect",params:e})},getUpdateMessage:function(e){return this.getRequestMessage({method:"update",params:e})},getMuteMessage:function(e){return this.getRequestMessage({method:"mute",params:e})},requestTokenMsg:function(){return this.getRequestMessage({method:"token",params:{type:"request"}})},releaseTokenMsg:function(){return this.getRequestMessage({method:"token",params:{type:"release"}})},getIceCandidateMessage:function(e){return this.getRequestMessage({method:"ice",params:{iceCandidate:e}})},getInfoMsg:function(e){return this.getRequestMessage({method:"info",params:e})},getKeepaliveMessage:function(){return this.getRequestMessage({method:"keepalive",params:{}})},getDisconnectMessage:function(e){return this.getRequestMessage({method:"disconnect",params:e})},getSuccessResponse:function(e){return i.extend({},o.MESSAGE_BASE,{id:e,call:this.callId,result:"null"})},getErrorResponse:function(e,t){return i.extend({},o.MESSAGE_BASE,{id:e,call:this.callId,error:t})}}));e.exports=new o},function(e,t,n){var r=n(4),i=(n(3),n(2)),o=r.Class({constructor:function(e){this.BJ_CALLSTATES={IDLE:"idle",INITIALISING:"initialising",CONNECTING:"connecting",STARTING_MEDIA:"starting-media",CONNECTED:"connected",RESTART_MEDIA:"restart-media",REINITIALISING:"re-initialising",RECONNECTING:"reconnecting",DISCONNECTED:"disconnected"},this.WEBRTC_STATES={iceGatheringState:{NEW:"new",GATHERING:"gathering",COMPLETE:"complete"},iceConnectionState:{NEW:"new",CHECKING:"checking",CONNECTED:"connected",COMPLETED:"completed",FAILED:"failed",DISCONNECTED:"disconnected",CLOSED:"closed"},signalingState:{STABLE:"stable",HAVE_LOCAL_OFFER:"have-local-offer",HAVE_REMOTE_OFFER:"have-remote-offer",HAVE_LOCAL_PRANSWER:"have-local-pranswer",HAVE_REMOTE_PRANSWER:"have-remote-pranswer",CLOSED:"closed"}},this.STATE_EVENTS={INITIALISE:"initialise",CONNECT:"connect",START_MEDIA:"startMedia",ESTABLISH_CONNECTION:"establishConnection",MEDIA_DISRUPTION:"mediaDisruption",DISCONNECT:"disconnect",RESET:"reset"},this.TRANSACTION_STATES={INIT:"init",RESEND:"resend",FAILED:"failed",FINISHED:"finished",ERROR:"error"},this.EXTENSION_STATES={NOT_INSTALLED:"not_installed",INSTALLING:"installing",BG_SCRIPTS_INJECTED:"background_scripts_injected",INSTALLED:"installed",IFRAME_INSTALL_FAILED:"iframe_install_failed",INSTALL_FAILED_DOMAIN_UNVERIFIED:"install_failed_domain_not_verified",INSTALL_FAILED:"install_failed",INSTALL_CANCELLED:"install_cancelled",REQUEST_FAILED:"request_failed"},this.WS_STATES={CONNECTED:"connected",RECONNECTED:"reconnected",DISCONNECTED:"disconnected",FAILED:"failed",CLOSED:"closed"},this.WS_STATES={CONNECTED:"connected",RECONNECTED:"reconnected",DISCONNECTED:"disconnected",FAILED:"failed",CLOSED:"closed"}},addWebrtcStatePrefix:function(e,t){var n={};return i.forEach(t,function(t,r){n[r]=e+t}),n}});e.exports=new o},function(e,t,n){"use strict";(function(t){var r=n(19),i={},o=!1,s=t.chrome&&t.chrome.app&&t.chrome.app.runtime;e.exports={attachEvent:function(e,n){void 0!==t.addEventListener?t.addEventListener(e,n,!1):t.document&&t.attachEvent&&(t.document.attachEvent("on"+e,n),t.attachEvent("on"+e,n))},detachEvent:function(e,n){void 0!==t.addEventListener?t.removeEventListener(e,n,!1):t.document&&t.detachEvent&&(t.document.detachEvent("on"+e,n),t.detachEvent("on"+e,n))},unloadAdd:function(e){if(s)return null;var t=r.string(8);return i[t]=e,o&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}};s||e.exports.attachEvent("unload",function(){o||(o=!0,e.exports.triggerUnloadCallbacks())})}).call(this,n(1))},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r,i=n(106),o=n(52),s=n(107),a=n(108),c=n(109);"undefined"!=typeof ArrayBuffer&&(r=n(110));var u="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=u||l;t.protocol=3;var d=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=i(d),h={type:"error",data:"parser error"},m=n(111);function g(e,t,n){for(var r=new Array(e.length),i=a(e.length,n),o=function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})},s=0;s<e.length;s++)o(s,e[s],i)}t.encodePacket=function(e,n,r,i){"function"==typeof n&&(i=n,n=!1),"function"==typeof r&&(i=r,r=null);var o=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=d[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}(e,n,i);if(void 0!==m&&o instanceof m)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(f)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},n,!0,r)},i.readAsArrayBuffer(e.data)}(e,n,r);var i=new Uint8Array(1);i[0]=d[e.type];var o=new m([i.buffer,e.data]);return r(o)}(e,n,i);if(o&&o.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(e,i);var s=d[e.type];return void 0!==e.data&&(s+=r?c.encode(String(e.data),{strict:!1}):String(e.data)),i(""+s)},t.encodeBase64Packet=function(e,n){var r,i="b"+t.packets[e.type];if(void 0!==m&&e.data instanceof m){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];r=String.fromCharCode.apply(null,a)}return i+=btoa(r),n(i)},t.decodePacket=function(e,n,r){if(void 0===e)return h;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return h;var i=e.charAt(0);return Number(i)==i&&p[i]?e.length>1?{type:p[i],data:e.substring(1)}:{type:p[i]}:h}i=new Uint8Array(e)[0];var o=s(e,1);return m&&"blob"===n&&(o=new m([o])),{type:p[i],data:o}},t.decodeBase64Packet=function(e,t){var n=p[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=r.decode(e.substr(1));return"blob"===t&&m&&(i=new m([i])),{type:n,data:i}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var i=o(e);if(n&&i)return m&&!f?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");g(e,function(e,r){t.encodePacket(e,!!i&&n,!1,function(e){r(null,function(e){return e.length+":"+e}(e))})},function(e,t){return r(t.join(""))})},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);var i;if("function"==typeof n&&(r=n,n=null),""===e)return r(h,0,1);for(var o,s,a="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"===l){if(""===a||a!=(o=Number(a)))return r(h,0,1);if(a!=(s=e.substr(c+1,o)).length)return r(h,0,1);if(s.length){if(i=t.decodePacket(s,n,!1),h.type===i.type&&h.data===i.data)return r(h,0,1);if(!1===r(i,c+o,u))return}c+=o,a=""}else a+=l}return""!==a?r(h,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));g(e,function(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})},function(e,t){var r=t.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),i=new Uint8Array(r),o=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}i[o++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),n(i.buffer)})},t.encodePayloadAsBlob=function(e,n){g(e,function(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)s[i]=parseInt(o[i]);if(s[o.length]=255,m){var a=new m([t.buffer,s.buffer,e]);n(null,a)}})},function(e,t){return n(new m(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var i=e,o=[];i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],u="",l=1;255!==a[l];l++){if(u.length>310)return r(h,0,1);u+=a[l]}i=s(i,2+u.length),u=parseInt(u);var f=s(i,0,u);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(e){var d=new Uint8Array(f);f="";for(l=0;l<d.length;l++)f+=String.fromCharCode(d[l])}o.push(f),i=s(i,u)}var p=o.length;o.forEach(function(e,i){r(t.decodePacket(e,n,!0),i,p)})}},function(e,t,n){var r=n(4),i=n(3),o=(n(8),r.Class({constructor:function(e){this.SIGNALING_ERRORS={BAD_REQUEST:{code:"400",message:"Bad Request"},DOESNOT_EXIST:{code:"481",message:"Call Does Not Exists"},NOT_ALLOWED:{code:"405",message:"Method Not Allowed"},METHOD_NOT_IMPLEMENTED:{code:"501",message:"Method Not Implemented"}},this.DISCONNECT_REASONS={REQ_TIMED_OUT:{code:"408",message:"Request Timeout"},TRANSPORT_FAIL:{code:"500",message:"Server Internal Error"},KEEPALIVE_TIMEOUT:{code:"450",message:"Keep Alive Timeout"},USER_INITIATED:{code:"200",message:"User Action"},NODE_DRAIN:{code:"302",message:"Node Draining"},SERVICE_UNAVAILABLE:{code:"503",message:"Service Unavailable"},ICE_CONNECTION_FAILED:{code:"520",message:"Ice Connection Failed"},ICE_GATHERING_FAILED:{code:"521",message:"Ice Gathering Failed"},SIG_CHANNEL_CLOSED:{code:"522",message:"Signaling Channel Closed"}},this.GET_LOCAL_MEDIA_STATES={AVAILABLE:{code:200,message:"Requested devices are available",details:""},DEVICES_NOT_FOUND:{code:404,message:"Requested devices were not found",details:""},PERMISSION_DENIED:{code:401,message:"User denied access to local device streams",details:""},SOURCE_UNAVAILABLE:{code:423,message:"Device is unavailable, maybe locked by another process",details:""},NOT_READABLE:{code:409,message:"Device source in use",details:""},EXCEPTION:{code:500,message:"Unknown error",details:""}},this.SCREEN_SHARING_STATES={STARTED:{code:200,message:"Screen Sharing has started",details:""},INSTALL_EXTENSION_FAILED:{code:421,message:"Chrome Extension installation failed",details:""},GET_TOKEN_FAILED:{code:408,message:"Token request timed out",details:""},GET_SCREEN_MEDIA_FAILED:{code:400,message:"Failed to get screen media stream",details:""},EXCEPTION:{code:500,message:"Unknown error",details:""},STOPPED:{code:204,message:"Screen Sharing has stopped",details:""}},this.PEER_CONNECTION_ERRORS={PC_CLOSED:{code:410,message:"Peer Connection is closed, request cannot be processed",details:""}}},translateGetUserMediaError:function(e){var t={},n=this.GET_LOCAL_MEDIA_STATES;switch(e.name){case"DevicesNotFoundError":t=n.DEVICES_NOT_FOUND;break;case"PermissionDeniedError":t=n.PERMISSION_DENIED;break;case"SourceUnavailableError":t=n.SOURCE_UNAVAILABLE;break;case"NotReadableError":t=n.NOT_READABLE;break;default:i.warn("Unhandled error in getUserMedia: ",e),t=n.EXCEPTION}return t.details=e,t},detectCameraStatus:function(e){var t;return e&&"function"==typeof e.getVideoTracks?(t=e.getVideoTracks()[0])?"ended"===t.readyState?(!1,i.warn("RTCErrors: Camera feed is unavailable, faulty camera or its in use by another program"),this.GET_LOCAL_MEDIA_STATES.SOURCE_UNAVAILABLE):(!0,this.GET_LOCAL_MEDIA_STATES.AVAILABLE):(i.warn("RTCErrors: No video tracks available in the stream, triggering camera unavailable state"),this.GET_LOCAL_MEDIA_STATES.SOURCE_UNAVAILABLE):this.GET_LOCAL_MEDIA_STATES.DEVICES_NOT_FOUND}}));e.exports=new o},function(e,t,n){"use strict";var r=n(165);e.exports={string:function(e){for(var t="abcdefghijklmnopqrstuvwxyz012345".length,n=r.randomBytes(e),i=[],o=0;o<e;o++)i.push("abcdefghijklmnopqrstuvwxyz012345".substr(n[o]%t,1));return i.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(73),s=function(){};function a(e,t,n,r){o.call(this,e,t,function(e){return function(t,n,r){s("create ajax sender",t,n);var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var a=i.addPath(t,"/xhr_send"),c=new e("POST",a,n,o);return c.once("finish",function(e){if(s("finish",e),c=null,200!==e&&204!==e)return r(new Error("http status "+e));r()}),function(){s("abort"),c.close(),c=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}(r),n,r)}r(a,o),e.exports=a},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(27);var i=n(8),o=n(4),s=n(2),a=n(3),c=o.Class({constructor:function(){},promiseDecorator:function(e){return function(){var t=i.defer();return e.apply(this,arguments),t.resolve(),t.promise}},deepMergeObjects:function(e,t){e="object"===r(e)?e:{},t="object"===r(t)?t:{};var n=s.keys(e),i=s.keys(t),o=s.extend({},e),a=Object.prototype.toString;return s.each(i,function(r,i,c){if(-1===s.indexOf(n,r))o[r]=t[r];else{var u=e[r],l=t[r];a.call(u)!==a.call(l)?o[r]=t[r]:"[object Object]"===a.call(u)?o[r]=this.deepMergeObjects(u,l):"[object Array]"===a.call(u)?o[r]=this.deepMergeArrays(u,l):o[r]=t[r]}},this),o},deepMergeArrays:function(e,t){var n=e,r=Object.prototype.toString;return s.each(t,function(t,i,o){if("[object Object]"!==r.call(t))n.push(t);else{var a,c,u=!1;c=s.keys(t),s.each(e,function(e,i,o){"[object Object]"===r.call(e)&&(a=s.keys(e),s.difference(a,c).length||(n[i]=this.deepMergeObjects(e,t),u=!0))},this),u||n.push(t)}},this),n},getLocalStreamType:function(e){var t;switch(e.bjn_label){case"local_audio_stream":t="localAudioStream";break;case"local_video_stream":t="localVideoStream";break;case"preview_stream":t="previewStream";break;case"content_stream":t="localContentStream";break;case"fake_stream":t="fakeStream";break;default:a.error("RTCUtils: Unknown stream type. Stream label: "+e.bjn_label)}return t},getRemoteStreamType:function(e){return"stream_label"===e.id?"remoteStream":"remoteContentStream"}});e.exports=new c},function(e,t,n){var r=n(4),i=n(2),o=n(5),s=n(3),a=n(58),c=n(14),u=o.Model.extend({defaults:{currentState:"",prevState:[],iceConnectionState:"",iceGatheringState:"",signalingState:"",disconnectCode:"",disconnectReason:""},setCurrentState:function(e){var t=this.get("currentState"),n=this.get("prevState");e!==t&&(n.push(t),this.set("currentState",e)),this.logStateTransition()},logStateTransition:function(){s.debug("RTCStateManager: Call State: "+this.get("currentState")+", Ice-Gathering: "+this.get("iceGatheringState")+", Ice-Connection: "+this.get("iceConnectionState")+", Signaling: "+this.get("signalingState"))},getCurrentState:function(){return this.get("currentState")},getPreviousState:function(){return this.get("prevState")},getDisconnectReason:function(){return this.get("disconnectReason")}}),l=r.Class({STATIC:{BJ_CALLSTATES:c.BJ_CALLSTATES,ICE_G_STATES:c.addWebrtcStatePrefix("iceG_",c.WEBRTC_STATES.iceGatheringState),ICE_C_STATES:c.addWebrtcStatePrefix("ice_",c.WEBRTC_STATES.iceConnectionState),SIG_STATES:c.addWebrtcStatePrefix("sig_",c.WEBRTC_STATES.signalingState),STATE_EVTS:c.STATE_EVENTS},constructor:function(e){i.bindAll(this),i.extend(this,o.Events),this.model=new u,this.stateMachine=this.initStateMachine()},initStateMachine:function(){var e=a.transitions.transition,t=a.triggers.anyOf,n=a.triggers.allOf,r=l.BJ_CALLSTATES,o=l.ICE_C_STATES,s=l.ICE_G_STATES,c=l.SIG_STATES,u=l.STATE_EVTS,f=function(e){this.callStateChange(e)}.bind(this);return a.create({initial:r.IDLE,events:{initialise:e([{from:r.IDLE,to:r.INITIALISING},{from:r.RESTART_MEDIA,to:r.REINITIALISING}]),connect:e([{from:r.INITIALISING,to:r.CONNECTING},{from:r.REINITIALISING,to:r.RECONNECTING}]),startMedia:e([{from:r.CONNECTING,to:r.STARTING_MEDIA},{from:r.RECONNECTING,to:r.STARTING_MEDIA}]),establishConnection:e([{from:r.STARTING_MEDIA,to:r.CONNECTED},{from:r.RESTART_MEDIA,to:r.CONNECTED}]),mediaDisruption:e({from:r.CONNECTED,to:r.RESTART_MEDIA,resetTriggers:!0}),disconnect:e({from:i.without(i.values(r),r.DISCONNECTED),to:r.DISCONNECTED,resetTriggers:!0}),reset:e({from:i.without(i.values(r),r.IDLE),to:r.IDLE,resetTriggers:!0})},triggers:[{event:u.INITIALISE,activatedBy:n([c.HAVE_LOCAL_OFFER])},{event:u.CONNECT,activatedBy:t([s.GATHERING,s.COMPLETE])},{event:u.START_MEDIA,activatedBy:n([c.STABLE])},{event:u.ESTABLISH_CONNECTION,activatedBy:t([o.COMPLETED,o.CONNECTED])},{event:u.MEDIA_DISRUPTION,activatedBy:n([o.DISCONNECTED])},{event:u.DISCONNECT,activatedBy:n([o.FAILED,o.CLOSED])}],callbacks:[a.transitions.afterTransition({},f)]})},iceGatheringStateChange:function(e){this.model.set("iceGatheringState",e),this.stateMachine.trigger("iceG_"+e)},signalingStateChange:function(e){this.model.set("signalingState",e),this.stateMachine.trigger("sig_"+e)},iceConnectionStateChange:function(e){this.model.set("iceConnectionState",e),this.stateMachine.trigger("ice_"+e)},callDisconnected:function(e){this.stateMachine.disconnect(),this._updateDisconnectState(e),this.model.setCurrentState(this.stateMachine.getState())},_updateDisconnectState:function(e){var t=e&&e.code||"",n=e&&e.message||"";t&&(t="string"==typeof t?parseInt(t,10):t,this.model.set({disconnectCode:t,disconnectReason:{code:t,message:n}}))},getCurrentCallState:function(){return this.model.getCurrentState()},getDisconnectReason:function(){return this.model.getDisconnectReason()},callStateChange:function(e){"disconnected"!==e.to&&this.model.setCurrentState(e.to)},reset:function(){this.stateMachine.reset(),this.model.set(u.defaults)}});e.exports=new l},function(e,t,n){"use strict";var r=n(0),i=n(74);function o(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}r(o,i),o.enabled=i.enabled,e.exports=o},function(e,t,n){"use strict";(function(t){e.exports={isOpera:function(){return t.navigator&&/opera/i.test(t.navigator.userAgent)},isKonqueror:function(){return t.navigator&&/konqueror/i.test(t.navigator.userAgent)},hasDomain:function(){if(!t.document)return!0;try{return!!t.document.domain}catch(e){return!1}}}}).call(this,n(1))},function(e,t,n){"use strict";(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(15),o=n(11),s=n(25);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in t||(t[e.exports.WPrefix]={})},postMessage:function(n,r){t.parent!==t&&t.parent.postMessage(o.stringify({windowId:e.exports.currentWindowId,type:n,data:r||""}),"*")},createIframe:function(e,n){var r,o,s=t.document.createElement("iframe"),a=function(){clearTimeout(r);try{s.onload=null}catch(e){}s.onerror=null},c=function(){s&&(a(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),i.unloadDel(o))},u=function(e){s&&(c(),n(e))};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){u("onerror")},s.onload=function(){clearTimeout(r),r=setTimeout(function(){u("onload timeout")},2e3)},t.document.body.appendChild(s),r=setTimeout(function(){u("timeout")},15e3),o=i.unloadAdd(c),{post:function(e,t){setTimeout(function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(e){}},0)},cleanup:c,loaded:a}},createHtmlfile:function(n,r){var o,s,a,c=["Active"].concat("Object").join("X"),u=new t[c]("htmlfile"),l=function(){clearTimeout(o),a.onerror=null},f=function(){u&&(l(),i.unloadDel(s),a.parentNode.removeChild(a),a=u=null,CollectGarbage())},d=function(e){u&&(f(),r(e))};u.open(),u.write('<html><script>document.domain="'+t.document.domain+'";<\/script></html>'),u.close(),u.parentWindow[e.exports.WPrefix]=t[e.exports.WPrefix];var p=u.createElement("div");return u.body.appendChild(p),a=u.createElement("iframe"),p.appendChild(a),a.src=n,a.onerror=function(){d("onerror")},o=setTimeout(function(){d("timeout")},15e3),s=i.unloadAdd(f),{post:function(e,t){try{setTimeout(function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)},0)}catch(e){}},cleanup:f,loaded:l}}},e.exports.iframeEnabled=!1,t.document&&(e.exports.iframeEnabled=("function"==typeof t.postMessage||"object"===r(t.postMessage))&&!s.isKonqueror())}).call(this,n(1))},function(e,t,n){(function(e){var n;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(t,n){"use strict";"object"===r(e)&&"object"===r(e.exports)?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(i,o){"use strict";var s=[],a=i.document,c=Object.getPrototypeOf,u=s.slice,l=s.concat,f=s.push,d=s.indexOf,p={},h=p.toString,m=p.hasOwnProperty,g=m.toString,v=g.call(Object),y={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},C=function(e){return null!=e&&e===e.window},S={type:!0,src:!0,noModule:!0};function _(e,t,n){var r,i=(t=t||a).createElement("script");if(i.text=e,n)for(r in S)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function T(e){return null==e?e+"":"object"===r(e)||"function"==typeof e?p[h.call(e)]||"object":r(e)}var E=function e(t,n){return new e.fn.init(t,n)},w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function x(e){var t=!!e&&"length"in e&&e.length,n=T(e);return!b(e)&&!C(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}E.fn=E.prototype={jquery:"3.3.1",constructor:E,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:s.sort,splice:s.splice},E.extend=E.fn.extend=function(){var e,t,n,i,o,s,a=arguments[0]||{},c=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[c]||{},c++),"object"===r(a)||b(a)||(a={}),c===u&&(a=this,c--);c<u;c++)if(null!=(e=arguments[c]))for(t in e)n=a[t],a!==(i=e[t])&&(l&&i&&(E.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,s=n&&Array.isArray(n)?n:[]):s=n&&E.isPlainObject(n)?n:{},a[t]=E.extend(l,s,i)):void 0!==i&&(a[t]=i));return a},E.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=c(e))||"function"==typeof(n=m.call(t,"constructor")&&t.constructor)&&g.call(n)===v)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){_(e)},each:function(e,t){var n,r=0;if(x(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(w,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(x(Object(e))?E.merge(n,"string"==typeof e?[e]:e):f.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!==s&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(x(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return l.apply([],s)},guid:1,support:y}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=s[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){p["[object "+t+"]"]=t.toLowerCase()});var R=
/*!
   * Sizzle CSS Selector Engine v2.3.3
   * https://sizzlejs.com/
   *
   * Copyright jQuery Foundation and other contributors
   * Released under the MIT license
   * http://jquery.org/license
   *
   * Date: 2016-08-08
   */
function(e){var t,n,r,i,o,s,a,c,u,l,f,d,p,h,m,g,v,y,b,C="sizzle"+1*new Date,S=e.document,_=0,T=0,E=se(),w=se(),x=se(),R=function(e,t){return e===t&&(f=!0),0},k={}.hasOwnProperty,A=[],I=A.pop,M=A.push,P=A.push,O=A.slice,N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+D+"*("+L+")(?:"+D+"*([*^$|!~]?=)"+D+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+D+"*\\]",B=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",U=new RegExp(D+"+","g"),V=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g"),q=new RegExp("^"+D+"*,"+D+"*"),H=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),G=new RegExp("="+D+"*([^\\]'\"]*?)"+D+"*\\]","g"),W=new RegExp(B),z=new RegExp("^"+L+"$"),J={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+D+"?|("+D+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){d()},ie=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{P.apply(A=O.call(S.childNodes),S.childNodes),A[S.childNodes.length].nodeType}catch(e){P={apply:A.length?function(e,t){M.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,r,i){var o,a,u,l,f,h,v,y=t&&t.ownerDocument,_=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return r;if(!i&&((t?t.ownerDocument||t:S)!==p&&d(t),t=t||p,m)){if(11!==_&&(f=Y.exec(e)))if(o=f[1]){if(9===_){if(!(u=t.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(y&&(u=y.getElementById(o))&&b(t,u)&&u.id===o)return r.push(u),r}else{if(f[2])return P.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!x[e+" "]&&(!g||!g.test(e))){if(1!==_)y=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((l=t.getAttribute("id"))?l=l.replace(te,ne):t.setAttribute("id",l=C),a=(h=s(e)).length;a--;)h[a]="#"+l+" "+ve(h[a]);v=h.join(","),y=Q.test(e)&&me(t.parentNode)||t}if(v)try{return P.apply(r,y.querySelectorAll(v)),r}catch(e){}finally{l===C&&t.removeAttribute("id")}}}return c(e.replace(V,"$1"),t,r,i)}function se(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ae(e){return e[C]=!0,e}function ce(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function le(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return ae(function(t){return t=+t,ae(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=oe.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:S;return s!==p&&9===s.nodeType&&s.documentElement?(h=(p=s).documentElement,m=!o(p),S!==p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ce(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=K.test(p.getElementsByClassName),n.getById=ce(function(e){return h.appendChild(e).id=C,!p.getElementsByName||!p.getElementsByName(C).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=K.test(p.querySelectorAll))&&(ce(function(e){h.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+D+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+D+"*(?:value|"+j+")"),e.querySelectorAll("[id~="+C+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||g.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+D+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=K.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ce(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",B)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=K.test(h.compareDocumentPosition),b=t||K.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},R=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===p||e.ownerDocument===S&&b(S,e)?-1:t===p||t.ownerDocument===S&&b(S,t)?1:l?N(l,e)-N(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e===p?-1:t===p?1:i?-1:o?1:l?N(l,e)-N(l,t):0;if(i===o)return le(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?le(s[r],a[r]):s[r]===S?-1:a[r]===S?1:0},p):p},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&d(e),t=t.replace(G,"='$1']"),n.matchesSelector&&m&&!x[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,p,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==p&&d(e),b(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==p&&d(e);var i=r.attrHandle[t.toLowerCase()],o=i&&k.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(R),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return l=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:ae,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+D+")"+e+"("+D+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var u,l,f,d,p,h,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!c&&!a,b=!1;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?g.firstChild:g.lastChild],s&&y){for(b=(p=(u=(l=(f=(d=g)[C]||(d[C]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===_&&u[1])&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(b=p=0)||h.pop();)if(1===d.nodeType&&++b&&d===t){l[e]=[_,p,b];break}}else if(y&&(b=p=(u=(l=(f=(d=t)[C]||(d[C]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===_&&u[1]),!1===b)for(;(d=++p&&d&&d[m]||(b=p=0)||h.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((l=(f=d[C]||(d[C]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]=[_,b]),d!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[C]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,n){for(var r,o=i(e,t),s=o.length;s--;)e[r=N(e,o[s])]=!(n[r]=o[s])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ae(function(e){var t=[],n=[],r=a(e.replace(V,"$1"));return r[C]?ae(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:ae(function(e){return function(t){return oe(e,t).length>0}}),contains:ae(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ae(function(e){return z.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=de(t);function ge(){}function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,i=t.next,o=i||r,s=n&&"parentNode"===o,a=T++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||s)return e(t,n,i);return!1}:function(t,n,c){var u,l,f,d=[_,a];if(c){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(l=(f=t[C]||(t[C]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=l[o])&&u[0]===_&&u[1]===a)return d[2]=u[2];if(l[o]=d,d[2]=e(t,n,c))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Ce(e,t,n,r,i){for(var o,s=[],a=0,c=e.length,u=null!=t;a<c;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),u&&t.push(a)));return s}function Se(e,t,n,r,i,o){return r&&!r[C]&&(r=Se(r)),i&&!i[C]&&(i=Se(i,o)),ae(function(o,s,a,c){var u,l,f,d=[],p=[],h=s.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!o&&t?m:Ce(m,d,e,a,c),v=n?i||(o?e:h||r)?[]:s:g;if(n&&n(g,v,a,c),r)for(u=Ce(v,p),r(u,[],a,c),l=u.length;l--;)(f=u[l])&&(v[p[l]]=!(g[p[l]]=f));if(o){if(i||e){if(i){for(u=[],l=v.length;l--;)(f=v[l])&&u.push(g[l]=f);i(null,v=[],u,c)}for(l=v.length;l--;)(f=v[l])&&(u=i?N(o,f):d[l])>-1&&(o[u]=!(s[u]=f))}}else v=Ce(v===s?v.splice(h,v.length):v),i?i(null,s,v,c):P.apply(s,v)})}function _e(e){for(var t,n,i,o=e.length,s=r.relative[e[0].type],a=s||r.relative[" "],c=s?1:0,l=ye(function(e){return e===t},a,!0),f=ye(function(e){return N(t,e)>-1},a,!0),d=[function(e,n,r){var i=!s&&(r||n!==u)||((t=n).nodeType?l(e,n,r):f(e,n,r));return t=null,i}];c<o;c++)if(n=r.relative[e[c].type])d=[ye(be(d),n)];else{if((n=r.filter[e[c].type].apply(null,e[c].matches))[C]){for(i=++c;i<o&&!r.relative[e[i].type];i++);return Se(c>1&&be(d),c>1&&ve(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(V,"$1"),n,c<i&&_e(e.slice(c,i)),i<o&&_e(e=e.slice(i)),i<o&&ve(e))}d.push(n)}return be(d)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,s=oe.tokenize=function(e,t){var n,i,o,s,a,c,u,l=w[e+" "];if(l)return t?0:l.slice(0);for(a=e,c=[],u=r.preFilter;a;){for(s in n&&!(i=q.exec(a))||(i&&(a=a.slice(i[0].length)||a),c.push(o=[])),n=!1,(i=H.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(V," ")}),a=a.slice(n.length)),r.filter)!(i=J[s].exec(a))||u[s]&&!(i=u[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?oe.error(e):w(e,c).slice(0)},a=oe.compile=function(e,t){var n,i=[],o=[],a=x[e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)(a=_e(t[n]))[C]?i.push(a):o.push(a);(a=x(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,s,a,c,l){var f,h,g,v=0,y="0",b=o&&[],C=[],S=u,T=o||i&&r.find.TAG("*",l),E=_+=null==S?1:Math.random()||.1,w=T.length;for(l&&(u=s===p||s||l);y!==w&&null!=(f=T[y]);y++){if(i&&f){for(h=0,s||f.ownerDocument===p||(d(f),a=!m);g=e[h++];)if(g(f,s||p,a)){c.push(f);break}l&&(_=E)}n&&((f=!g&&f)&&v--,o&&b.push(f))}if(v+=y,n&&y!==v){for(h=0;g=t[h++];)g(b,C,s,a);if(o){if(v>0)for(;y--;)b[y]||C[y]||(C[y]=I.call(c));C=Ce(C)}P.apply(c,C),l&&!o&&C.length>0&&v+t.length>1&&oe.uniqueSort(c)}return l&&(_=E,u=S),b};return n?ae(o):o}(o,i))).selector=e}return a},c=oe.select=function(e,t,n,i){var o,c,u,l,f,d="function"==typeof e&&e,p=!i&&s(e=d.selector||e);if(n=n||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&m&&r.relative[c[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(Z,ee),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(o=J.needsContext.test(e)?0:c.length;o--&&(u=c[o],!r.relative[l=u.type]);)if((f=r.find[l])&&(i=f(u.matches[0].replace(Z,ee),Q.test(c[0].type)&&me(t.parentNode)||t))){if(c.splice(o,1),!(e=i.length&&ve(c)))return P.apply(n,i),n;break}}return(d||a(e,p))(i,t,!m,n,!t||Q.test(e)&&me(t.parentNode)||t),n},n.sortStable=C.split("").sort(R).join("")===C,n.detectDuplicates=!!f,d(),n.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ue("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ue("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||ue(j,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(i);E.find=R,E.expr=R.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=R.uniqueSort,E.text=R.getText,E.isXMLDoc=R.isXML,E.contains=R.contains,E.escapeSelector=R.escape;var k=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&E(e).is(n))break;r.push(e)}return r},A=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},I=E.expr.match.needsContext;function M(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var P=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,t,n){return b(t)?E.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?E.grep(e,function(e){return e===t!==n}):"string"!=typeof t?E.grep(e,function(e){return d.call(t,e)>-1!==n}):E.filter(t,e,n)}E.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?E.find.matchesSelector(r,e)?[r]:[]:E.find.matches(e,E.grep(t,function(e){return 1===e.nodeType}))},E.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(E(e).filter(function(){for(t=0;t<r;t++)if(E.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)E.find(e,i[t],n);return r>1?E.uniqueSort(n):n},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"==typeof e&&I.test(e)?E(e):e||[],!1).length}});var N,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||N,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:a,!0)),P.test(r[1])&&E.isPlainObject(t))for(r in t)b(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=a.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this)}).prototype=E.fn,N=E(a);var D=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function F(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],s="string"!=typeof e&&E(e);if(!I.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?E.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?d.call(E(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return M(e,"iframe")?e.contentDocument:(M(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},function(e,t){E.fn[e]=function(n,r){var i=E.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=E.filter(r,i)),this.length>1&&(L[e]||E.uniqueSort(i),D.test(e)&&i.reverse()),this.pushStack(i)}});var B=/[^\x20\t\r\n\f]+/g;function U(e){return e}function V(e){throw e}function q(e,t,n,r){var i;try{e&&b(i=e.promise)?i.call(e).done(t).fail(n):e&&b(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return E.each(e.match(B)||[],function(e,n){t[n]=!0}),t}(e):E.extend({},e);var t,n,r,i,o=[],s=[],a=-1,c=function(){for(i=i||e.once,r=t=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(a=o.length-1,s.push(n)),function t(n){E.each(n,function(n,r){b(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==T(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return E.each(arguments,function(e,t){for(var n;(n=E.inArray(t,o,n))>-1;)o.splice(n,1),n<=a&&a--}),this},has:function(e){return e?E.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return E.Deferred(function(n){E.each(t,function(t,r){var i=b(e[r[4]])&&e[r[4]];s[r[1]](function(){var e=i&&i.apply(this,arguments);e&&b(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,n,o){var s=0;function a(e,t,n,o){return function(){var c=this,u=arguments,l=function(){var i,l;if(!(e<s)){if((i=n.apply(c,u))===t.promise())throw new TypeError("Thenable self-resolution");l=i&&("object"===r(i)||"function"==typeof i)&&i.then,b(l)?o?l.call(i,a(s,t,U,o),a(s,t,V,o)):(s++,l.call(i,a(s,t,U,o),a(s,t,V,o),a(s,t,U,t.notifyWith))):(n!==U&&(c=void 0,u=[i]),(o||t.resolveWith)(c,u))}},f=o?l:function(){try{l()}catch(r){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(r,f.stackTrace),e+1>=s&&(n!==V&&(c=void 0,u=[r]),t.rejectWith(c,u))}};e?f():(E.Deferred.getStackHook&&(f.stackTrace=E.Deferred.getStackHook()),i.setTimeout(f))}}return E.Deferred(function(r){t[0][3].add(a(0,r,b(o)?o:U,r.notifyWith)),t[1][3].add(a(0,r,b(e)?e:U)),t[2][3].add(a(0,r,b(n)?n:V))}).promise()},promise:function(e){return null!=e?E.extend(e,o):o}},s={};return E.each(t,function(e,r){var i=r[2],a=r[5];o[r[1]]=i.add,a&&i.add(function(){n=a},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),i.add(r[3].fire),s[r[0]]=function(){return s[r[0]+"With"](this===s?void 0:this,arguments),this},s[r[0]+"With"]=i.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,r=Array(n),i=u.call(arguments),o=E.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?u.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(q(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||b(i[n]&&i[n].then)))return o.then();for(;n--;)q(i[n],s(n),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&H.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){i.setTimeout(function(){throw e})};var G=E.Deferred();function W(){a.removeEventListener("DOMContentLoaded",W),i.removeEventListener("load",W),E.ready()}E.fn.ready=function(e){return G.then(e).catch(function(e){E.readyException(e)}),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||G.resolveWith(a,[E]))}}),E.ready.then=G.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?i.setTimeout(E.ready):(a.addEventListener("DOMContentLoaded",W),i.addEventListener("load",W));var z=function e(t,n,r,i,o,s,a){var c=0,u=t.length,l=null==r;if("object"===T(r))for(c in o=!0,r)e(t,n,c,r[c],!0,s,a);else if(void 0!==i&&(o=!0,b(i)||(a=!0),l&&(a?(n.call(t,i),n=null):(l=n,n=function(e,t,n){return l.call(E(e),n)})),n))for(;c<u;c++)n(t[c],r,a?i:i.call(t[c],c,n(t[c],r)));return o?t:l?n.call(t):u?n(t[0],r):s},J=/^-ms-/,$=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function K(e){return e.replace(J,"ms-").replace($,X)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=E.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[K(t)]=n;else for(r in t)i[K(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match(B)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||E.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var Z=new Q,ee=new Q,te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ne=/[A-Z]/g;function re(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ne,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:te.test(e)?JSON.parse(e):e)}(n)}catch(e){}ee.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return ee.hasData(e)||Z.hasData(e)},data:function(e,t,n){return ee.access(e,t,n)},removeData:function(e,t){ee.remove(e,t)},_data:function(e,t,n){return Z.access(e,t,n)},_removeData:function(e,t){Z.remove(e,t)}}),E.fn.extend({data:function(e,t){var n,i,o,s=this[0],a=s&&s.attributes;if(void 0===e){if(this.length&&(o=ee.get(s),1===s.nodeType&&!Z.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=K(i.slice(5)),re(s,i,o[i]));Z.set(s,"hasDataAttrs",!0)}return o}return"object"===r(e)?this.each(function(){ee.set(this,e)}):z(this,function(t){var n;if(s&&void 0===t)return void 0!==(n=ee.get(s,e))?n:void 0!==(n=re(s,e))?n:void 0;this.each(function(){ee.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ee.remove(this,e)})}}),E.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Z.get(e,t),n&&(!r||Array.isArray(n)?r=Z.access(e,t,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),r=n.length,i=n.shift(),o=E._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){E.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z.get(e,n)||Z.access(e,n,{empty:E.Callbacks("once memory").add(function(){Z.remove(e,[t+"queue",n])})})}}),E.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?E.queue(this[0],e):void 0===t?this:this.each(function(){var n=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&E.dequeue(this,e)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=E.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Z.get(o[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oe=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&E.contains(e.ownerDocument,e)&&"none"===E.css(e,"display")},ce=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=s[o];return i};function ue(e,t,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return E.css(e,t,"")},c=a(),u=n&&n[3]||(E.cssNumber[t]?"":"px"),l=(E.cssNumber[t]||"px"!==u&&+c)&&oe.exec(E.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;s--;)E.style(e,t,l+u),(1-o)*(1-(o=a()/c||.5))<=0&&(s=0),l/=o;l*=2,E.style(e,t,l+u),n=n||[]}return n&&(l=+l||+c||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=l,r.end=i)),i}var le={};function fe(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=E.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function de(e,t){for(var n,r,i=[],o=0,s=e.length;o<s;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Z.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=fe(r))):"none"!==n&&(i[o]="none",Z.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}E.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?E(this).show():E(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,me=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&M(e,t)?E.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Z.set(e[n],"globalEval",!t||Z.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var be,Ce,Se=/<|&#?\w+;/;function _e(e,t,n,r,i){for(var o,s,a,c,u,l,f=t.createDocumentFragment(),d=[],p=0,h=e.length;p<h;p++)if((o=e[p])||0===o)if("object"===T(o))E.merge(d,o.nodeType?[o]:o);else if(Se.test(o)){for(s=s||f.appendChild(t.createElement("div")),a=(he.exec(o)||["",""])[1].toLowerCase(),c=ge[a]||ge._default,s.innerHTML=c[1]+E.htmlPrefilter(o)+c[2],l=c[0];l--;)s=s.lastChild;E.merge(d,s.childNodes),(s=f.firstChild).textContent=""}else d.push(t.createTextNode(o));for(f.textContent="",p=0;o=d[p++];)if(r&&E.inArray(o,r)>-1)i&&i.push(o);else if(u=E.contains(o.ownerDocument,o),s=ve(f.appendChild(o),"script"),u&&ye(s),n)for(l=0;o=s[l++];)me.test(o.type||"")&&n.push(o);return f}be=a.createDocumentFragment().appendChild(a.createElement("div")),(Ce=a.createElement("input")).setAttribute("type","radio"),Ce.setAttribute("checked","checked"),Ce.setAttribute("name","t"),be.appendChild(Ce),y.checkClone=be.cloneNode(!0).cloneNode(!0).lastChild.checked,be.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!be.cloneNode(!0).lastChild.defaultValue;var Te=a.documentElement,Ee=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function Re(){return!0}function ke(){return!1}function Ae(){try{return a.activeElement}catch(e){}}function Ie(e,t,n,i,o,s){var a,c;if("object"===r(t)){for(c in"string"!=typeof n&&(i=i||n,n=void 0),t)Ie(e,c,n,i,t[c],s);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=ke;else if(!o)return e;return 1===s&&(a=o,(o=function(e){return E().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=E.guid++)),e.each(function(){E.event.add(this,t,o,i,n)})}E.event={global:{},add:function(e,t,n,r,i){var o,s,a,c,u,l,f,d,p,h,m,g=Z.get(e);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&E.find.matchesSelector(Te,i),n.guid||(n.guid=E.guid++),(c=g.events)||(c=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(B)||[""]).length;u--;)p=m=(a=xe.exec(t[u])||[])[1],h=(a[2]||"").split(".").sort(),p&&(f=E.event.special[p]||{},p=(i?f.delegateType:f.bindType)||p,f=E.event.special[p]||{},l=E.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:h.join(".")},o),(d=c[p])||((d=c[p]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,s)||e.addEventListener&&e.addEventListener(p,s)),f.add&&(f.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,l):d.push(l),E.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,s,a,c,u,l,f,d,p,h,m,g=Z.hasData(e)&&Z.get(e);if(g&&(c=g.events)){for(u=(t=(t||"").match(B)||[""]).length;u--;)if(p=m=(a=xe.exec(t[u])||[])[1],h=(a[2]||"").split(".").sort(),p){for(f=E.event.special[p]||{},d=c[p=(r?f.delegateType:f.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)l=d[o],!i&&m!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(d.splice(o,1),l.selector&&d.delegateCount--,f.remove&&f.remove.call(e,l));s&&!d.length&&(f.teardown&&!1!==f.teardown.call(e,h,g.handle)||E.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)E.event.remove(e,p+t[u],n,r,!0);E.isEmptyObject(c)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,s,a=E.event.fix(e),c=new Array(arguments.length),u=(Z.get(this,"events")||{})[a.type]||[],l=E.event.special[a.type]||{};for(c[0]=a,t=1;t<arguments.length;t++)c[t]=arguments[t];if(a.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){for(s=E.event.handlers.call(this,a,u),t=0;(i=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(r=((E.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,c))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,r,i,o,s,a=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],s={},n=0;n<c;n++)void 0===s[i=(r=t[n]).selector+" "]&&(s[i]=r.needsContext?E(i,this).index(u)>-1:E.find(i,this,null,[u]).length),s[i]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return u=this,c<t.length&&a.push({elem:u,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:b(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ae()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ae()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&M(this,"input"))return this.click(),!1},_default:function(e){return M(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Re:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Re,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Re,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Re,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ee.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},E.event.addProp),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||E.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),E.fn.extend({on:function(e,t,n,r){return Ie(this,e,t,n,r)},one:function(e,t,n,r){return Ie(this,e,t,n,r,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,E(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"===r(e)){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){E.event.remove(this,e,n,t)})}});var Me=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Pe=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return M(e,"table")&&M(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o,s,a,c,u;if(1===t.nodeType){if(Z.hasData(e)&&(o=Z.access(e),s=Z.set(t,o),u=o.events))for(i in delete s.handle,s.events={},u)for(n=0,r=u[i].length;n<r;n++)E.event.add(t,i,u[i][n]);ee.hasData(e)&&(a=ee.access(e),c=E.extend({},a),ee.set(t,c))}}function Be(e,t,n,r){t=l.apply([],t);var i,o,s,a,c,u,f=0,d=e.length,p=d-1,h=t[0],m=b(h);if(m||d>1&&"string"==typeof h&&!y.checkClone&&Oe.test(h))return e.each(function(i){var o=e.eq(i);m&&(t[0]=h.call(this,i,o.html())),Be(o,t,n,r)});if(d&&(o=(i=_e(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=E.map(ve(i,"script"),De)).length;f<d;f++)c=i,f!==p&&(c=E.clone(c,!0,!0),a&&E.merge(s,ve(c,"script"))),n.call(e[f],c,f);if(a)for(u=s[s.length-1].ownerDocument,E.map(s,Le),f=0;f<a;f++)c=s[f],me.test(c.type||"")&&!Z.access(c,"globalEval")&&E.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?E._evalUrl&&E._evalUrl(c.src):_(c.textContent.replace(Ne,""),u,c))}return e}function Ue(e,t,n){for(var r,i=t?E.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||E.cleanData(ve(r)),r.parentNode&&(n&&E.contains(r.ownerDocument,r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}E.extend({htmlPrefilter:function(e){return e.replace(Me,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a,c,u,l=e.cloneNode(!0),f=E.contains(e.ownerDocument,e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(s=ve(l),r=0,i=(o=ve(e)).length;r<i;r++)a=o[r],c=s[r],u=void 0,"input"===(u=c.nodeName.toLowerCase())&&pe.test(a.type)?c.checked=a.checked:"input"!==u&&"textarea"!==u||(c.defaultValue=a.defaultValue);if(t)if(n)for(o=o||ve(e),s=s||ve(l),r=0,i=o.length;r<i;r++)Fe(o[r],s[r]);else Fe(e,l);return(s=ve(l,"script")).length>0&&ye(s,!f&&ve(e,"script")),l},cleanData:function(e){for(var t,n,r,i=E.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[Z.expando]){if(t.events)for(r in t.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,t.handle);n[Z.expando]=void 0}n[ee.expando]&&(n[ee.expando]=void 0)}}}),E.fn.extend({detach:function(e){return Ue(this,e,!0)},remove:function(e){return Ue(this,e)},text:function(e){return z(this,function(e){return void 0===e?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Be(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return Be(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Pe.test(e)&&!ge[(he.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Be(this,arguments,function(t){var n=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(ve(this)),n&&n.replaceChild(t,this))},e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){E.fn[e]=function(e){for(var n,r=[],i=E(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),E(i[s])[t](n),f.apply(r,n.get());return this.pushStack(r)}});var Ve=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),qe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},He=new RegExp(se.join("|"),"i");function Ge(e,t,n){var r,i,o,s,a=e.style;return(n=n||qe(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||E.contains(e.ownerDocument,e)||(s=E.style(e,t)),!y.pixelBoxStyles()&&Ve.test(s)&&He.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Te.appendChild(u).appendChild(l);var e=i.getComputedStyle(l);n="1%"!==e.top,c=12===t(e.marginLeft),l.style.right="60%",s=36===t(e.right),r=36===t(e.width),l.style.position="absolute",o=36===l.offsetWidth||"absolute",Te.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,o,s,c,u=a.createElement("div"),l=a.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,E.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),o}}))}();var ze=/^(none|table(?!-c[ea]).+)/,Je=/^--/,$e={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","Moz","ms"],Ye=a.createElement("div").style;function Qe(e){var t=E.cssProps[e];return t||(t=E.cssProps[e]=function(e){if(e in Ye)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ke.length;n--;)if((e=Ke[n]+t)in Ye)return e}(e)||e),t}function Ze(e,t,n){var r=oe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var s="width"===t?1:0,a=0,c=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(c+=E.css(e,n+se[s],!0,i)),r?("content"===n&&(c-=E.css(e,"padding"+se[s],!0,i)),"margin"!==n&&(c-=E.css(e,"border"+se[s]+"Width",!0,i))):(c+=E.css(e,"padding"+se[s],!0,i),"padding"!==n?c+=E.css(e,"border"+se[s]+"Width",!0,i):a+=E.css(e,"border"+se[s]+"Width",!0,i));return!r&&o>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-c-a-.5))),c}function tt(e,t,n){var r=qe(e),i=Ge(e,t,r),o="border-box"===E.css(e,"boxSizing",!1,r),s=o;if(Ve.test(i)){if(!n)return i;i="auto"}return s=s&&(y.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===E.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],s=!0),(i=parseFloat(i)||0)+et(e,t,n||(o?"border":"content"),s,r,i)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,c=K(t),u=Je.test(t),l=e.style;if(u||(t=Qe(c)),a=E.cssHooks[t]||E.cssHooks[c],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(e,!1,i))?o:l[t];"string"===(s=r(n))&&(o=oe.exec(n))&&o[1]&&(n=ue(e,t,o),s="number"),null!=n&&n==n&&("number"===s&&(n+=o&&o[3]||(E.cssNumber[c]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,s,a=K(t);return Je.test(t)||(t=Qe(a)),(s=E.cssHooks[t]||E.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),"normal"===i&&t in Xe&&(i=Xe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),E.each(["height","width"],function(e,t){E.cssHooks[t]={get:function(e,n,r){if(n)return!ze.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,r):ce(e,$e,function(){return tt(e,t,r)})},set:function(e,n,r){var i,o=qe(e),s="border-box"===E.css(e,"boxSizing",!1,o),a=r&&et(e,t,r,s,o);return s&&y.scrollboxSize()===o.position&&(a-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-et(e,t,"border",!1,o)-.5)),a&&(i=oe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=E.css(e,t)),Ze(0,n,a)}}}),E.cssHooks.marginLeft=We(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-ce(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(e,t){E.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+se[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(E.cssHooks[e+t].set=Ze)}),E.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},s=0;if(Array.isArray(t)){for(r=qe(e),i=t.length;s<i;s++)o[t[s]]=E.css(e,t[s],!1,r);return o}return void 0!==n?E.style(e,t,n):E.css(e,t)},e,t,arguments.length>1)}}),E.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[E.cssProps[e.prop]]&&!E.cssHooks[e.prop]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=nt.prototype.init,E.fx.step={};var rt,it,ot=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function at(){it&&(!1===a.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(at):i.setTimeout(at,E.fx.interval),E.fx.tick())}function ct(){return i.setTimeout(function(){rt=void 0}),rt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=se[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function ft(e,t,n){var r,i,o=0,s=ft.prefilters.length,a=E.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=rt||ct(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(r);return a.notifyWith(e,[u,r,n]),r<1&&s?n:(s||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var r=E.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),l=u.props;for(!function(e,t){var n,r,i,o,s;for(n in e)if(i=t[r=K(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=E.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(l,u.opts.specialEasing);o<s;o++)if(r=ft.prefilters[o].call(u,e,l,u.opts))return b(r.stop)&&(E._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return E.map(l,lt,u),b(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),E.fx.timer(E.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}E.Animation=E.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,oe.exec(t),n),n}]},tweener:function(e,t){b(e)?(t=e,e=["*"]):e=e.match(B);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,s,a,c,u,l,f="width"in t||"height"in t,d=this,p={},h=e.style,m=e.nodeType&&ae(e),g=Z.get(e,"fxshow");for(r in n.queue||(null==(s=E._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,E.queue(e,"fx").length||s.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}p[r]=g&&g[r]||E.style(e,r)}if((c=!E.isEmptyObject(t))||!E.isEmptyObject(p))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=g&&g.display)&&(u=Z.get(e,"display")),"none"===(l=E.css(e,"display"))&&(u?l=u:(de([e],!0),u=e.style.display||u,l=E.css(e,"display"),de([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===E.css(e,"float")&&(c||(d.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),c=!1,p)c||(g?"hidden"in g&&(m=g.hidden):g=Z.access(e,"fxshow",{display:u}),o&&(g.hidden=!m),m&&de([e],!0),d.done(function(){for(r in m||de([e]),Z.remove(e,"fxshow"),p)E.style(e,r,p[r])})),c=lt(m?g[r]:0,r,d),r in g||(g[r]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),E.speed=function(e,t,n){var i=e&&"object"===r(e)?E.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){b(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=E.isEmptyObject(e),o=E.speed(t,n,r),s=function(){var t=ft(this,E.extend({},e),o);(i||Z.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=E.timers,s=Z.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&st.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||E.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Z.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=E.timers,s=r?r.length:0;for(n.finish=!0,E.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),E.each(["toggle","show","hide"],function(e,t){var n=E.fn[t];E.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),E.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){E.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),rt=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){it||(it=!0,at())},E.fx.stop=function(){it=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}})},function(){var e=a.createElement("input"),t=a.createElement("select").appendChild(a.createElement("option"));e.type="checkbox",y.checkOn=""!==e.value,y.optSelected=t.selected,(e=a.createElement("input")).value="t",e.type="radio",y.radioValue="t"===e.value}();var dt,pt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return z(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})}}),E.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?E.prop(e,t,n):(1===o&&E.isXMLDoc(e)||(i=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=E.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&M(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(B);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||E.find.attr;pt[t]=function(e,t,r){var i,o,s=t.toLowerCase();return r||(o=pt[s],pt[s]=i,i=null!=n(e,t,r)?s:null,pt[s]=o),i}});var ht=/^(?:input|select|textarea|button)$/i,mt=/^(?:a|area)$/i;function gt(e){return(e.match(B)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}E.fn.extend({prop:function(e,t){return z(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[E.propFix[e]||e]})}}),E.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(e)||(t=E.propFix[t]||t,i=E.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,c=0;if(b(e))return this.each(function(t){E(this).addClass(e.call(this,t,vt(this)))});if((t=yt(e)).length)for(;n=this[c++];)if(i=vt(n),r=1===n.nodeType&&" "+gt(i)+" "){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=gt(r))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,c=0;if(b(e))return this.each(function(t){E(this).removeClass(e.call(this,t,vt(this)))});if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;n=this[c++];)if(i=vt(n),r=1===n.nodeType&&" "+gt(i)+" "){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(a=gt(r))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=r(e),i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):b(e)?this.each(function(n){E(this).toggleClass(e.call(this,n,vt(this),t),t)}):this.each(function(){var t,r,o,s;if(i)for(r=0,o=E(this),s=yt(e);t=s[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=vt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+gt(vt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;E.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=b(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,E(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=E.map(i,function(e){return null==e?"":e+""})),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:gt(E.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],c=s?o+1:i.length;for(r=o<0?c:s?o:0;r<c;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!M(n.parentNode,"optgroup"))){if(t=E(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=E.makeArray(t),s=i.length;s--;)((r=i[s]).selected=E.inArray(E.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},y.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in i;var Ct=/^(?:focusinfocus|focusoutblur)$/,St=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,n,o){var s,c,u,l,f,d,p,h,g=[n||a],v=m.call(e,"type")?e.type:e,y=m.call(e,"namespace")?e.namespace.split("."):[];if(c=h=u=n=n||a,3!==n.nodeType&&8!==n.nodeType&&!Ct.test(v+E.event.triggered)&&(v.indexOf(".")>-1&&(y=v.split("."),v=y.shift(),y.sort()),f=v.indexOf(":")<0&&"on"+v,(e=e[E.expando]?e:new E.Event(v,"object"===r(e)&&e)).isTrigger=o?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),p=E.event.special[v]||{},o||!p.trigger||!1!==p.trigger.apply(n,t))){if(!o&&!p.noBubble&&!C(n)){for(l=p.delegateType||v,Ct.test(l+v)||(c=c.parentNode);c;c=c.parentNode)g.push(c),u=c;u===(n.ownerDocument||a)&&g.push(u.defaultView||u.parentWindow||i)}for(s=0;(c=g[s++])&&!e.isPropagationStopped();)h=c,e.type=s>1?l:p.bindType||v,(d=(Z.get(c,"events")||{})[e.type]&&Z.get(c,"handle"))&&d.apply(c,t),(d=f&&c[f])&&d.apply&&Y(c)&&(e.result=d.apply(c,t),!1===e.result&&e.preventDefault());return e.type=v,o||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),t)||!Y(n)||f&&b(n[v])&&!C(n)&&((u=n[f])&&(n[f]=null),E.event.triggered=v,e.isPropagationStopped()&&h.addEventListener(v,St),n[v](),e.isPropagationStopped()&&h.removeEventListener(v,St),E.event.triggered=void 0,u&&(n[f]=u)),e.result}},simulate:function(e,t,n){var r=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(r,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}}),y.focusin||E.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){E.event.simulate(t,e.target,E.event.fix(e))};E.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Z.access(r,t);i||r.addEventListener(e,n,!0),Z.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Z.access(r,t)-1;i?Z.access(r,t,i):(r.removeEventListener(e,n,!0),Z.remove(r,t))}}});var _t=i.location,Tt=Date.now(),Et=/\?/;E.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+e),t};var wt=/\[\]$/,xt=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(e,t,n,i){var o;if(Array.isArray(t))E.each(t,function(t,o){n||wt.test(e)?i(e,o):At(e+"["+("object"===r(o)&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==T(t))i(e,t);else for(o in t)At(e+"["+o+"]",t[o],n,i)}E.param=function(e,t){var n,r=[],i=function(e,t){var n=b(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&kt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:n.replace(xt,"\r\n")}}).get()}});var It=/%20/g,Mt=/#.*$/,Pt=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,jt=/^\/\//,Dt={},Lt={},Ft="*/".concat("*"),Bt=a.createElement("a");function Ut(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(B)||[];if(b(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Vt(e,t,n,r){var i={},o=e===Lt;function s(a){var c;return i[a]=!0,E.each(e[a]||[],function(e,a){var u=a(t,n,r);return"string"!=typeof u||o||i[u]?o?!(c=u):void 0:(t.dataTypes.unshift(u),s(u),!1)}),c}return s(t.dataTypes[0])||!i["*"]&&s("*")}function qt(e,t){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&E.extend(!0,e,r),e}Bt.href=_t.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,E.ajaxSettings),t):qt(E.ajaxSettings,e)},ajaxPrefilter:Ut(Dt),ajaxTransport:Ut(Lt),ajax:function(e,t){"object"===r(e)&&(t=e,e=void 0),t=t||{};var n,o,s,c,u,l,f,d,p,h,m=E.ajaxSetup({},t),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?E(g):E.event,y=E.Deferred(),b=E.Callbacks("once memory"),C=m.statusCode||{},S={},_={},T="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(f){if(!c)for(c={};t=Ot.exec(s);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return f?s:null},setRequestHeader:function(e,t){return null==f&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,S[e]=t),this},overrideMimeType:function(e){return null==f&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(f)w.always(e[w.status]);else for(t in e)C[t]=[C[t],e[t]];return this},abort:function(e){var t=e||T;return n&&n.abort(t),x(0,t),this}};if(y.promise(w),m.url=((e||m.url||_t.href)+"").replace(jt,_t.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(B)||[""],null==m.crossDomain){l=a.createElement("a");try{l.href=m.url,l.href=l.href,m.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=E.param(m.data,m.traditional)),Vt(Dt,m,t,w),f)return w;for(p in(d=E.event&&m.global)&&0==E.active++&&E.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Nt.test(m.type),o=m.url.replace(Mt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(It,"+")):(h=m.url.slice(o.length),m.data&&(m.processData||"string"==typeof m.data)&&(o+=(Et.test(o)?"&":"?")+m.data,delete m.data),!1===m.cache&&(o=o.replace(Pt,"$1"),h=(Et.test(o)?"&":"?")+"_="+Tt+++h),m.url=o+h),m.ifModified&&(E.lastModified[o]&&w.setRequestHeader("If-Modified-Since",E.lastModified[o]),E.etag[o]&&w.setRequestHeader("If-None-Match",E.etag[o])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Ft+"; q=0.01":""):m.accepts["*"]),m.headers)w.setRequestHeader(p,m.headers[p]);if(m.beforeSend&&(!1===m.beforeSend.call(g,w,m)||f))return w.abort();if(T="abort",b.add(m.complete),w.done(m.success),w.fail(m.error),n=Vt(Lt,m,t,w)){if(w.readyState=1,d&&v.trigger("ajaxSend",[w,m]),f)return w;m.async&&m.timeout>0&&(u=i.setTimeout(function(){w.abort("timeout")},m.timeout));try{f=!1,n.send(S,x)}catch(e){if(f)throw e;x(-1,e)}}else x(-1,"No Transport");function x(e,t,r,a){var c,l,p,h,S,_=t;f||(f=!0,u&&i.clearTimeout(u),n=void 0,s=a||"",w.readyState=e>0?4:0,c=e>=200&&e<300||304===e,r&&(h=function(e,t,n){for(var r,i,o,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==c[0]&&c.unshift(o),n[o]}(m,w,r)),h=function(e,t,n,r){var i,o,s,a,c,u={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=u[c+" "+o]||u["* "+o]))for(i in u)if((a=i.split(" "))[1]===o&&(s=u[c+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[i]:!0!==u[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(m,h,w,c),c?(m.ifModified&&((S=w.getResponseHeader("Last-Modified"))&&(E.lastModified[o]=S),(S=w.getResponseHeader("etag"))&&(E.etag[o]=S)),204===e||"HEAD"===m.type?_="nocontent":304===e?_="notmodified":(_=h.state,l=h.data,c=!(p=h.error))):(p=_,!e&&_||(_="error",e<0&&(e=0))),w.status=e,w.statusText=(t||_)+"",c?y.resolveWith(g,[l,_,w]):y.rejectWith(g,[w,_,p]),w.statusCode(C),C=void 0,d&&v.trigger(c?"ajaxSuccess":"ajaxError",[w,m,c?l:p]),b.fireWith(g,[w,_]),d&&(v.trigger("ajaxComplete",[w,m]),--E.active||E.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],function(e,t){E[t]=function(e,n,r,i){return b(n)&&(i=i||r,r=n,n=void 0),E.ajax(E.extend({url:e,type:t,dataType:i,data:n,success:r},E.isPlainObject(e)&&e))}}),E._evalUrl=function(e){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(b(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return b(e)?this.each(function(t){E(this).wrapInner(e.call(this,t))}):this.each(function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b(e);return this.each(function(n){E(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},Gt=E.ajaxSettings.xhr();y.cors=!!Gt&&"withCredentials"in Gt,y.ajax=Gt=!!Gt,E.ajaxTransport(function(e){var t,n;if(y.cors||Gt&&!e.crossDomain)return{send:function(r,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ht[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout(function(){t&&n()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),E.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),E.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=E("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),a.head.appendChild(t[0])},abort:function(){n&&n()}}});var Wt,zt=[],Jt=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||E.expando+"_"+Tt++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",function(e,t,n){var r,o,s,a=!1!==e.jsonp&&(Jt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Jt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||E.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=i[r],i[r]=function(){s=arguments},n.always(function(){void 0===o?E(i).removeProp(r):i[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),s&&b(o)&&o(s[0]),s=o=void 0}),"script"}),y.createHTMLDocument=((Wt=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),E.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,t.head.appendChild(r)):t=a),o=!n&&[],(i=P.exec(e))?[t.createElement(i[1])]:(i=_e([e],t,o),o&&o.length&&E(o).remove(),E.merge([],i.childNodes)));var r,i,o},E.fn.load=function(e,t,n){var i,o,s,a=this,c=e.indexOf(" ");return c>-1&&(i=gt(e.slice(c)),e=e.slice(0,c)),b(t)?(n=t,t=void 0):t&&"object"===r(t)&&(o="POST"),a.length>0&&E.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){s=arguments,a.html(i?E("<div>").append(E.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.expr.pseudos.animated=function(e){return E.grep(E.timers,function(t){return e===t.elem}).length},E.offset={setOffset:function(e,t,n){var r,i,o,s,a,c,u=E.css(e,"position"),l=E(e),f={};"static"===u&&(e.style.position="relative"),a=l.offset(),o=E.css(e,"top"),c=E.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1?(s=(r=l.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(c)||0),b(t)&&(t=t.call(e,n,E.extend({},a))),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+i),"using"in t?t.using.call(e,f):l.css(f)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){E.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===E.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),i.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-E.css(r,"marginTop",!0),left:t.left-i.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||Te})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;E.fn[e]=function(r){return z(this,function(e,r,i){var o;if(C(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),E.each(["top","left"],function(e,t){E.cssHooks[t]=We(y.pixelPosition,function(e,n){if(n)return n=Ge(e,t),Ve.test(n)?E(e).position()[t]+"px":n})}),E.each({Height:"height",Width:"width"},function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){E.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return C(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?E.css(t,n,a):E.style(t,n,i,a)},t,s?i:void 0,s)}})}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){E.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),E.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),E.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),b(e))return r=u.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(u.call(arguments)))}).guid=e.guid=e.guid||E.guid++,i},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=M,E.isFunction=b,E.isWindow=C,E.camelCase=K,E.type=T,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(n=function(){return E}.apply(t,[]))||(e.exports=n);var $t=i.jQuery,Xt=i.$;return E.noConflict=function(e){return i.$===E&&(i.$=Xt),e&&i.jQuery===E&&(i.jQuery=$t),E},o||(i.jQuery=i.$=E),E})}).call(this,n(21)(e))},function(e,t,n){var r=n(4),i=n(2),o=n(3),s=n(91),a=(n(13),n(119)),c=n(14),u=n(5),l=r.Class({STATIC:{MESSAGE_BASE:{bluejay:"1.0"}},config:{callId:null,sockUrl:null,socketId:null,socketioOpts:{reconnectionAttempts:15,reconnectionDelay:2e3,reconnectionDelayMax:2500,timeout:2e3,forceNew:!0}},constructor:function(e){i.bindAll(this),i.extend(this.config,e),i.extend(this,u.Events),this.isConnected=!1,this.WS_STATES=c.WS_STATES},createSocket:function(e){this.socket=s.connect(e.sockUrl,this.config.socketioOpts),this.setupListeners()},setupListeners:function(){this.socket.on("message",this.handleMessage),this.socket.on("connect",this.socketConnected),this.socket.on("error",this.socketError),this.socket.on("disconnect",this.socketDisconnect),this.socket.on("reconnecting",this.socketReconnecting),this.socket.on("reconnect_failed",this.socketReconnectFailed),this.socket.on("reconnect",this.socketReconnect),this.socket.on("connect_error",this.onConnectError)},setupMessageParser:function(e){this.messageParser=new a({callbacks:e})},handleMessage:function(e){o.debug("RTCSignallingManager: Received message on socket: "+e),this.messageParser.parseIncomingMessage(e)},socketConnected:function(){this.isConnected=!0,this.config.socketId=this.socket.id,this.trigger("wsConnectionStateChange",this.WS_STATES.CONNECTED,this.socket.id),o.debug("RTCSignallingManager: Socket connected successfully")},socketError:function(e){this.isConnected=!1,this.trigger("wsConnectionStateChange",this.WS_STATES.DISCONNECTED,this.config.socketId),o.error("RTCSignallingManager: Received 'error' message on socket")},socketDisconnect:function(e){this.isConnected=!1,this.trigger("wsConnectionStateChange",this.WS_STATES.DISCONNECTED,this.config.socketId),"io client disconnect"===e?o.debug("RTCSignallingManager: Socket disconnected, initiated by client: ",e):o.error("RTCSignallingManager: Socket disconnected, not initiated by client: ",e)},socketReconnecting:function(e){this.isConnected=!1,o.debug("RTCSignallingManager: Reconnecting socket, reconnect attempt ",e)},socketReconnectFailed:function(){this.isConnected=!1,this.trigger("wsConnectionStateChange",this.WS_STATES.FAILED,this.config.socketId),o.debug("RTCSignallingManager: Socket reconnection failed")},socketReconnect:function(){o.debug("RTCSignallingManager: Socket reconnected"),this.isConnected=!0,this.config.socketId=this.socket.id,this.trigger("wsConnectionStateChange",this.WS_STATES.RECONNECTED,this.socket.id)},onConnectError:function(e){o.debug("RTCSignallingManager :: connect error : "+e)},sendMsg:function(e){return i.isNull(e.call)||i.isUndefined(e.call)?(o.warn("RTCSignallingManager: Invalid BlueJay message, 'call' field is missing"),!1):e.id?this.isConnected?(this.socket.emit("message",JSON.stringify(e)),o.debug("RTCSignallingManager: Sending socket message: "+JSON.stringify(e)),!0):(o.warn("RTCSignallingManager: Socket is not connected, Message :: "+JSON.stringify(e)),!1):(o.warn("RTCSignallingManager: Invalid BlueJay message, 'id' field is missing"),!1)},close:function(){this.socket?(this.isConnected=!1,this.socket.disconnect(),this.socket=null):o.warn("RTCSignallingManager: Socket has already been closed.")}});e.exports=new l},function(e,t,n){(function(r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(93)).log=function(){return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(12))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(112)).log=function(){return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(12))},function(e,t,n){var r=n(4),i=n(2),o=(n(8),n(5)),s=n(121),a=n(13),c=(n(14),n(3)),u=(n(23),r.Class({config:{requestTimeout:5e3,keepaliveTimeout:1e4,maxRetransmitAttempts:3},STATIC:{METHODS:a.METHODS},constructor:function(){i.bindAll(this),i.extend(this,o.Events),this.model=new s,this.requestTimers={}},onRequest:function(e){var t=this;this.requestTimers[e]=setInterval(function(){t.onRequestTimeout(e)},this.config.requestTimeout)},onBlueJayRequest:function(e){switch(this.model.addRequest(e.id,{method:e.method,message:e,state:"init",retransmitAttempts:0}),e.method){case a.METHODS.MUTE:var t=this.model.getMuteMessage();i.isUndefined(t)||this.removeRequestTransaction(t),this.model.addMuteMessage(e.id);break;case a.METHODS.TOKEN:var n=this.model.getTokenMessage();i.isUndefined(n)||this.removeRequestTransaction(n),this.model.addTokenMessage(e.id)}this.onRequest(e.id)},removeRequestTransaction:function(e){i.isUndefined(this.requestTimers[e])||(clearInterval(this.requestTimers[e]),delete this.requestTimers[e]),this.model.removeRequest(e)},onOutgoingBlueJayResponse:function(e,t){this.model.addResponse(e,{response:t})},onIncomingBlueJayResponse:function(e){var t=this.model.getRequest(e);if(i.isUndefined(t))this.model.get("bluejayKeepAlive").messageId==e&&this.model.addKeepAlive({messageId:e,state:"finished"});else switch(this.removeRequestTransaction(e),t.method){case a.METHODS.CONNECT:this.model.set("connectResponseReceived",!0),this.trigger("receivedConnectResponse");break;case a.METHODS.DISCONNECT:this.trigger("closeSocketConnection")}},lookupOutgoingResponse:function(e){return this.model.getResponse(e)},onKeepaliveRequest:function(e){this.model.addKeepAlive({messageId:e,state:"init"})},getKeepaliveMessageState:function(){return this.model.get("bluejayKeepAlive").state},onRequestTimeout:function(e){var t=this.model.getRequest(e);if(t.method===a.METHODS.DISCONNECT)return this.removeRequestTransaction(e),void this.trigger("closeSocketConnection");if(!i.isUndefined(t))switch(t.state){case"init":case"resend":this.retransmitRequest(t,e)}},retransmitRequest:function(e,t){e.retransmitAttempts>=this.config.maxRetransmitAttempts?(c.warn("RTCTransactionManager: Request timeout occured for - Method :"+e.method+" :: Id - "+t),this.removeRequestTransaction(t),this.trigger("requestTimeout",{messageId:t,method:e.method})):(e.state="resend",e.retransmitAttempts++,this.trigger("retransmitRequest",e.message),this.model.addRequest(t,e))},getRequestMessage:function(e){return this.model.getRequest(e).message},updateCallState:function(e){this.model.set("callState",e)},reset:function(){i.each(this.requestTimers,function(e){clearInterval(e)}),this.model.resetTransaction()}}));e.exports=new u},function(e,t,n){"use strict";var r=n(0),i=n(6).EventEmitter,o=function(){};function s(e,t){o(e),i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){o("finish",e,t),n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";o("close",r),n.emit("close",null,r),n._cleanup()})}r(s,i),s.prototype._chunkHandler=function(e,t){if(o("_chunkHandler",e),200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var i=r.slice(0,n);i&&(o("message",i),this.emit("message",i))}},s.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},s.prototype.abort=function(){o("abort"),this.xo&&(this.xo.close(),o("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=s},function(e,t,n){"use strict";var r=n(0),i=n(74);function o(e,t,n,r){i.call(this,e,t,n,r)}r(o,i),o.enabled=i.enabled&&i.supportsCORS,e.exports=o},function(e,t,n){var r=n(95)("socket.io-parser"),i=n(16),o=n(98),s=n(37),a=n(48);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=f;var u=t.ERROR+'"encode error"';function l(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return u;n+=i}return r("encoded %j as %s",e,n),n}function f(){this.reconstructor=null}function d(e){this.reconPack=e,this.buffers=[]}function p(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){o.removeBlobs(e,function(e){var n=o.deconstructPacket(e),r=l(n.packet),i=n.buffers;i.unshift(r),t(i)})}(e,n):n([l(e)])},i(f.prototype),f.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return p("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var o="";"-"!==e.charAt(++n)&&(o+=e.charAt(n),n!=e.length););if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===e.charAt(n+1))for(i.nsp="";++n;){var a=e.charAt(n);if(","===a)break;if(i.nsp+=a,n===e.length)break}else i.nsp="/";var c=e.charAt(n+1);if(""!==c&&Number(c)==c){for(i.id="";++n;){var a=e.charAt(n);if(null==a||Number(a)!=a){--n;break}if(i.id+=e.charAt(n),n===e.length)break}i.id=Number(i.id)}if(e.charAt(++n)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n)),l=!1!==u&&(i.type===t.ERROR||s(u));if(!l)return p("invalid payload");i.data=u}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new d(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(99),i=n(100),o=n(101);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var f=!0,d=0;d<c;d++)if(u(e,o+d)!==u(t,d)){f=!1;break}if(f)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function b(e,t,n,r){return q(U(t,e.length-n),e,n,r)}function C(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return C(e,t,n,r)}function _(e,t,n,r){return q(V(t),e,n,r)}function T(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,u=e[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=x));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return f(null,e)},c.allocUnsafeSlow=function(e){return f(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?w(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(u[f]!==l[f]){o=u[f],s=l[f];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function j(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,r,o){return o||j(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return o||j(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:U(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(1))},function(e,t,n){var r=n(104);e.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(e){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t,n){var r=n(17),i=n(16);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){"use strict";(function(t){var r=n(126);e.exports=r({window:t.window})}).call(this,n(1))},function(e,t,n){"use strict";(function(t){var r=n(6).EventEmitter,i=n(0),o=n(15),s=n(25),a=n(7),c=function(){};function u(e,t,n){c(e,t);var i=this;r.call(this),setTimeout(function(){i._start(e,t,n)},0)}i(u,r),u.prototype._start=function(e,n,r){c("_start");var i=this,s=new t.XDomainRequest;n=a.addQuery(n,"t="+ +new Date),s.onerror=function(){c("onerror"),i._error()},s.ontimeout=function(){c("ontimeout"),i._error()},s.onprogress=function(){c("progress",s.responseText),i.emit("chunk",200,s.responseText)},s.onload=function(){c("load"),i.emit("finish",200,s.responseText),i._cleanup(!1)},this.xdr=s,this.unloadRef=o.unloadAdd(function(){i._cleanup(!0)});try{this.xdr.open(e,n),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(e){this._error()}},u.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},u.prototype._cleanup=function(e){if(c("cleanup",e),this.xdr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},u.prototype.close=function(){c("close"),this._cleanup(!0)},u.enabled=!(!t.XDomainRequest||!s.hasDomain()),e.exports=u}).call(this,n(1))},function(e,t,n){"use strict";(function(t){var r=n(0),i=n(78),o=n(44);e.exports=function(e){function n(t,n){i.call(this,e.transportName,t,n)}return r(n,i),n.enabled=function(n,r){if(!t.document)return!1;var s=o.extend({},r);return s.sameOrigin=!0,e.enabled(s)&&i.enabled()},n.transportName="iframe-"+e.transportName,n.needBody=!0,n.roundTrips=i.roundTrips+e.roundTrips-1,n.facadeTransport=e,n}}).call(this,n(1))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports={isObject:function(e){var t=r(e);return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,i=arguments.length;r<i;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}}},function(e,t,n){"use strict";function r(e){this.type=e}r.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},r.prototype.stopPropagation=function(){},r.prototype.preventDefault=function(){},r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,e.exports=r},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(89),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(1))},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=n.exec(e||""),a={},c=14;c--;)a[r[c]]=s[c]||"";return-1!=i&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||i(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer,i=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}).call(this,n(38).Buffer)},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(102),o=n(55),s=n(16),a=n(36),c=n(56),u=n(57),l=n(29)("socket.io-client:manager"),f=n(54),d=n(118),p=Object.prototype.hasOwnProperty;function h(e,t){if(!(this instanceof h))return new h(e,t);e&&"object"===r(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=h,h.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},h.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},h.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},s(h.prototype),h.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},h.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},h.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=c(n,"open",function(){r.onopen(),e&&e()}),s=c(n,"error",function(t){if(l("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;l("connect attempt will timeout after %d",a);var u=setTimeout(function(){l("connect attempt timed out after %d",a),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(s),this},h.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",u(this,"ondata"))),this.subs.push(c(e,"ping",u(this,"onping"))),this.subs.push(c(e,"pong",u(this,"onpong"))),this.subs.push(c(e,"error",u(this,"onerror"))),this.subs.push(c(e,"close",u(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",u(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(e){this.decoder.add(e)},h.prototype.ondecoded=function(e){this.emit("packet",e)},h.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},h.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new o(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",i),n.on("connect",function(){n.id=r.generateId(e)}),this.autoConnect&&i()}function i(){~f(r.connecting,n)||r.connecting.push(n)}return n},h.prototype.destroy=function(e){var t=f(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},h.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},h.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},h.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(39),i=n(105),o=n(114),s=n(115);t.polling=function(e){var t=!1,n=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,n=e.secure!==a}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!s)throw new Error("JSONP disabled");return new o(e)},t.websocket=s},function(e,t,n){var r=n(40),i=n(30),o=n(17),s=n(31),a=n(53),c=n(32)("engine.io-client:polling");e.exports=l;var u=null!=new(n(39))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),r.call(this,e)}s(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){c("pre-pause polling complete"),--r||n()})),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",function(){c("pre-pause writing complete"),--r||n()}))}else n()},l.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;c("polling got data %s",e);o.decodePayload(e,this.socket.binaryType,function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(37),o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(n){if(!n||"object"!==r(n))return!1;if(i(n)){for(var o=0,c=n.length;o<c;o++)if(e(n[o]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||s&&n instanceof Blob||a&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)&&e(n[u]))return!0;return!1}}).call(this,n(38).Buffer)},function(e,t,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,c=0;function u(e){var t="";do{t=i[e%o]+t,e=Math.floor(e/o)}while(e>0);return t}function l(){var e=u(+new Date);return e!==r?(a=0,r=e):e+"."+u(a++)}for(;c<o;c++)s[i[c]]=c;l.encode=u,l.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*o+s[e.charAt(c)];return t},e.exports=l},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(36),o=n(16),s=n(117),a=n(56),c=n(57),u=n(29)("socket.io-client:socket"),l=n(30),f=n(52);e.exports=h;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;function h(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",c(this,"onopen")),a(e,"packet",c(this,"onpacket")),a(e,"close",c(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},h.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},h.prototype.emit=function(e){if(d.hasOwnProperty(e))return p.apply(this,arguments),this;var t=s(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:f(t))?i.BINARY_EVENT:i.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},h.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},h.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"===r(this.query)?l.encode(this.query):this.query;u("sending connect packet with query %s",e),this.packet({type:i.CONNECT,query:e})}else this.packet({type:i.CONNECT})},h.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},h.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===i.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},h.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},h.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);u("sending ack %j",r),t.packet({type:f(r)?i.BINARY_ACK:i.ACK,id:e,data:r})}}},h.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(e){return this.flags.compress=e,this},h.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){var r=n(2);function i(e,t){if(!e)throw t||"Assertion failed"}var o=function(e,t){return{call:function(n,r){void 0!==e.from&&e.from!==n||void 0!==e.to&&e.to!==r||t({from:n,to:r})}}},s={transition:function(e){return function(t,n){var i=Array.isArray(e)?r.find(e,function(e){return e.from==t.getState()}):e;if(i&&void 0!==i.from&&(t.getState()==i.from||r.include(i.from,t.getState())))return n(t.getState(),i.to,i.resetTriggers),!0}},afterTransition:function(e,t){return r.extend(o(e,t),{beforeTransition:!1})},beforeTransition:function(e,t){return r.extend(o(e,t),{beforeTransition:!0})}},a={anyOf:function(e){return{isFulfilled:function(e){return!r.isEmpty(this.matchingTriggers(e))},matchingTriggers:function(t){return r.intersection(e,t)}}},allOf:function(e){return{isFulfilled:function(e){return r.isEmpty(r.difference(this.matchingTriggers(e),e))},matchingTriggers:function(){return e}}}};e.exports={create:function(e){i(void 0!==e.initial,"initial state is mandatory");var t={};t.events=e.events,t.triggers=e.triggers,t.callbacks=e.callbacks;var n={state:e.initial,activatedTriggers:[]};function o(e,t,n){e&&r.each(e,function(e){e.call(t,n)})}var s=function(e,i,s){var a=r.groupBy(t.callbacks,function(e){return!0===e.beforeTransition}),c=a[!0];c&&o(c,e,i),n.state=i;var u=a[!1];u&&o(u,e,i),!0===s&&(n.activatedTriggers=[])};return t.getState=function(){return n.state},r.each(r.keys(t.events),function(n){var r=e.events[n];i(void 0!==r),t[n]=function(){return r(t,s)}}),t.trigger=function(e){n.activatedTriggers.push(e),r.each(t.triggers,function(e){if(e.activatedBy.isFulfilled(n.activatedTriggers)&&t[e.event]()){var i=e.activatedBy.matchingTriggers(n.activatedTriggers);n.activatedTriggers=r.difference(n.activatedTriggers,i)}})},t},transitions:s,triggers:a}},function(e,t,n){var r,i=n(60);"undefined"!=typeof window&&(r=window.AudioContext||window.webkitAudioContext);var o=null;e.exports=function(e,t){var n=new i;if(!r)return n;var s,a,c,u=(t=t||{}).smoothing||.1,l=t.interval||50,f=t.threshold,d=t.play,p=t.history||10,h=!0;o=t.audioContext||o||new r,(c=o.createAnalyser()).fftSize=512,c.smoothingTimeConstant=u,a=new Float32Array(c.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(s=o.createMediaElementSource(e),void 0===d&&(d=!0),f=f||-50):(s=o.createMediaStreamSource(e),f=f||-50),s.connect(c),d&&c.connect(o.destination),n.speaking=!1,n.suspend=function(){return o.suspend()},n.resume=function(){return o.resume()},Object.defineProperty(n,"state",{get:function(){return o.state}}),o.onstatechange=function(){n.emit("state_change",o.state)},n.setThreshold=function(e){f=e},n.setInterval=function(e){l=e},n.stop=function(){h=!1,n.emit("volume_change",-100,f),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking")),c.disconnect(),s.disconnect()},n.speakingHistory=[];for(var m=0;m<p;m++)n.speakingHistory.push(0);return function e(){setTimeout(function(){if(h){var t=function(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var r=4,i=t.length;r<i;r++)t[r]>n&&t[r]<0&&(n=t[r]);return n}(c,a);n.emit("volume_change",t,f);var r=0;if(t>f&&!n.speaking){for(var i=n.speakingHistory.length-3;i<n.speakingHistory.length;i++)r+=n.speakingHistory[i];r>=2&&(n.speaking=!0,n.emit("speaking"))}else if(t<f&&n.speaking){for(i=0;i<n.speakingHistory.length;i++)r+=n.speakingHistory[i];0==r&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(t>f)),e()}},l)}(),n}},function(e,t){function n(){}e.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return o._groupName=i,(this.callbacks[e]=this.callbacks[e]||[]).push(o),this},t.once=function(e,t,n){var r=this,i=3===arguments.length,o=i?arguments[1]:void 0,s=i?arguments[2]:arguments[1];return this.on(e,o,function t(){r.off(e,t),s.apply(this,arguments)}),this},t.releaseGroup=function(e){var t,n,r,i;for(t in this.callbacks=this.callbacks||{},this.callbacks)for(n=0,r=(i=this.callbacks[t]).length;n<r;n++)i[n]._groupName===e&&(i.splice(n,1),n--,r--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,r=this.callbacks[e];return r?1===arguments.length?(delete this.callbacks[e],this):(n=r.indexOf(t),r.splice(n,1),0===r.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,r,i=[].slice.call(arguments,1),o=this.callbacks[e],s=this.getWildcardCallbacks(e);if(o)for(t=0,n=(r=o.slice()).length;t<n&&r[t];++t)r[t].apply(this,i);if(s)for(n=s.length,t=0,n=(r=s.slice()).length;t<n&&r[t];++t)r[t].apply(this,[e].concat(i));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,r=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(r=r.concat(this.callbacks[t]));return r}},n.mixin(n)},function(e,t,n){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},n.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},n.getIceParameters=function(e,t){var r=n.splitLines(e);return{usernameFragment:(r=r.concat(n.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],s=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=n.parseRtpMap(s),c=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?n.parseFmtp(c[0]):{},a.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){r+=n.writeExtmap(e)}),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=a.length>0&&a[0].ssrc,u=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(n.rtx={ssrc:t}),r.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(n))}}),0===r.length&&c&&r.push({ssrc:c});var l=n.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(e){e.maxBitrate=l})),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var i=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var i=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,r){var i=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},"object"===t(e)&&(e.exports=n)}).call(this,n(21)(e))},function(e,t,n){"use strict";function r(e,t,n){var r=e.split("\r\n"),i=d(r,"m=",n);if(null===i)return e;var o=p(r,i+1,-1,"m=");null===o&&(o=r.length);var s=p(r,i+1,o,"c=");if(null===s)return e;var a=p(r,s+1,o,"b=AS");a&&r.splice(a,1);var c="b=AS:"+t;return r.splice(s+1,0,c),e=r.join("\r\n")}function i(e,t){e=e.split(" ");for(var n=0;n<e.length;++n)e[n]===t.toString()&&e.splice(n,1);return e.join(" ")}function o(e,t){var n=d(e,"a=rtpmap",t.toString());if(null===n)return e;e.splice(n,1);var r=d(e,"m=","video");return null===r?e:(e[r]=i(e[r],t),e)}function s(e,t,n,r){if(!r)return e;var i=e.split("\r\n"),o=d(i,"m=",t);if(null===o)return e;var s=h(i,r);return s&&(i[o]=g(i[o],s)),e=i.join("\r\n")}function a(e,t,n,r){var i=e.split("\r\n"),o=f(i,t),s={};if(null===o){var a=d(i,"a=rtpmap",t);if(null===a)return e;var c=m(i[a]);s.pt=c.toString(),s.params={},s.params[n]=r,i.splice(a+1,0,l(s))}else(s=u(i[o])).params[n]=r,i[o]=l(s);return e=i.join("\r\n")}function c(e,t,n){var r=e.split("\r\n"),i=f(r,t);if(null===i)return e;var o=u(r[i]);delete o.params[n];var s=l(o);return null===s?r.splice(i,1):r[i]=s,e=r.join("\r\n")}function u(e){var t={},n=e.indexOf(" "),r=e.substring(n+1).split("; "),i=new RegExp("a=fmtp:(\\d+)"),o=e.match(i);if(!o||2!==o.length)return null;t.pt=o[1];for(var s={},a=0;a<r.length;++a){var c=r[a].split("=");2===c.length&&(s[c[0]]=c[1])}return t.params=s,t}function l(e){if(!e.hasOwnProperty("pt")||!e.hasOwnProperty("params"))return null;var t=e.pt,n=e.params,r=[],i=0;for(var o in n)r[i]=o+"="+n[o],++i;return 0===i?null:"a=fmtp:"+t.toString()+" "+r.join("; ")}function f(e,t){var n=h(e,t);return n?d(e,"a=fmtp:"+n.toString()):null}function d(e,t,n){return p(e,0,-1,t,n)}function p(e,t,n,r,i){for(var o=-1!==n?n:e.length,s=t;s<o;++s)if(0===e[s].indexOf(r)&&(!i||-1!==e[s].toLowerCase().indexOf(i.toLowerCase())))return s;return null}function h(e,t){var n=d(e,"a=rtpmap",t);return n?m(e[n]):null}function m(e){var t=new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+"),n=e.match(t);return n&&2===n.length?n[1]:null}function g(e,t){var n=e.split(" "),r=n.slice(0,3);r.push(t);for(var i=3;i<n.length;i++)n[i]!==t&&r.push(n[i]);return r.join(" ")}var v={setDefaultCodec:g,setCodecParam:a,maybeSetOpusOptions:function(e,t){return"true"===t.opusStereo?e=a(e,"opus/48000","stereo","1"):"false"===t.opusStereo&&(e=c(e,"opus/48000","stereo")),"true"===t.opusFec?e=a(e,"opus/48000","useinbandfec","1"):"false"===t.opusFec&&(e=c(e,"opus/48000","useinbandfec")),"true"===t.opusDtx?e=a(e,"opus/48000","usedtx","1"):"false"===t.opusDtx&&(e=c(e,"opus/48000","usedtx")),t.opusMaxPbr&&(e=a(e,"opus/48000","maxplaybackrate",t.opusMaxPbr)),e},maybePreferCodec:s,maybePreferVideoReceiveCodec:function(e,t){return s(e,"video",0,t.videoRecvCodec)},maybePreferVideoSendCodec:function(e,t){return s(e,"video",0,t.videoSendCodec)},maybePreferAudioReceiveCodec:function(e,t){return s(e,"audio",0,t.audioRecvCodec)},maybePreferAudioSendCodec:function(e,t){return s(e,"audio",0,t.audioSendCodec)},maybeSetVideoReceiveBitRate:function(e,t){return t.videoRecvBitrate?(t.videoRecvBitrate,r(e,t.videoRecvBitrate,"video")):e},maybeSetVideoSendBitRate:function(e,t){return t.videoSendBitrate?(t.videoSendBitrate,r(e,t.videoSendBitrate,"video")):e},maybeSetAudioReceiveBitRate:function(e,t){return t.audioRecvBitrate?(t.audioRecvBitrate,r(e,t.audioRecvBitrate,"audio")):e},maybeSetAudioSendBitRate:function(e,t){return t.audioSendBitrate?(t.audioSendBitrate,r(e,t.audioSendBitrate,"audio")):e},maybeSetVideoSendInitialBitRate:function(e,t){var n=t.videoSendInitialBitrate;if(!n)return e;var r=n,i=t.videoSendBitrate;if(i&&(n>i&&(n=i,t.videoSendInitialBitrate=n),r=i),null===d(e.split("\r\n"),"m=","video"))return e;var o=t.videoRecvCodec;return e=a(e,o,"x-google-min-bitrate",t.videoSendInitialBitrate.toString()),e=a(e,o,"x-google-max-bitrate",r.toString())},maybeSetTrickleIceAttr:function(e){var t=e.split("\r\n"),n=d;return null===(n=d(t,"m="))?e:p(t,0,n,"a=ice-options","trickle")?e:(t.splice(n-1,0,"a=ice-options:trickle"),e=t.join("\r\n"))},maybeRemoveVideoFec:function(e,t){if("false"!==t.videoFec)return e;var n=e.split("\r\n"),r=d(n,"a=rtpmap","red");if(null===r)return e;var s=m(n[r]);if(n=function(e,t){var n=d(e,"a=rtpmap",t);if(null===n)return e;var r=m(e[n]);e.splice(n,1);var o=d(e,"m=","video");return null===o?e:(e[o]=i(e[o],r),e)}(n=o(n,s),"ulpfec"),null===(r=d(n,"a=fmtp",s.toString())))return e;var a=u(n[r]).pt;return null===a?e:(n.splice(r,1),(n=o(n,a)).join("\r\n"))},maybeReplaceVideoPortNumber:function(e,t){var n=e.split("\r\n"),r=d(n,"m=","video 0");return null===r?n.join("\r\n"):(n[r]=function(e,t){return(e=e.split(" "))[1]=t,e.join(" ")}(n[r],t),n.join("\r\n"))},maybeRemoveCodecFromSDP:function(e,t){var n=e.split("\r\n"),r=d(n,"m=video");if(null===r)return e;if(-1==n[r].search(t))return e;n[r]=n[r].replace(" "+t,"");var i=d(n,"a=rtpmap:"+t);i&&n.splice(i,1);var o=d(n,"a=fmtp:"+t);return o&&n.splice(o,1),e=n.join("\r\n")}};e.exports=v},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},function(e,t,n){var r=n(2),i=n(27),o=n(4),s=n(8),a=(n(5),n(3)),c=n(13),u=n(14),l=n(18),f=n(22),d=n(151),p=n(28),h=n(33),m=n(23),g=n(9),v=o.Class({config:{chromeMediaConstraints:{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:1920,maxHeight:1080},optional:[{maxFrameRate:5},{minFrameRate:5},{googTemporalLayeredScreencast:!0}]}},ffMediaConstraints:{audio:!1,video:{mediaSource:"screen",width:{max:"1920"},height:{max:"1080"},frameRate:{exact:"5"}}}},installationCompletedRetries:0,maxInstallationCompletedRetries:5,constructor:function(e){r.bindAll(this),this.isFirefox="firefox"===g.browser,this.model=new d,this.model.on("change:extensionStatus",this.onExtensionStatusChanged),this.model.on("change:tokenStatus",this.onTokenStatusChange)},setParams:function(e){this.model.set("extensionId",e.extensionId),this.config.features=e.features,this.config.extensionID=e.extensionId,this.screenSharingExtensionUrl="https://chrome.google.com/webstore/detail/"+e.extensionId},onExtensionStatusChanged:function(){var e=this.model.get("extensionStatus"),t=u.EXTENSION_STATES;switch(a.debug("RTCScreenSharingManager: Extension status changed to: ",e),e){case t.NOT_INSTALLED:case t.INSTALLING:break;case t.INSTALLED:this.doScreenSharing&&(a.debug("RTCScreenSharingManager: Screen sharing is on, sending msg to extension to get desktop media source ID"),this.getDesktopMediaSourceId());break;case t.IFRAME_INSTALL_FAILED:case t.INSTALL_FAILED:this.model.set("screenShareState",l.SCREEN_SHARING_STATES.INSTALL_EXTENSION_FAILED);break;case t.INSTALL_CANCELLED:case t.REQUEST_FAILED:}},startScreenSharing:function(e){var t=this.model.isExtensionInstalled(),n=e||{};this.isFirefox?(this.initFFScreenSharing(),this.doScreenSharing=!0):(this.doScreenSharing=!0,this.installationCompletedRetries=0,this.model.set("extensionStatus",u.EXTENSION_STATES.NOT_INSTALLED),t||n.skipInlineInstallation?(a.debug('RTCScreenSharingManager: Content Scripts have been injected, "ping" extension to check if extension is not uninstalled'),this.pingAndStartSharing()):(a.warn("RTCScreenSharingManager: Content Scripts have not been injected, extension has not been installed"),"chrome"===g.browser?this.triggerInlineInstallation():"opera"===g.browser&&this.triggerOperaAddOnInlineInstallation(e)))},stopScreenSharing:function(){this.doScreenSharing=!1;var e=this.model.get("localContentStream");e?(a.debug("RTCScreenSharingManager: Stopping screen sharing now"),e.getTracks().forEach(function(e){e.stop()}),this.isFirefox&&this.reset()):(a.debug("RTCScreenSharingManager: Screen sharing has already been stopped"),this.reset())},triggerInlineInstallation:function(){var e=this;try{i("head").append('<link rel="chrome-webstore-item" href='+this.screenSharingExtensionUrl+">"),window.chrome.webstore.install(this.screenSharingExtensionUrl,function(t){a.debug("RTCScreenSharingManager: Chrome inline installation was successful."),e.model.set("extensionStatus",u.EXTENSION_STATES.INSTALLING),e.pingAndStartSharing()},function(t){e.handleInstallationFailure(t)})}catch(t){e.handleInstallationFailure(t)}},triggerOperaAddOnInlineInstallation:function(e){var t=this;try{opr.addons.installExtension(t.config.extensionID,function(e){a.debug("RTCScreenSharingManager: Opera inline installation was successful."),t.model.set("extensionStatus",u.EXTENSION_STATES.INSTALLING),t.pingAndStartSharing()},function(e){t.handleInstallationFailure(e)})}catch(e){t.handleInstallationFailure(e)}},handleInstallationFailure:function(e){var t,n=u.EXTENSION_STATES;switch(a.error("RTCScreenSharingManager: Inline installation of Chrome extension failed: "+e),e){case"User cancelled install":t=n.INSTALL_CANCELLED;break;case"Chrome Web Store installations can only be started by the top frame.":t=n.IFRAME_INSTALL_FAILED;break;case"Installs can only be initiated by one of the Chrome Web Store item's verified sites.":t=n.INSTALL_FAILED_DOMAIN_UNVERIFIED;break;default:t=n.INSTALL_FAILED}this.model.set("extensionStatus",t)},pingAndStartSharing:function(){var e=this;this.installationCompletedRetries<this.maxInstallationCompletedRetries?window.setTimeout(function(){e.installationCompletedRetries++,a.debug('RTCScreenSharingManager: Sending "ping" to extension. Attempt no. ',e.installationCompletedRetries),e.pingExtension(function(t){e.installationCompletedRetries=0,e.onPingSuccess(t)},function(t){"emptyResponse"===t?e.pingAndStartSharing():e.model.set("extensionStatus",u.EXTENSION_STATES.REQUEST_FAILED)})},500):this.model.set("extensionStatus",u.EXTENSION_STATES.INSTALL_FAILED)},pingExtension:function(e,t){this.sendMessageToExtension({type:"ping"}).then(e,t)},onPingSuccess:function(e){"pong"===e.type&&this.doScreenSharing&&(this.model.set("extensionStatus",u.EXTENSION_STATES.INSTALLED,{silent:!0}),this.model.trigger("change:extensionStatus",this.model))},getDesktopMediaSourceId:function(){var e=s.defer(),t=this;return this.model.set("tokenStatus",c.TOKEN_STATUS.WAITING),this.sendMessageToExtension({type:"getScreen",options:this.config.features.applicationSharing?["screen","window"]:["screen"]}).then(function(e){switch(e.type){case"gotScreenSharing":t.model.set("chromeMediaSourceId",e.sourceId),t.requestToken();break;case"canceledGetScreen":t.model.set("tokenStatus",c.TOKEN_STATUS.CANCELLED);break;default:a.error('RTCScreenSharingManager: Unhandled message type for "getScreen" API'),t.model.set("tokenStatus",c.TOKEN_STATUS.CANCELLED)}},function(e){}),e.promise},sendMessageToExtension:function(e){var t=s.defer(),n=r.extend({targetModule:"RTCDesktopMedia"},e);try{window.chrome.runtime.sendMessage(this.model.get("extensionId"),n,r.bind(function(e){a.debug("RTCScreenSharingManager: Response from extension: "+JSON.stringify(e)),r.isUndefined(e)?t.reject("emptyResponse"):t.resolve(e)},this))}catch(e){a.error("RTCScreenSharingManager: Exception occured while sending message to Extension: ",e),t.reject("error")}return t.promise},initFFScreenSharing:function(){this.model.set("tokenStatus",c.TOKEN_STATUS.WAITING),this.getDesktopMediaStream()},getDesktopMediaStream:function(){var e=this.config.features.applicationSharing?"application":"screen";this.config.ffMediaConstraints.video.mediaSource=e;var t=this.isFirefox?this.config.ffMediaConstraints:f.deepMergeObjects(this.config.chromeMediaConstraints,{video:{mandatory:{chromeMediaSourceId:this.model.get("chromeMediaSourceId")}}});window.navigator.getUserMedia(t,this.getDesktopMediaSuccess,this.getDesktopMediaError)},getDesktopMediaSuccess:function(e){a.debug("RTCScreenSharingManager: Local Content has been acquired"),this.isFirefox&&this.requestToken(),e.bjn_label="content_stream",e.getVideoTracks()[0].onended=r.bind(function(){a.debug("RTCScreenSharingManager: Local Content Stream has ended."),this.reset(),this.isFirefox||this.sendMessageToExtension({type:"focusTab"})},this),this.model.set("localContentStream",e)},getDesktopMediaError:function(e){a.error("Failed to get desktop media stream, error: ",e);var t=!1;this.model.get("tokenStatus")===c.TOKEN_STATUS.CANCELLED&&(t=!0),this.model.set("tokenStatus",c.TOKEN_STATUS.CANCELLED),t&&this.model.trigger("change:firefoxScreenShareCancelled",this.model),this.stopScreenSharing()},requestToken:function(){var e=c.requestTokenMsg();p.sendMsg(e),m.getCurrentCallState()!==u.BJ_CALLSTATES.IDLE&&h.onBlueJayRequest(e)},releaseToken:function(){var e=c.releaseTokenMsg();p.sendMsg(e),h.onBlueJayRequest(e),this.model.set("tokenStatus",c.TOKEN_STATUS.RELEASED)},handleTokenMessage:function(e){var t=e.params.type;switch(t){case c.TOKEN_TYPES.STATUS:this.model.set("tokenStatus",e.params.status);break;case c.TOKEN_TYPES.TOKENINDICATION:case c.TOKEN_TYPES.CONTENTINDICATION:this.model.set("presentationToken",e.params);break;default:a.error("RTCScreenSharingManager: Invalid type passed in token msg: ",t)}},onTokenStatusChange:function(e){switch(e.get("tokenStatus")){case c.TOKEN_STATUS.GRANTED:this.doScreenSharing?this.isFirefox||this.getDesktopMediaStream():(a.info("RTCScreenSharingManager: Screen sharing was cancelled while acquiring token"),this.releaseToken());break;case c.TOKEN_STATUS.REVOKED:a.debug("RTCScreenSharingManager: Token has been 'revoked', must have been hijacked!"),this.stopScreenSharing()}},sendPresentaionRatio:function(e){var t={type:"presentationratio",ratio:{content:e.content,video:e.video}},n=c.getInfoMsg(t);p.sendMsg(n),h.onBlueJayRequest(n)},reset:function(){this.doScreenSharing=!1;this.model.get("tokenStatus");this.releaseToken(),this.model.set(d.defaults)},close:function(){this.stopScreenSharing()}});e.exports=new v},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";var r=n(3),i=n(68);e.exports={sipDialout:function(e,t){var n=JSON.stringify({uri:e.sipUrl}),o=new XMLHttpRequest;o||(r.debug("sipDialout: XMLHttpRequest is not supported"),t("sipDialout: XMLHttpRequest is not supported")),o.timeout=15e3,o.addEventListener("readystatechange",function(){if(4===this.readyState)if(200===this.status)r.debug("MeetingApis: sipDialout Response = "+this.responseText),t(null,this.responseText);else{var e=this.status||408;console.error("MeetingApis: sipDialout Response error ",e),t(e)}}),o.addEventListener("error",function(e){console.error("MeetingApis: sipDialout Response error ",this.err),t(this.err)}),o.addEventListener("abort",function(e){console.error("MeetingApis: sipDialout Response aborted ",this.err),t(this.err)}),o.ontimeout=function(e){r.debug("MeetingApis: sipDialout XMLHttpRequest timeout"),t("XMLHttpRequest timeout")},r.debug("MeetingApis: sipDialout  Request Body = "+n);var s=i.environment.hostname+"/seamapi/v1/user/"+e.oauthInfo.scope.meeting.leaderId+"/live_meetings/"+e.oauthInfo.scope.meeting.meetingNumericId+"/dialout/pstn?access_token="+encodeURIComponent(e.oauthInfo.access_token);r.debug("postRequestUrl = ",s),o.open("POST",s,!0),o.setRequestHeader("X-Foo","header to trigger preflight"),o.setRequestHeader("Content-Type","application/json"),o.send(n)},post:function(e,t){var n=i.environment.hostname+e.url,o=JSON.stringify(e.body);r.debug("POST: Request Url = "+n),r.debug("POST: Request Body = ",o);var s=new XMLHttpRequest;s||(r.debug("POST: XMLHttpRequest is not supported"),t("POST: XMLHttpRequest is not supported")),s.timeout=15e3,s.addEventListener("readystatechange",function(){if(4===this.readyState)if(200===this.status||201===this.status)r.debug("POST: Response success = "+this.responseText),t(null,this.responseText);else{var e=this.status||408;console.error("POST: Response error = ",e),t({status:e})}}),s.addEventListener("error",function(e){r.debug("POST: onError = ",e),t(e)}),s.addEventListener("abort",function(e){r.debug("POST: onAbort = ",e),t(e)}),s.ontimeout=function(){r.debug("POST: onTimeout"),t({status:408,error:"POST timeout"})},s.open("POST",n,!0),s.setRequestHeader("X-Foo","header to trigger preflight"),s.setRequestHeader("Content-Type","application/json"),s.send(o)}}},function(e,t,n){"use strict";e.exports={environment:{hostname:"https://bluejeans.com",cert:{key:"",certificate:""}},user:{name:"BJNClient"},events:["meeting","endpoint","chat"]}},function(e,t,n){var r=n(5),i=n(2),o=n(70),s=r.Collection.extend({model:o,initialize:function(){r.Collection.prototype.initialize.apply(this),i.bindAll(this,"getExistingForRaw"),this.callGuidMap={},this.chatGuidMap={}},comparator:function(e){var t=3;return t=e.get("isLeader")?1:t,(t=e.get("isSelf")?0:t)+(e.get("name")?e.get("name").toLowerCase():"aaa")},sync:function(e,t,n){t.trigger("fetch",e,n)},getExistingForRaw:function(e){return this.get(this.model.getId(e))},getEnteredLength:function(){return this.filter(function(e){return e.isEntered()}).length}});e.exports=s},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(5),o=n(2),s=n(158),a=i.Model.extend({defaults:{isPinned:!1,unreadMessages:0,isOpenedChat:!1},collectionProps:{connections:s.Collection},sync:function(e,t,n){},destroy:function(e){i.Model.prototype.destroy.call(this,e)},set:function(e,t,n){var s,a=this,c=function(e){return o.object(o.map(e,function(e,t){if(!a.collectionProps[t])return[t,e];if(e instanceof i.Collection)return[t,e];var n=a.get(t);return n.set(e),[t,n]}))};"object"===r(e)?(this._collectionsInitialized||(i.Model.prototype.set.call(a,o.object(o.map(a.collectionProps,function(e,t){return[t,new e]})),n),this._collectionsInitialized=!0),n=t,s=c(e),i.Model.prototype.set.call(a,s,n)):void 0!==(s=c(o.object([e],[t])))[e]&&i.Model.prototype.set.call(a,e,t,n)},isEntered:function(){return!o.any(this.get("connections").toJSON(),function(e){return"Skinny"==e.endpoint})||o.any(this.get("connections").toJSON(),function(e){return e.capabilities.length>0})}},{translationMatrixShort:function(e,t){return{dataObject:e,chatEndpointGuid:e.ch,callguid:e.c,id:e.E1,name:e.n,type:e.t||"endpoint",callQuality:parseInt(e.C1,10),isLeader:1==e.L1,isSelf:t&&e.E1==t.id,endpointType:e.e,isSpeaking:"1"==e.T,isPresenting:"1"==e.C2,isSecure:"Freeswitch"==e.e||"Phone"==e.e||"PartnerParticipant"==e.e||"1"==e.S1,isPhone:"Phone"==e.e||"PartnerParticipant"==e.e,meetingId:e.m,isVisible:!e.v||"1"==e.v,isChatOnly:"SkinnyChat"==e.e,inWaitingRoom:!e.L2||"1"==e.L2,isPresentationLayout:"2"==e.L2,isVideoLayout:"4"==e.L2,currentLayout:e.S2,isCurrentlyShowingVideo:"1"==e.V1,isSendingVideo:"1"!=e.V2,isServerMutingVideo:"1"==e.V3,isVideoSeen:"1"!=e.V2&&"1"!=e.V3,isCurrentlyShowingAudio:"1"==e.A1,isSendingAudio:"1"!=e.A2,isServerMutingAudio:"1"==e.A3,isAudioHeard:"1"!=e.A2&&"1"!=e.A3,alerts:e.a?e.a.split(","):void 0,audioRecvCodec:void 0!==e.A4&&""!==e.A4?e.A4:null,audioSendCodec:void 0!==e.A5&&""!==e.A5?e.A5:null,videoRecvCodec:void 0!==e.V4&&""!==e.V4?e.V4:null,videoRecvHeight:e.V5&&""!==e.V5?parseInt(e.V5,10):null,videoRecvWidth:e.V6&&""!==e.V6?parseInt(e.V6,10):null,videoSendCodec:void 0!==e.V7&&""!==e.V7?e.V7:null,videoSendHeight:e.V8&&""!==e.V8?parseInt(e.V8,10):null,videoSendWidth:e.V9&&""!==e.V9?parseInt(e.V9,10):null,contentRecvHeight:e.C3&&""!==e.C3?parseInt(e.C3,10):null,contentRecvWidth:e.C4&&""!==e.C4?parseInt(e.C4,10):null,videoShareRecvHeight:e.VideoShareRecvHeight&&""!==e.VideoShareRecvHeight?parseInt(e.VideoShareRecvHeight,10):null,videoShareRecvWidth:e.VideoShareRecvWidth&&""!==e.VideoShareRecvWidth?parseInt(e.VideoShareRecvWidth,10):null,pinnedGuid:e.P1,connections:e.C5?o.map(e.C5,function(e){return s.translationMatrix(e)}):null,rdcControllee:void 0!==e.r&&"None"!==e.r?e.r:null,rdcVersion:e.R1,isRdcControllerCapable:"1"==e.R2,isRdcControlleeCapable:"1"==e.R3}},translateAttributes:function(e,t){var n=t&&t.get("dataObject")?t.get("dataObject"):{},r=o.extend(n,e);return t&&t.get("id")&&(r.id=t.get("id")),this.translationMatrixShort(r,t)},getId:function(e){return e.E1}});e.exports=a},function(e,t,n){"use strict";(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(166),o=n(167),s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function l(e){var n,i=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},o={},s=r(e=e||i);if("blob:"===e.protocol)o=new d(unescape(e.pathname),{});else if("string"===s)for(n in o=new d(e,{}),u)delete o[n];else if("object"===s){for(n in e)n in u||(o[n]=e[n]);void 0===o.slashes&&(o.slashes=a.test(e.href))}return o}function f(e){var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function d(e,t,n){if(!(this instanceof d))return new d(e,t,n);var s,a,u,p,h,m,g=c.slice(),v=r(t),y=this,b=0;for("object"!==v&&"string"!==v&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),t=l(t),s=!(a=f(e||"")).protocol&&!a.slashes,y.slashes=a.slashes||s&&t.slashes,y.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(g[3]=[/(.*)/,"pathname"]);b<g.length;b++)"function"!=typeof(p=g[b])?(u=p[0],m=p[1],u!=u?y[m]=e:"string"==typeof u?~(h=e.indexOf(u))&&("number"==typeof p[2]?(y[m]=e.slice(0,h),e=e.slice(h+p[2])):(y[m]=e.slice(h),e=e.slice(0,h))):(h=u.exec(e))&&(y[m]=h[1],e=e.slice(0,h.index)),y[m]=y[m]||s&&p[3]&&t[m]||"",p[4]&&(y[m]=y[m].toLowerCase())):e=p(e);n&&(y.query=n(y.query)),s&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(y.pathname,t.pathname)),i(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(p=y.auth.split(":"),y.username=p[0]||"",y.password=p[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}d.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||o.parse)(t)),r[e]=t;break;case"port":r[e]=t,i(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";r[e]=t.charAt(0)!==s?s+t:t}else r[e]=t;break;default:r[e]=t}for(var a=0;a<c.length;a++){var u=c[a];u[4]&&(r[u[1]]=r[u[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var s=i+(n.slashes?"//":"");return n.username&&(s+=n.username,n.password&&(s+=":"+n.password),s+="@"),s+=n.host+n.pathname,(t="object"===r(n.query)?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},d.extractProtocol=f,d.location=l,d.qs=o,e.exports=d}).call(this,n(1))},function(e,t,n){"use strict";function r(){this._listeners={}}r.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},r.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},r.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],i=0;i<r.length;i++)r[i].apply(this,n)},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(170),s=n(171),a=function(){};function c(e,t,n,r,c){var u=i.addPath(e,t);a(u);var l=this;o.call(this,e,n),this.poll=new s(r,u,c),this.poll.on("message",function(e){a("poll message",e),l.emit("message",e)}),this.poll.once("close",function(e,t){a("poll close",e,t),l.poll=null,l.emit("close",e,t),l.close()})}r(c,o),c.prototype.close=function(){o.prototype.close.call(this),a("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=c},function(e,t,n){"use strict";(function(t){var r=n(6).EventEmitter,i=n(0),o=n(15),s=n(7),a=t.XMLHttpRequest,c=function(){};function u(e,t,n,i){c(e,t);var o=this;r.call(this),setTimeout(function(){o._start(e,t,n,i)},0)}i(u,r),u.prototype._start=function(e,t,n,r){var i=this;try{this.xhr=new a}catch(e){}if(!this.xhr)return c("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=s.addQuery(t,"t="+ +new Date),this.unloadRef=o.unloadAdd(function(){c("unload cleanup"),i._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){c("xhr timeout"),i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return c("exception",e),this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!u.supportsCORS||(c("withCredentials"),this.xhr.withCredentials=!0),r&&r.headers)for(var l in r.headers)this.xhr.setRequestHeader(l,r.headers[l]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(c("readyState",n.readyState),n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}c("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(c("chunk"),i.emit("chunk",t,e));break;case 4:t=n.status,c("status",t),1223===t&&(t=204),12005!==t&&12029!==t||(t=0),c("finish",t,n.responseText),i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},u.prototype._cleanup=function(e){if(c("cleanup"),this.xhr){if(this.removeAllListeners(),o.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},u.prototype.close=function(){c("close"),this._cleanup(!0)},u.enabled=!!a;var l=["Active"].concat("Object").join("X");!u.enabled&&l in t&&(c("overriding xmlhttprequest"),a=function(){try{return new t[l]("Microsoft.XMLHTTP")}catch(e){return null}},u.enabled=!!new a);var f=!1;try{f="withCredentials"in new a}catch(e){}u.supportsCORS=f,e.exports=u}).call(this,n(1))},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(34),s=n(42);function a(e){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(a,i),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(s.enabled&&e.sameScheme)},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(172),s=n(35),a=n(77);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",o,s)}r(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,e.exports=c},function(e,t,n){(function(t){e.exports=t.EventSource}).call(this,n(1))},function(e,t,n){"use strict";var r=n(0),i=n(11),o=n(6).EventEmitter,s=n(79),a=n(7),c=n(26),u=n(15),l=n(19),f=function(){};function d(e,t,n){if(!d.enabled())throw new Error("Transport created when disabled");o.call(this);var r=this;this.origin=a.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=l.string(8);var i=a.addPath(n,"/iframe.html")+"#"+this.windowId;f(e,t,i),this.iframeObj=c.createIframe(i,function(e){f("err callback"),r.emit("close",1006,"Unable to load an iframe ("+e+")"),r.close()}),this.onmessageCallback=this._message.bind(this),u.attachEvent("message",this.onmessageCallback)}r(d,o),d.prototype.close=function(){if(f("close"),this.removeAllListeners(),this.iframeObj){u.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(e){if(f("message",e.data),a.isOriginEqual(e.origin,this.origin)){var t;try{t=i.parse(e.data)}catch(t){return void f("bad json",e.data)}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",i.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=i.parse(t.data)}catch(e){return void f("bad json",t.data)}this.emit("close",n[0],n[1]),this.close()}else f("mismatched window id",t.windowId,this.windowId)}else f("not same origin",e.origin,this.origin)},d.prototype.postMessage=function(e,t){f("postMessage",e,t),this.iframeObj.post(i.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},d.prototype.send=function(e){f("send",e),this.postMessage("m",e)},d.enabled=function(){return c.iframeEnabled},d.transportName="iframe",d.roundTrips=2,e.exports=d},function(e,t){e.exports="1.3.0"},function(e,t,n){"use strict";var r=n(0),i=n(174),o=n(24),s=n(20);function a(e){if(!i.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",i,o)}r(a,s),a.enabled=function(e){return i.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(34),s=n(35),a=n(24);function c(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,s)}r(c,i),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||s.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},function(e,t,n){"use strict";(function(t){e.exports=t.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,n(1))},function(e,t,n){"use strict";var r=n(0),i=n(6).EventEmitter,o=n(11),s=n(24),a=n(84);function c(e){var t=this;i.call(this),this.ir=new a(e,s),this.ir.once("finish",function(e,n){t.ir=null,t.emit("message",o.stringify([e,n]))})}r(c,i),c.transportName="iframe-info-receiver",c.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=c},function(e,t,n){"use strict";var r=n(6).EventEmitter,i=n(0),o=n(11),s=n(44),a=function(){};function c(e,t){r.call(this);var n=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var r,c;if(200===e){if(c=+new Date-i,t)try{r=o.parse(t)}catch(e){a("bad json",t)}s.isObject(r)||(r={})}n.emit("finish",r,c),n.removeAllListeners()})}i(c,r),c.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=c},function(e,t,n){var r=n(86),i=n(192),o=n(193);e.exports={defaultRTCParams:{peerConfig:{receiveMedia:{offerToReceiveAudio:!0,offerToReceiveVideo:!0},peerConnectionConfig:{iceServers:[],forceTurn:!1},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0}]}}},RTCClient:i,RTCManager:r,RTCRoster:o}},function(e,t,n){var r=n(4),i=n(2),o=n(5),s=(n(8),n(90)),a=n(3),c=n(156),u=n(157),l=(n(191),n(9)),f=r.Class({constructor:function(e){"chrome"===l.browser||"firefox"===l.browser?(this.EventServiceClient=new u,i.bindAll(this),i.extend(this,o.Events),this.initialize(e),this.aggregateAPIResponse=null,this.meeting=null,this.reconnectInterval=1e3,this.bjnCloudTimeout=5e3,this.bjnSIPTimeout=3e3,this.bjnWebRTCReconnectTimeout=9e4,this.isVolumeMonitorStarted=!1,this.maxBandwidth=1200,this.config={environment:{hostname:"https://bluejeansdev.com"},meeting:{meetingNumericId:"",attendeePasscode:""},user:{name:"Testclient",leaderId:14659,userToken:"186731bd52f8478090444d7c5862f7bd"},events:["meeting","endpoint"]}):a.error("Browser not supported !!")},initialize:function(e){this.rtcController=new s(e.webrtcParams),this.webrtcParams=e.webrtcParams,this.setupRTCControllerCB(),this.setupRTCControllerListeners(),e.bjnSIPTimeout&&(this.bjnSIPTimeout=e.bjnSIPTimeout),e.bjnWebRTCReconnectTimeout&&(this.bjnWebRTCReconnectTimeout=e.bjnWebRTCReconnectTimeout),e.bjnCloudTimeout&&(this.bjnCloudTimeout=e.bjnCloudTimeout),this.meetingInfo=null,this.localEndPointStateChange=null,this.remoteEndPointStateChange=null,this.remoteStreamChange=null,this.remoteMuteChange=null,this.localVideoStreamChange=null,this.localAudioStreamChange=null,this.error=null,this.fakeStream=null,this.contentStreamChange=null,"firefox"===l.browser&&this.createFakeStream()},setBandwidth:function(e){e>=100&&e<=4096&&(this.maxBandwidth=e)},getServiceClient:function(){return this.EventServiceClient},setupRTCControllerCB:function(){this.getLocalMedia=this.rtcController.getLocalMedia,this.getLocalDevices=this.rtcController.getLocalDevices,this.setSpeaker=this.rtcController.setSpeaker,this.renderSelfView=this.rtcController.renderSelfView,this.renderStream=this.rtcController.renderStream,this.muteStreams=this.rtcController.muteStreams,this.makeCall=this.rtcController.makeCall},setupRTCControllerListeners:function(){this.rtcController.model.on("change:callState",this.onCallStateChange),this.rtcController.model.on("change:localAudioStream",this.onLocalAudioStreamChange),this.rtcController.model.on("change:localVideoStream",this.onLocalVideoStreamChange),this.rtcController.model.on("change:previewStream",this.onPreviewStreamChange),this.rtcController.model.on("change:remoteStream",this.onRemoteStreamChange),this.rtcController.model.on("change:isIceRestarted",this.onIceRestart),this.rtcController.model.on("change:presentationToken",this.onPresentationTokenUpdated.bind(this))},startMeeting:function(e){if(!e.numericMeetingId||!e.displayName)return this.error&&this.error("invalidMeetingParams"),void a.error("Meeting id or display name cannot be empty");this.getPairingCodeAndInitCall(e),this.initBJNCloudConnectionTimer()},WebRTCPairing:function(){var e=this;this.meeting.oauthInfo=this.aggregateAPIResponse.oauthInfo,c.webRTCPairing(e.meeting,function(t,n){t?a.error(t):(e.clearReconnectTimer(),e.clearBJNCloudConnectionTimer(),e.initWebRTCCall(JSON.parse(n)),e.connectEventService(e.aggregateAPIResponse))})},getPairingCodeAndInitCall:function(e){var t=this;this.meetingInfo=e,t.meeting={},t.meeting.meetingNumericId=e.numericMeetingId,e.attendeePasscode&&(t.meeting.meetingPasscode=e.attendeePasscode),c.aggregatePairing(t.meeting,function(e,n){e?a.debug("could not get response of aggregate Pairing ",e):(t.aggregateAPIResponse=JSON.parse(n),a.debug("main: aggregatePairing response = ",t.aggregateAPIResponse),t.WebRTCPairing())})},connectEventService:function(e){var t=this;this.EventServiceClient.roster.collection.bind("add",function(e,n,r){t.clearSipConnectionTimer(),t.remoteEndPointStateChange&&t.remoteEndPointStateChange("connected")}),this.EventServiceClient.roster.collection.bind("change:isSendingAudio",function(e,t,n){}),this.EventServiceClient.roster.collection.bind("change:isSendingVideo",function(e,t,n){}),this.EventServiceClient.roster.collection.bind("remove",function(e,n,r){t.remoteEndPointStateChange&&t.remoteEndPointStateChange("disconnected")}),this.EventServiceClient.connect(e,this.config,function(e,n){e&&(a.debug("Event Service: connect error"),t.error&&(a.error(e),t.error("bjnCloudUnreachable"),t.clearBJNCloudConnectionTimer(),t.endMeeting()))})},disconntEventService:function(){this.EventServiceClient.close()},initWebRTCCall:function(e){a.debug("RTCManager :: WebRTC Pairing response ",JSON.stringify(e));var t={sockUrl:e.uri,sessionId:e.pairingCode,endpointDetails:{displayName:this.meetingInfo.displayName,endpointType:"Browser",browserUserAgent:window.navigator.userAgent},maxBandwidth:this.maxBandwidth},n=this.webrtcParams.peerConfig;n.peerConnectionConfig.iceServers=e.turnservers;var r={peerConfig:n,localVideoStream:this.getMediaStream("localVideoStream"),localAudioStream:this.getMediaStream("localAudioStream")};"firefox"===l.browser&&(r.fakeStream=this.fakeStream),this.makeCall(r,t)},stopLocalStreams:function(){var e=this.getMediaStream("localVideoStream"),t=this.getMediaStream("localAudioStream");i.isNull(t)||i.isUndefined(t)||this.rtcController.stopLocalMedia(t),i.isNull(e)||i.isUndefined(e)||this.rtcController.stopLocalMedia(e)},getMediaStream:function(e){var t=this.rtcController.model.get(e);return t||null},getCurrentState:function(e){return"local"===e?this.rtcController.model.get("callState"):this.getRemoteCallState()},getCurrentMuteStates:function(e){if("local"===e)return{audio:this.rtcController.model.get("audioMuted"),video:this.rtcController.model.get("videoMuted")}},onCallStateChange:function(e){var t=e.get("callState");switch(t){case"connected":this.clearWebrtcReconnectTimer();break;case"disconnected":this.rtcController.model.get("disconnectCode")/100!=2&&(this.initReconnectTimer(),this.initWebrtcReconnectTimer())}this.localEndPointStateChange&&this.localEndPointStateChange(t)},onRemoteStreamChange:function(e){var t=e.get("remoteStream");this.remoteStreamChange&&t&&this.remoteStreamChange(t)},onLocalVideoStreamChange:function(e){this.localVideoStreamChange&&this.localVideoStreamChange(e.get("localVideoStream"))},onLocalAudioStreamChange:function(e){this.localAudioStreamChange&&this.localAudioStreamChange(e.get("localAudioStream"))},onPresentationTokenUpdated:function(e){var t=e.get("presentationToken");if(t&&"contentindication"===t.type)if(this.isScreenShareOn&&"null"===t.callGuid)this.isScreenShareOn=!1,this.onContentStreamUpdated(null);else if(!this.isScreenShareOn&&t.callGuid&&"null"!==t.callGuid){this.isScreenShareOn=!0;var n=e.get("remoteContentStream");n&&this.onContentStreamUpdated(n)}else this.isScreenShareOn||t.callGuid||this.onContentStreamUpdated(null)},onContentStreamUpdated:function(e){this.contentStreamChange&&this.contentStreamChange(e)},initWebrtcReconnectTimer:function(){var e=this;e.webrtcReconnectTimer||(e.webrtcReconnectTimer=window.setTimeout(function(){"connected"!==e.getCurrentState("local")&&(e.error&&e.error("webrtcReconnectTimeout"),e.clearReconnectTimer(),e.endMeeting())},e.bjnWebRTCReconnectTimeout))},clearWebrtcReconnectTimer:function(){this.webrtcReconnectTimer&&window.clearTimeout(this.webrtcReconnectTimer),this.webrtcReconnectTimer=null},initSipConnectionTimer:function(){var e=this;e.sipConnectionTimer||(e.sipConnectionTimer=window.setTimeout(function(){e.error&&e.error("sipConnectionTimeout"),e.endMeeting()},e.bjnSIPTimeout))},clearSipConnectionTimer:function(){this.sipConnectionTimer&&window.clearTimeout(this.sipConnectionTimer),this.sipConnectionTimer=null},initBJNCloudConnectionTimer:function(){var e=this;this.bjnCloudConnectiontimer||(this.bjnCloudConnectiontimer=window.setTimeout(function(){e.onError&&e.onError("bjnCloudUnreachable"),e.endMeeting()},this.bjnCloudTimeout))},clearBJNCloudConnectionTimer:function(){this.bjnCloudConnectiontimer&&window.clearTimeout(this.bjnCloudConnectiontimer),this.bjnCloudConnectiontimer=null},initReconnectTimer:function(){this.reconnectInterval<32e3&&(this.reconnectInterval*=2),a.debug("reconnect interval"+this.reconnectInterval),this.WebRTCPairing(),this.reconnectTimer=window.setTimeout(this.initReconnectTimer,this.reconnectInterval)},getMicrophoneVolume:function(){return this.isVolumeMonitorStarted||(this.rtcController.startVolumeMonitoring(this.rtcController.model.get("localAudioStream"),params={}),this.isVolumeMonitorStarted=!0),this.rtcController.model.get("volumeLevel")},createFakeStream:function(e){var t=this;i.isNull(this.fakeStream)&&navigator.mediaDevices.getUserMedia({video:!0,audio:!1,fake:!0}).then(function(e){e.getVideoTracks().forEach(function(e){e&&e.stop()}),a.debug("RTCManager: Adding fake stream for firefox"),e.bjn_label="fake_stream",t.fakeStream=e})},clearReconnectTimer:function(){this.reconnectTimer&&window.clearTimeout(this.reconnectTimer),this.reconnectTimer=null,this.reconnectInterval=1e3},endMeeting:function(){a.debug("End the meeting"),self.fakeStream=null,this.rtcController.stopVolumeMonitoring(),this.isVolumeMonitorStarted=!1,this.rtcController.endCall(),this.disconntEventService()}});e.exports=f},function(e,t,n){var r;!function(){var n={};void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r),n.Class=function(){var e,t,n=arguments.length,r=arguments[n-1],s=n>1?arguments[0]:null,a=n>2;if(r.constructor===Object?e=function(){}:(e=r.constructor,delete r.constructor),s&&((t=function(){}).prototype=s.prototype,e.prototype=new t,e.prototype.constructor=e,e.Super=s,o(e,s,!1)),a)for(var c=1;c<n-1;c++)o(e.prototype,arguments[c].prototype,!1);return i(e,r),e};var i=n.extendClass=function(e,t,n){t.STATIC&&(o(e,t.STATIC,n),delete t.STATIC),o(e.prototype,t,n)},o=function(e,t,n){var r;if(!1===n)for(r in t)r in e||(e[r]=t[r]);else{for(r in t)e[r]=t[r];t.toString!==Object.prototype.toString&&(e.toString=t.toString)}}}()},function(e,t,n){(function(e,n){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var o="object"==("undefined"==typeof self?"undefined":i(self))&&self.self===self&&self||"object"==(void 0===e?"undefined":i(e))&&e.global===e&&e||this||{},s=o._,a=Array.prototype,c=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,l=a.push,f=a.slice,d=c.toString,p=c.hasOwnProperty,h=Array.isArray,m=Object.keys,g=Object.create,v=function(){},y=function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};t.nodeType?o._=y:(!n.nodeType&&n.exports&&(t=n.exports=y),t._=y),y.VERSION="1.9.1";var b,C=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},S=function(e,t,n){return y.iteratee!==b?y.iteratee(e,t):null==e?y.identity:y.isFunction(e)?C(e,t,n):y.isObject(e)&&!y.isArray(e)?y.matcher(e):y.property(e)};y.iteratee=b=function(e,t){return S(e,t,1/0)};var _=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}},T=function(e){if(!y.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},E=function(e){return function(t){return null==t?void 0:t[e]}},w=function(e,t){return null!=e&&p.call(e,t)},x=function(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0},R=Math.pow(2,53)-1,k=E("length"),A=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=R};y.each=y.forEach=function(e,t,n){var r,i;if(t=C(t,n),A(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=S(t,n);for(var r=!A(e)&&y.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o};var I=function(e){return function(t,n,r,i){var o=arguments.length>=3;return function(t,n,r,i){var o=!A(t)&&y.keys(t),s=(o||t).length,a=e>0?0:s-1;for(i||(r=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var c=o?o[a]:a;r=n(r,t[c],c,t)}return r}(t,C(n,i,4),r,o)}};y.reduce=y.foldl=y.inject=I(1),y.reduceRight=y.foldr=I(-1),y.find=y.detect=function(e,t,n){var r=(A(e)?y.findIndex:y.findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]},y.filter=y.select=function(e,t,n){var r=[];return t=S(t,n),y.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(S(t)),n)},y.every=y.all=function(e,t,n){t=S(t,n);for(var r=!A(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,n){t=S(t,n);for(var r=!A(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return A(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=_(function(e,t,n){var r,i;return y.isFunction(t)?i=t:y.isArray(t)&&(r=t.slice(0,-1),t=t[t.length-1]),y.map(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=x(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,o,s=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=i(e[0])&&null!=e)for(var c=0,u=(e=A(e)?e:y.values(e)).length;c<u;c++)null!=(r=e[c])&&r>s&&(s=r);else t=S(t,n),y.each(e,function(e,n,r){((o=t(e,n,r))>a||o===-1/0&&s===-1/0)&&(s=e,a=o)});return s},y.min=function(e,t,n){var r,o,s=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=i(e[0])&&null!=e)for(var c=0,u=(e=A(e)?e:y.values(e)).length;c<u;c++)null!=(r=e[c])&&r<s&&(s=r);else t=S(t,n),y.each(e,function(e,n,r){((o=t(e,n,r))<a||o===1/0&&s===1/0)&&(s=e,a=o)});return s},y.shuffle=function(e){return y.sample(e,1/0)},y.sample=function(e,t,n){if(null==t||n)return A(e)||(e=y.values(e)),e[y.random(e.length-1)];var r=A(e)?y.clone(e):y.values(e),i=k(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=y.random(s,o),c=r[s];r[s]=r[a],r[a]=c}return r.slice(0,t)},y.sortBy=function(e,t,n){var r=0;return t=S(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var M=function(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=S(r,i),y.each(n,function(t,i){var s=r(t,i,n);e(o,t,s)}),o}};y.groupBy=M(function(e,t,n){w(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=M(function(e,t,n){e[n]=t}),y.countBy=M(function(e,t,n){w(e,n)?e[n]++:e[n]=1});var P=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(e){return e?y.isArray(e)?f.call(e):y.isString(e)?e.match(P):A(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:A(e)?e.length:y.keys(e).length},y.partition=M(function(e,t,n){e[n?0:1].push(t)},!0),y.first=y.head=y.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return f.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return f.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,Boolean)};var O=function e(t,n,r,i){for(var o=(i=i||[]).length,s=0,a=k(t);s<a;s++){var c=t[s];if(A(c)&&(y.isArray(c)||y.isArguments(c)))if(n)for(var u=0,l=c.length;u<l;)i[o++]=c[u++];else e(c,n,r,i),o=i.length;else r||(i[o++]=c)}return i};y.flatten=function(e,t){return O(e,t,!1)},y.without=_(function(e,t){return y.difference(e,t)}),y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=S(n,r));for(var i=[],o=[],s=0,a=k(e);s<a;s++){var c=e[s],u=n?n(c,s,e):c;t&&!n?(s&&o===u||i.push(c),o=u):n?y.contains(o,u)||(o.push(u),i.push(c)):y.contains(i,c)||i.push(c)}return i},y.union=_(function(e){return y.uniq(O(e,!0,!0))}),y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=k(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){var s;for(s=1;s<n&&y.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},y.difference=_(function(e,t){return t=O(t,!0,!0),y.filter(e,function(e){return!y.contains(t,e)})}),y.unzip=function(e){for(var t=e&&y.max(e,k).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.zip=_(y.unzip),y.object=function(e,t){for(var n={},r=0,i=k(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n};var N=function(e){return function(t,n,r){n=S(n,r);for(var i=k(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}};y.findIndex=N(1),y.findLastIndex=N(-1);var j=function(e,t,n){return function(r,i,o){var s=0,a=k(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(f.call(r,s,a),y.isNaN))>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}};y.indexOf=j(1,y.findIndex,y.sortedIndex=function(e,t,n,r){for(var i=(n=S(n,r,1))(t),o=0,s=k(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o}),y.lastIndexOf=j(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i},y.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(f.call(e,r,r+=t));return n};var D=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=T(e.prototype),s=e.apply(o,i);return y.isObject(s)?s:o};y.bind=_(function(e,t,n){if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var r=_(function(i){return D(e,r,t,this,n.concat(i))});return r}),(y.partial=_(function(e,t){var n=y.partial.placeholder;return function r(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===n?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return D(e,r,this,this,s)}})).placeholder=y,y.bindAll=_(function(e,t){var n=(t=O(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=y.bind(e[r],e)}}),y.memoize=function(e,t){var n=function n(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return w(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=_(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,s,a=0;n||(n={});var c=function(){a=!1===n.leading?0:y.now(),r=null,s=e.apply(i,o),r||(i=o=null)},u=function(){var u=y.now();a||!1!==n.leading||(a=u);var l=t-(u-a);return i=this,o=arguments,l<=0||l>t?(r&&(clearTimeout(r),r=null),a=u,s=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,l)),s};return u.cancel=function(){clearTimeout(r),a=0,r=i=o=null},u},y.debounce=function(e,t,n){var r,i,o=function(t,n){r=null,n&&(i=e.apply(t,n))},s=_(function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(o,t),a&&(i=e.apply(this,s))}else r=y.delay(o,t,this,s);return i});return s.cancel=function(){clearTimeout(r),r=null},s},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.once=y.partial(y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},2),y.restArguments=_;var L=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],B=function(e,t){var n=F.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||c,o="constructor";for(w(e,o)&&!y.contains(t,o)&&t.push(o);n--;)(o=F[n])in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)};y.keys=function(e){if(!y.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)w(e,n)&&t.push(n);return L&&B(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return L&&B(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=S(t,n);for(var r=y.keys(e),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=t(e[a],a,e)}return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()};var U=function(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,c=0;c<a;c++){var u=s[c];t&&void 0!==n[u]||(n[u]=o[u])}return n}};y.extend=U(y.allKeys),y.extendOwn=y.assign=U(y.keys),y.findKey=function(e,t,n){t=S(t,n);for(var r,i=y.keys(e),o=0,s=i.length;o<s;o++)if(t(e[r=i[o]],r,e))return r};var V,q,H=function(e,t,n){return t in n};y.pick=_(function(e,t){var n={},r=t[0];if(null==e)return n;y.isFunction(r)?(t.length>1&&(r=C(r,t[1])),t=y.allKeys(e)):(r=H,t=O(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];r(a,s,e)&&(n[s]=a)}return n}),y.omit=_(function(e,t){var n,r=t[0];return y.isFunction(r)?(r=y.negate(r),t.length>1&&(n=t[1])):(t=y.map(O(t,!1,!1),String),r=function(e,n){return!y.contains(t,n)}),y.pick(e,r,n)}),y.defaults=U(y.allKeys,!0),y.create=function(e,t){var n=T(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0},V=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=i(e);return("function"===o||"object"===o||"object"==i(t))&&q(e,t,n,r)},q=function(e,t,n,r){e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var o=d.call(e);if(o!==d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return u.valueOf.call(e)===u.valueOf.call(t)}var s="[object Array]"===o;if(!s){if("object"!=i(e)||"object"!=i(t))return!1;var a=e.constructor,c=t.constructor;if(a!==c&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!V(e[l],t[l],n,r))return!1}else{var f,p=y.keys(e);if(l=p.length,y.keys(t).length!==l)return!1;for(;l--;)if(f=p[l],!w(t,f)||!V(e[f],t[f],n,r))return!1}return n.pop(),r.pop(),!0},y.isEqual=function(e,t){return V(e,t)},y.isEmpty=function(e){return null==e||(A(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=h||function(e){return"[object Array]"===d.call(e)},y.isObject=function(e){var t=i(e);return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){y["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return w(e,"callee")});var G=o.document&&o.document.childNodes;"object"!=("undefined"==typeof Int8Array?"undefined":i(Int8Array))&&"function"!=typeof G&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return!y.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&isNaN(e)},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){if(!y.isArray(t))return w(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!p.call(e,i))return!1;e=e[i]}return!!n},y.noConflict=function(){return o._=s,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=function(e){return y.isArray(e)?function(t){return x(t,e)}:E(e)},y.propertyOf=function(e){return null==e?function(){}:function(t){return y.isArray(t)?x(e,t):e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=C(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},z=y.invert(W),J=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};y.escape=J(W),y.unescape=J(z),y.result=function(e,t,n){y.isArray(t)||(t=[t]);var r=t.length;if(!r)return y.isFunction(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=y.isFunction(o)?o.call(e):o}return e};var $=0;y.uniqueId=function(e){var t=++$+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var X=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(e){return"\\"+K[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r,i=RegExp([(t.escape||X).source,(t.interpolate||X).source,(t.evaluate||X).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,function(t,n,r,i,a){return s+=e.slice(o,a).replace(Y,Q),o=a+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var a=function(e){return r.call(this,e,y)},c=t.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},y.chain=function(e){var t=y(e);return t._chain=!0,t};var Z=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){return y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),Z(this,n.apply(y,e))}}),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],Z(this,n)}}),y.each(["concat","join","slice"],function(e){var t=a[e];y.prototype[e]=function(){return Z(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return y}.apply(t,[]))||(n.exports=r)}()}).call(this,n(1),n(21)(e))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,s,a,c=1,u={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},d.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(1),n(12))},function(e,t,n){var r=n(8),i=n(4),o=n(2),s=n(5),a=n(3),c=n(9),u=n(13),l=(n(22),n(28)),f=n(120),d=n(139),p=n(33),h=n(23),m=n(14),g=n(152),v=n(64),y=n(18),b=n(155),C=s.Model.extend({defaults:{localVideoStream:null,localAudioStream:null,previewStream:null,remoteStream:null,localContentStream:null,remoteContentStream:null,connectionState:"",callState:"",disconnectCode:"",localAudioMuted:null,localVideoMuted:null,remoteAudioMuted:!1,remoteVideoMuted:!1,isSpeaking:!1,volumeLevel:0,devices:{available:{audioIn:[],videoIn:[]},selected:{audioIn:null,videoIn:null}},presentationToken:null,presentationState:null,isWSConnected:!1,isIceRestarted:!1,capabilities:{}}}),S=s.Model.extend({defaults:{wsConnectionState:"closed",wsSocketId:"",isIceRestarted:!1,dtlsCertificate:null}}),_=i.Class({config:{},resendMute:!1,constructor:function(e){o.bindAll(this),o.extend(this.config,e),o.extend(this,s.Events),"firefox"===c.browser&&(this.isFirefox=!0),this.model=new C,this.internalModel=new S,this.BJ_CALLSTATES=m.BJ_CALLSTATES,this.TOKEN_STATUS=u.TOKEN_STATUS,this.EXTENSION_STATES=m.EXTENSION_STATES,this.WS_STATES=m.WS_STATES,this.localMediaManager=new f(this.config.localMediaParams),this.peerConnectionManager=new d({peerConfig:this.config.peerConfig,meetingParams:e.meetingParams}),this.localMediaManager.model.on("change:localAudioStream",this.onLocalAudioStreamChange),this.localMediaManager.model.on("change:localVideoStream",this.onLocalVideoStreamChange),this.localMediaManager.model.on("change:previewStream",this.onPreviewStreamChange),this.localMediaManager.model.on("change:remoteAudioMuted",this.onRemoteAudioMuteChange),this.localMediaManager.model.on("change:remoteVideoMuted",this.onRemoteVideoMuteChange),this.localMediaManager.model.on("change:isSpeaking",this.isSpeaking),this.localMediaManager.model.on("change:volumeLevel",this.updateVolumeLevel),this.localMediaManager.on("localStreamsChanged",this.onLocalStreamsChanged),p.on("retransmitRequest",this.onRetransmitRequest),p.on("receivedConnectResponse",this.onReceiveConnectResponse),p.on("requestTimeout",this.onRequestTimeout),p.on("closeSocketConnection",this.closeSocket),h.model.on("change:disconnectCode",this.onDisconnectCodeChange),h.model.on("change:currentState",this.onCallStateChange),l.on("wsConnectionStateChange",this.wsConnectionStateChange),v.setParams({extensionId:this.config.extensionId,features:this.config.features}),v.model.on("change:presentationToken",this.onReceivePresentationToken),v.model.on("change:localContentStream",this.onLocalContentStreamChanged),v.model.on("change:tokenStatus",this.onPresentationTokenStatusChanged),v.model.on("change:extensionStatus",this.onExtensionStatusChanged),v.model.on("change:firefoxScreenShareCancelled",this.triggerFirefoxScreenShareCancelled)},getLocalMedia:function(e,t){var n=r.defer();return this.localMediaManager.startMedia(e,t).then(function(e){return n.resolve(e)},function(e){return a.warn("RTCController: Could not get access to user's media devices"),n.reject(e)}),n.promise},getLocalDevices:function(){var e=this,t=r.defer();return this.localMediaManager.getDevices().then(function(n){var r=e.model.get("devices");r.available=n.available,r.selected=n.selected,e.model.set("devices",r),t.resolve(r)},function(e){t.reject(e)}),t.promise},getCameraStatus:function(e){return this.localMediaManager.detectCameraStatus(e)},getCapabilities:function(){return b.detectCapabilities().then(o.bind(function(){this.model.set("capabilities",b.model.attributes)},this),function(){a.error("RTCController: failed to get RTC capabilities")})},setSpeaker:function(e){this.localMediaManager.setSpeaker(e)},renderSelfView:function(e){return this.localMediaManager.renderSelfView(e)},renderStream:function(e){return this.localMediaManager.renderStream(e)},stopLocalMedia:function(e){this.localMediaManager.stopMedia(e)},createPeerConnection:function(e){this.peerConnectionManager.createPeer(e),this.peerConnectionManager.peer.model.on("change:remoteStream",this.onRemoteStreamChanged),this.peerConnectionManager.peer.model.on("change:remoteContentStream",this.onRemoteContentStreamChanged),this.peerConnectionManager.peer.on("iceConnectionClosed",this.onIceConnectivityClosed),this.peerConnectionManager.peer.on("restartICE",this.restartMediaChannel),this.peerConnectionManager.peer.on("iceConnectivityTimeout",this.onIceConnectivityTimeout),this.peerConnectionManager.peer.callStatsModel.on("change",function(e){this.model.set(e.attributes)},this)},onCallStateChange:function(e){var t=e.get("currentState");this.model.set("callState",t),p.updateCallState(t),this.reactToCallStateChange()},reactToCallStateChange:function(){switch(this.model.get("callState")){case this.BJ_CALLSTATES.CONNECTED:this.model.set("isIceRestarted",!1);break;case this.BJ_CALLSTATES.DISCONNECTED:this.reset(),this.sendDisconnectMessage(h.getDisconnectReason())}},onDisconnectCodeChange:function(){this.model.set("disconnectCode",h.model.get("disconnectCode"))},initializePeerConnection:function(e,t){void 0!==t&&!0!==t||h.reset(),this.peerConnectionManager.initiateCall(e,!0)},startConnection:function(e){var t=g.v1();l.createSocket(e),this.peerConnectionManager.updateMeetingParams(e),u.setCallid(t)},generateDtlsRsaCertificate:function(){var e,t=r.defer(),n=this;return webkitRTCPeerConnection.generateCertificate?(e=n.internalModel.get("dtlsCertificate"))?t.resolve(e):webkitRTCPeerConnection.generateCertificate({name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}).then(function(e){a.debug("RTCController :: Successfully created DTLS RSA certificate"),n.internalModel.set("dtlsCertificate",e),t.resolve(e)},function(e){t.reject(e)}):t.resolve(),t.promise},makeCall:function(e,t){var n=this;p.reset(),h.reset(),this.closeSocket(),this.isFirefox?(n.startConnection(t),n.createPeerConnection(e)):this.generateDtlsRsaCertificate().then(function(r){r&&(e.peerConfig.peerConnectionConfig.certificates=[r]),n.startConnection(t),n.createPeerConnection(e)},function(e){a.error("RTCController :: Failed to start call, Error :"+e)})},joinMeeting:function(){var e=this.model.get("callState");if(e!==this.BJ_CALLSTATES.CONNECTING&&e!==this.BJ_CALLSTATES.RECONNECTING)throw a.error("RTCController: callState is not in connecting/reconnecting state, cannot proceed with call yet"),"Connection state not ready to call";var t=this.config.peerConfig.receiveMedia;t.iceRestart=!1,this.peerConnectionManager.initiateCall(t,!1)},restartMediaChannel:function(){var e=this.internalModel.get("wsConnectionState");if(e!==this.WS_STATES.CONNECTED&&e!==this.WS_STATES.RECONNECTED||!1!==this.model.get("isIceRestarted"))a.debug("RTCController : Failed to restart media channel, Signalling channel is disconnected or media restart is already in progress.");else{a.debug("Re-starting the media channel - ICE Restart, get new local SDP");var t=this.config.peerConfig.receiveMedia;t.iceRestart=!0,this.initializePeerConnection(t,!1),this.model.set("isIceRestarted",!0)}},onRetransmitRequest:function(e){l.sendMsg(e)},onLocalAudioStreamChange:function(e){this.model.set("localAudioStream",e.get("localAudioStream"))},onLocalVideoStreamChange:function(e){this.model.set("localVideoStream",e.get("localVideoStream"))},onPreviewStreamChange:function(e){this.model.set("previewStream",e.get("previewStream"))},onRemoteStreamChanged:function(e){this.model.set("remoteStream",e.get("remoteStream")),this.localMediaManager.updateStream({remoteStream:e.get("remoteStream")})},onRemoteContentStreamChanged:function(e){this.model.set("remoteContentStream",e.get("remoteContentStream"))},onReceivePresentationToken:function(e){this.model.set("presentationToken",e.get("presentationToken"))},_applyCachedMuteStates:function(){a.info("RTCController: Applying cached mute states"),this.muteStreams({resendMuteMsg:!0,localAudio:this.localMediaManager.model.get("localAudioMuted"),localVideo:this.localMediaManager.model.get("localVideoMuted"),remoteAudio:this.localMediaManager.model.get("remoteAudioMuted"),remoteVideo:this.localMediaManager.model.get("remoteVideoMuted")})},muteStreams:function(e){var t=this,n=p.model.get("connectResponseReceived"),r=(o.isBoolean(e.localAudio)&&(e.localAudio,this.model.get("localAudioMuted")),o.isBoolean(e.localVideo)&&e.localVideo!==this.model.get("localVideoMuted"));this.peerConnectionManager&&this.peerConnectionManager.peer&&(o.isUndefined(e.remoteAudio)||o.isUndefined(e.remoteVideo)||(this.peerConnectionManager.peer.isRemoteMute=e.remoteAudio&&e.remoteVideo)),this.localMediaManager.muteStreams(e).then(function(){if(!e.localMuteOnly&&n){r&&!1===e.localVideo&&t.onLocalStreamsChanged();var i=e.localAudio,o=e.localVideo,s=e.remoteAudio,a=e.remoteVideo,c=u.getMuteMessage({audio:i?"muted":"unmuted",video:o?"muted":"unmuted",remoteAudio:s?"muted":"unmuted",remoteVideo:a?"muted":"unmuted"});l.sendMsg(c)?(p.onBlueJayRequest(c),t.resendMute=!1):t.resendMute=!0,t.model.set({localAudioMuted:i,localVideoMuted:o})}},function(){a.error("RTCController: Failed to Mute streams")})},onRemoteAudioMuteChange:function(e){this.model.set("remoteAudioMuted",e.get("remoteAudioMuted"))},onRemoteVideoMuteChange:function(e){this.model.set("remoteVideoMuted",e.get("remoteVideoMuted"))},updateLocalStream:function(e){return this.peerConnectionManager.updatePeerStream(e)},startVolumeMonitoring:function(e,t){null==this.localMediaManager.volumeMoniter?this.localMediaManager.startVolumeMonitor(e,t):a.debug("Already monitering volume")},stopVolumeMonitoring:function(){this.localMediaManager.stopVolumeMonitor()},isSpeaking:function(e){this.model.set("isSpeaking",e.get("isSpeaking"))},setIsSpeaking:function(e){this.localMediaManager.model.set("isSpeaking",e),e||(this.localMediaManager.vadCount=0)},updateVolumeLevel:function(e){this.model.set("volumeLevel",e.get("volumeLevel"))},onLocalStreamsChanged:function(){var e=this.localMediaManager.model.get("localAudioStream"),t=this.localMediaManager.model.get("localVideoStream");this.model.get("callState");this.peerConnectionManager.updatePeerStream({newVideoStream:t,newAudioStream:e})},onLocalStreamSuccessCB:function(e){var t=this,n=null,r=null,i=t.model.get("localVideoStream"),s=t.model.get("localAudioStream"),a=this.model.get("callState");o.each(e,function(e,i,o){e.getVideoTracks().length>0?(n=e,t.model.set("localVideoStream",n)):(r=e,t.model.set("localAudioStream",r))}),a===this.BJ_CALLSTATES.CONNECTED&&t.peerConnectionManager.updatePeerStream({currentVideoStream:i,newVideoStream:n,currentAudioStream:s,newAudioStream:r})},onReceiveConnectResponse:function(){this._applyCachedMuteStates(),this.peerConnectionManager.signallingChannelCreated(),this.localMediaManager.sendDeviceInfo()},onCallDisconnected:function(e){h.callDisconnected(e)},onRequestTimeout:function(){h.callDisconnected(y.DISCONNECT_REASONS.REQ_TIMED_OUT)},endCall:function(){this.sendDisconnectMessage(y.DISCONNECT_REASONS.USER_INITIATED),this.localMediaManager.close(),this.reset()},reset:function(){var e=r.defer();return this.peerConnectionManager.close(),v.close(),p.reset(),h.reset(),this.model.set(C.defaults),this.internalModel.set(S.defaults),e.resolve(),e.promise},sendDisconnectMessage:function(e){var t=u.getDisconnectMessage(e);p.onBlueJayRequest(t),l.sendMsg(t)},closeSocket:function(){a.debug("RTCController closing socket"),l.close()},getVersion:function(){return"1.0"},startScreenSharing:function(e){v.startScreenSharing(e)},stopScreenSharing:function(){v.stopScreenSharing()},onLocalContentStreamChanged:function(e){var t=e.get("localContentStream");this.isFirefox?this.peerConnectionManager.updateContentStream(t):t?this.peerConnectionManager.addPeerStream(t):(t=this.model.get("localContentStream"))&&this.peerConnectionManager.removePeerStream(t),this.model.set("localContentStream",e.get("localContentStream"))},onPresentationTokenStatusChanged:function(e){this.model.set("presentationTokenStatus",e.get("tokenStatus"))},triggerFirefoxScreenShareCancelled:function(e){this.model.trigger("change:presentationTokenStatus",this.model)},onExtensionStatusChanged:function(e){this.model.set("extensionStatus",e.get("extensionStatus"))},wsConnectionStateChange:function(e,t){var n=this.internalModel.get("wsConnectionState");switch(this.internalModel.set("wsConnectionState",e),e){case this.WS_STATES.CONNECTED:h.getCurrentCallState()!==this.BJ_CALLSTATES.IDLE&&n===this.WS_STATES.RECONNECTED||this.initializePeerConnection();break;case this.WS_STATES.RECONNECTED:this.internalModel.get("wsSocketId")!==t&&h.getCurrentCallState()===this.BJ_CALLSTATES.RESTART_MEDIA&&this.restartMediaChannel(),this.peerConnectionManager.sendKeepAliveMessage(!0),this.resendMute&&this._applyCachedMuteStates();break;case this.WS_STATES.FAILED:h.callDisconnected(y.DISCONNECT_REASONS.TRANSPORT_FAIL);break;case this.WS_STATES.DISCONNECTED:case this.WS_STATES.CLOSED:}this.internalModel.set("wsSocketId",t)},onIceConnectivityTimeout:function(){h.callDisconnected(y.DISCONNECT_REASONS.TRANSPORT_FAIL)},setPresentationRatio:function(e){v.sendPresentaionRatio(e)},onIceConnectivityClosed:function(){a.debug("RTCController :: Ice connection is closed, ending the call"),h.callDisconnected(y.DISCONNECT_REASONS.USER_INITIATED),this.localMediaManager.close()}});e.exports=_},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(92),o=n(36),s=n(49),a=n(29)("socket.io-client");e.exports=t=u;var c=t.managers={};function u(e,t){"object"===r(e)&&(t=e,e=void 0),t=t||{};var n,o=i(e),u=o.source,l=o.id,f=o.path,d=c[l]&&f in c[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(a("ignoring socket cache for %s",u),n=s(u,t)):(c[l]||(a("new io instance for %s",u),c[l]=s(u,t)),n=c[l]),o.query&&!t.query&&(t.query=o.query),n.socket(o.path,t)}t.protocol=o.protocol,t.connect=u,t.Manager=n(49),t.Socket=n(55)},function(e,t,n){var r=n(47),i=n(29)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=s[c];n=i.call(e,o),s.splice(c,1),c--}return n}),t.formatArgs.call(e,s),(r.log||t.log||console.log.bind(console)).apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(94),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=1e3,i=60*r,o=60*i,s=24*o,a=365.25*s;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var u,l=n(e);if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===l&&!1===isNaN(e))return t.long?c(u=e,s,"day")||c(u,o,"hour")||c(u,i,"minute")||c(u,r,"second")||u+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(96)).log=function(){return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(12))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=s[c];n=i.call(e,o),s.splice(c,1),c--}return n}),t.formatArgs.call(e,s),(r.log||t.log||console.log.bind(console)).apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(97),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=1e3,i=60*r,o=60*i,s=24*o,a=365.25*s;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var u,l=n(e);if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===l&&!1===isNaN(e))return t.long?c(u=e,s,"day")||c(u,o,"hour")||c(u,i,"minute")||c(u,r,"second")||u+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(37),o=n(48),s=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),c="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);t.deconstructPacket=function(e){var t=[],n=e.data,s=e;return s.data=function e(t,n){if(!t)return t;if(o(t)){var s={_placeholder:!0,num:n.length};return n.push(t),s}if(i(t)){for(var a=new Array(t.length),c=0;c<t.length;c++)a[c]=e(t[c],n);return a}if("object"===r(t)&&!(t instanceof Date)){var a={};for(var u in t)a[u]=e(t[u],n);return a}return t}(n,t),s.attachments=t.length,{packet:s,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(i(t))for(var o=0;o<t.length;o++)t[o]=e(t[o],n);else if("object"===r(t))for(var s in t)t[s]=e(t[s],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,s=e;!function e(u,l,f){if(!u)return u;if(a&&u instanceof Blob||c&&u instanceof File){n++;var d=new FileReader;d.onload=function(){f?f[l]=this.result:s=this.result,--n||t(s)},d.readAsArrayBuffer(u)}else if(i(u))for(var p=0;p<u.length;p++)e(u[p],p,u);else if("object"===r(u)&&!o(u))for(var h in u)e(u[h],h,u)}(s),n||t(s)}},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=u(e),r=n[0],s=n[1],a=new o(function(e,t,n){return 3*(t+n)/4-n}(0,r,s)),c=0,l=s>0?r-4:r,f=0;f<l;f+=4)t=i[e.charCodeAt(f)]<<18|i[e.charCodeAt(f+1)]<<12|i[e.charCodeAt(f+2)]<<6|i[e.charCodeAt(f+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;2===s&&(t=i[e.charCodeAt(f)]<<2|i[e.charCodeAt(f+1)]>>4,a[c++]=255&t);1===s&&(t=i[e.charCodeAt(f)]<<10|i[e.charCodeAt(f+1)]<<4|i[e.charCodeAt(f+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t);return a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*c-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+p]=255&s,p+=h,s/=256,u-=8);e[n+p-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(103),e.exports.parser=n(17)},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(50),o=n(16),s=n(32)("engine.io-client:socket"),a=n(54),c=n(17),u=n(47),l=n(30);function f(e,t){if(!(this instanceof f))return new f(e,t);t=t||{},e&&"object"===r(e)&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=f,f.priorWebsocketSuccess=!1,o(f.prototype),f.protocol=c.protocol,f.Socket=f,f.Transport=n(40),f.transports=n(50),f.parser=n(17),f.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=c.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new i[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},f.prototype.open=function(){var e;if(this.rememberUpgrade&&f.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},f.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},f.prototype.probe=function(e){s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(s('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(s('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;f.priorWebsocketSuccess="websocket"===t.name,s('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!==r.readyState&&(s("changing transport and sending upgrade packet"),d(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})}else{s('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,r.emit("upgradeError",o)}}))}function o(){n||(n=!0,d(),t.close(),t=null)}function a(n){var i=new Error("probe error: "+n);i.transport=t.name,o(),s('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function c(){a("transport closed")}function u(){a("socket closed")}function l(e){t&&e.name!==t.name&&(s('"%s" works - aborting "%s"',e.name,t.name),o())}function d(){t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",c),r.removeListener("close",u),r.removeListener("upgrading",l)}f.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",a),t.once("close",c),this.once("close",u),this.once("upgrading",l),t.open()},f.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",f.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},f.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},f.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},f.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},f.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},f.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},f.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},f.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},f.prototype.write=f.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},f.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},f.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}function t(){e.onClose("forced close"),s("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},f.prototype.onError=function(e){s("socket error %j",e),f.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},f.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},f.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var r=n(39),i=n(51),o=n(16),s=n(31),a=n(32)("engine.io-client:polling-xhr");function c(){}function u(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function l(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=u,e.exports.Request=l,s(u,i),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new l(e)},u.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},u.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},o(l.prototype),l.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");n.supportsBinary&&"application/octet-stream"===e&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){n.onError(e)},0)}"undefined"!=typeof document&&(this.index=l.requestsCount++,l.requests[this.index]=this)},l.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},l.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},l.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},l.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete l.requests[this.index],this.xhr=null}},l.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},l.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},l.prototype.abort=function(){this.cleanup()},l.requestsCount=0,l.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",d);else if("function"==typeof addEventListener){var f="onpagehide"in self?"pagehide":"unload";addEventListener(f,d,!1)}function d(){for(var e in l.requests)l.requests.hasOwnProperty(e)&&l.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var i=!1;return r=r||n,o.count=e,0===e?t():o;function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=r):0!==o.count||i||t(null,n)}}},function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var n,r,i,o=String.fromCharCode;function s(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return o(e>>t&63|128)}function u(e,t){if(0==(4294967168&e))return o(e);var n="";return 0==(4294965248&e)?n=o(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),n=o(e>>12&15|224),n+=c(e,6)):0==(4292870144&e)&&(n=o(e>>18&7|240),n+=c(e,12),n+=c(e,6)),n+=o(63&e|128)}function l(){if(i>=r)throw Error("Invalid byte index");var e=255&n[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(e){var t,o;if(i>r)throw Error("Invalid byte index");if(i==r)return!1;if(t=255&n[i],i++,0==(128&t))return t;if(192==(224&t)){if((o=(31&t)<<6|l())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if((o=(15&t)<<12|l()<<6|l())>=2048)return a(o,e)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(o=(7&t)<<18|l()<<12|l()<<6|l())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=s(e),i=r.length,o=-1,a="";++o<i;)a+=u(r[o],n);return a},decode:function(e,t){var a=!1!==(t=t||{}).strict;n=s(e),r=n.length,i=0;for(var c,u=[];!1!==(c=f(a));)u.push(c);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=o(t);return i}(u)}}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,r,i,o,s,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),f=new Uint8Array(l);for(t=0;t<c;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],o=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],f[u++]=r<<2|i>>4,f[u++]=(15&i)<<4|o>>2,f[u++]=(3&o)<<6|63&s;return l}}()},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function s(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e})}function a(e,t){t=t||{};var r=new n;return s(e).forEach(function(e){r.append(e)}),t.type?r.getBlob(t.type):r.getBlob()}function c(e,t){return new Blob(s(e),t||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=r?i?Blob:c:o?a:void 0},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=s[c];n=i.call(e,o),s.splice(c,1),c--}return n}),t.formatArgs.call(e,s),(r.log||t.log||console.log.bind(console)).apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(113),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=1e3,i=60*r,o=60*i,s=24*o,a=365.25*s;function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var u,l=n(e);if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*a;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===l&&!1===isNaN(e))return t.long?c(u=e,s,"day")||c(u,o,"hour")||c(u,i,"minute")||c(u,r,"second")||u+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(t){var r=n(51),i=n(31);e.exports=l;var o,s=/\n/g,a=/\\n/g;function c(){}function u(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}}function l(e){if(r.call(this,e),this.query=this.query||{},!o){var t=u();o=t.___eio=t.___eio||[]}this.index=o.length;var n=this;o.push(function(e){n.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){n.script&&(n.script.onerror=c)},!1)}i(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=c,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function u(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(a,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&u()}:this.iframe.onload=u}}).call(this,n(1))},function(e,t,n){(function(t){var r,i,o=n(40),s=n(17),a=n(30),c=n(31),u=n(53),l=n(32)("engine.io-client:websocket");if("undefined"==typeof self)try{i=n(116)}catch(e){}else r=self.WebSocket||self.MozWebSocket;var f=r||i;function d(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=i),o.call(this,e)}e.exports=d,c(d,o),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},d.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,i=0,o=r;i<o;i++)!function(e){s.encodePacket(e,n.supportsBinary,function(i){if(!n.usingBrowserWebSocket){var o={};if(e.options&&(o.compress=e.options.compress),n.perMessageDeflate)("string"==typeof i?t.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,o)}catch(e){l("websocket closed before onclose event")}--r||a()})}(e[i]);function a(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}},d.prototype.onClose=function(){o.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},d.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===d.prototype.name)}}).call(this,n(38).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){var r=n(4),i=n(2),o=n(3),s=n(13),a=n(18),c=r.Class({STATIC:{SUPPORTED_METHODS:i.values(s.METHODS),ERROR:a.SIGNALING_ERRORS},constructor:function(e){i.bindAll(this),this.callbacks=e.callbacks},getMessgeType:function(e){return i.isUndefined(e.id)?"notification":i.isEmpty(e.error)?i.isEmpty(e.result)?i.isEmpty(e.params)?(o.error("Message passed is in invalid format. Supported message types are: request, response, error, notification"),"invalid"):"request":"response":"error"},parseIncomingMessage:function(e){var t=this,n=JSON.parse(e);this.validateMessage(n,function(){var e=t.getMessgeType(n);"function"==typeof t.callbacks[e]&&t.callbacks[e].apply(t,[n])},function(e){t.callbacks.invalidMessage.apply(t,[n,e])})},validateMessage:function(e,t,n){var r=s.getCallId();i.isNull(e.call)||i.isUndefined(e.call)?(o.error("Invalid message received from Remote Server, 'call' field not defined in message"),n(c.ERROR.BAD_REQUEST)):e.call!==r?(o.error("Invalid call id, Transaction does not exists"),n(c.ERROR.DOESNOT_EXIST)):i.isUndefined(e.method)||-1!==i.indexOf(c.SUPPORTED_METHODS,e.method)?t():(o.error("Invalid message received from Remote Server, 'method' passed is not supported: "+e.method),n(c.ERROR.METHOD_NOT_IMPLEMENTED))}});e.exports=c},function(e,t,n){var r=n(4),i=n(2),o=n(3),s=n(5),a=n(8),c=n(22),u=n(18),l=n(13),f=n(28),d=n(33),p=n(122),h=n(138),m=n(59),g=n(9),v=s.Model.extend({defaults:{previewStream:null,localStream:null,localAudioStream:null,localVideoStream:null,remoteStream:null,localAudioMuted:!1,localVideoMuted:!1,remoteAudioMuted:!1,remoteVideoMuted:!1,localStreamStopped:!1,availableDevices:{audioIn:[],videoIn:[],audioOut:[]},selectedMic:null,selectedCamera:null,selectedSpeaker:null,volumeLevel:0,isSpeaking:!1}}),y=r.Class({chromeConfig:{mediaConstraints:{audio:{advanced:[{googEchoCancellation:!0},{googAutoGainControl:!0},{googNoiseSuppression:!0},{googHighpassFilter:!0},{googAudioMirroring:!1},{googNoiseSuppression2:!0},{googEchoCancellation2:!0},{googAutoGainControl2:!0},{googDucking:!1}]},video:{width:{min:1280,max:1280},height:{min:720,max:720}}},selfViewConfig:{autoplay:!0,mirror:!0,muted:!0},volumeMonitoring:{interval:300,threshold:-50}},firefoxConfig:{mediaConstraints:{audio:{advanced:[{echoCancellation:!0},{mozAutoGainControl:!0},{mozNoiseSuppression:!0}]},video:{width:{min:"640",ideal:"1280"},height:{min:"360",ideal:"720"}}},selfViewConfig:{autoplay:!0,mirror:!0,muted:!0},volumeMonitoring:{interval:300,threshold:-50}},volumeMonitor:null,isSignallingChannelReady:!1,vadCount:0,constructor:function(e){i.bindAll(this),i.extend(this,s.Events),this.config="firefox"===g.browser?this.firefoxConfig:this.chromeConfig,this.config=c.deepMergeObjects(this.config,e),this.model=new v,this.localMedia=new p(this.config),this.cachedMediaConstraints=this.config.mediaConstraints,d.on("receivedConnectResponse",this.onReceiveConnectResponse)},startMedia:function(e,t){var n=this,r=a.defer(),i=c.deepMergeObjects(this.cachedMediaConstraints,e),o=this.cachedMediaConstraints;return this._startMedia(i,t).then(function(e){r.resolve(e),n.detectDeviceChange(o,i)},function(e){r.reject(e)}),this.cachedMediaConstraints=i,r.promise},_startMedia:function(e,t){var n=a.defer(),r=this,s=this.hasMicPreferenceChanged(this.cachedMediaConstraints,e),c=this.hasCameraPreferenceChanged(this.cachedMediaConstraints,e),l=[],f=!1;if("firefox"===g.browser&&"preview_stream"===t&&!s&&!c){var d=this.model.get("localStream");if(this.stopPreviewStream(),!i.isUndefined(d)&&!i.isNull(d)){var p=d.clone();p.bjn_label="preview_stream",p.getTracks().forEach(function(e){e.enabled=!0}),this.model.set("previewStream",p),l.push(p),n.resolve(l),f=!0}}return f||("firefox"===g.browser&&(this.stopLocalStreams(),this.stopPreviewStream(),this.stopVolumeMonitor(),this.stopLocalStreamClone()),"firefox"===g.browser&&!1===e.audio&&!1===e.video?(l=r.startMediaSuccess({stream:null,type:t,micChanged:!1,cameraChanged:!1}),n.reject(u.GET_LOCAL_MEDIA_STATES.DevicesNotFoundError)):this.localMedia.start(e,function(e,i){if(e){var a=u.translateGetUserMediaError(e);o.error("RTCLocalMediaManager: Error in get user media: ",JSON.stringify(a)),n.reject(a)}else r.startMediaSuccess({stream:i,type:t,micChanged:s,cameraChanged:c}).then(function(e){n.resolve(e)})})),n.promise},startMediaSuccess:function(e){var t=null,n=e.stream,r=null,i=this.model.get("localVideoMuted"),s=[],c=this,u=a.defer();return"firefox"===g.browser&&n&&this.saveLocalStream(n),"local_stream"===e.type?(this.createLocalStreams(n).then(function(e){u.resolve(e)}),u.promise):(this.stopPreviewStream(),(t=n).bjn_label="preview_stream",t.onended=function(){o.warn("RTCLocalMediaManager: Preview stream has ended. Id: ",this.id)},s.push(t),e.micChanged||!i&&e.cameraChanged||e.cameraChanged&&"firefox"===g.browser?(this.stopLocalStreams(),r=n.clone(),this.model.set("previewStream",t),this.createLocalStreams(r).then(function(e){s=s.concat(e),c.trigger("localStreamsChanged"),u.resolve(s)}),u.promise):(this.model.set("previewStream",t),u.resolve(s),u.promise))},createLocalStreams:function(e){var t=a.defer(),n=null,r=[],i=this,s=[];return n=this.hasVideoTracks(e)&&this.hasAudioTracks(e)?e.clone():e,s.push(this.extractAudioOnlyStream(e).then(function(e){e&&(r.push(e),i.model.set("localAudioStream",e))},function(e){o.error("RTCLocalMediaManager :: error while extracting audio stream",e)})),s.push(this.extractVideoOnlyStream(n).then(function(e){e&&(r.push(e),i.model.set("localVideoStream",e))},function(e){o.error("RTCLocalMediaManager :: error while extracting audio stream",e)})),a.all(s).then(function(){t.resolve(r)},function(e){o.error("RTCLocalMediaManager: Failed to create local streams"),t.reject(e)}),t.promise},saveLocalStream:function(e){var t=this.model.get("localStream");t&&(this.localMedia.stop(t),t=null);var n=e.clone();n.getTracks().forEach(function(e){e.enabled=!1}),n.label="local_stream",this.model.set("localStream",n)},hasMicPreferenceChanged:function(e,t){var n=this.getSourceId(e.audio),r=this.getSourceId(t.audio);return!i.isNull(r)&&n!==r},hasCameraPreferenceChanged:function(e,t){var n=this.getSourceId(e.video),r=this.getSourceId(t.video);return!i.isNull(r)&&n!==r},getSourceId:function(e){var t=null;return e.deviceId&&(t=e.deviceId),t},hasAudioTracks:function(e){return e&&e.getAudioTracks().length>0},hasVideoTracks:function(e){return e&&e.getVideoTracks().length>0},extractAudioOnlyStream:function(e){var t=a.defer(),n=this.model.get("localAudioMuted"),r=this,i=function(e){return n&&e.getAudioTracks().forEach(function(e){e.enabled=!n}),e.bjn_label="local_audio_stream",e.getAudioTracks()[0].onended=function(){o.warn("RTCLocalMediaManager: Local Audio track has ended. Id: ",this.id),r.model.set("localAudioStream",null)},e};if(this.hasAudioTracks(e)){var s=e;s.getVideoTracks().length>0&&(s.getVideoTracks()[0].stop(),s.removeTrack(s.getVideoTracks()[0])),s=i(s),t.resolve(s)}else"firefox"===g.browser?navigator.mediaDevices.getUserMedia({audio:!0,fake:!0}).then(function(e){var r=e;n=!0,r=i(r),t.resolve(r)},function(e){o.debug("RTCLocalMediaManager :: Error creating audio fake stream"),t.reject(e)}):t.resolve(null);return t.promise},extractVideoOnlyStream:function(e){var t=a.defer(),n=this.model.get("localVideoMuted"),r=this,i=function(e,t){return n&&e.getVideoTracks().forEach(function(e){"firefox"!==g.browser||t?e.stop():e.enabled=!n}),e.bjn_label="local_video_stream",e.getVideoTracks()[0].onended=function(){o.warn("RTCLocalMediaManager: Local Video track has ended. Id: ",this.id),r.model.set("localVideoStream",null)},e};if(this.hasVideoTracks(e)){var s=e;s.getAudioTracks().length>0&&(s.getAudioTracks()[0].stop(),s.removeTrack(s.getAudioTracks()[0])),s=i(s,!1),t.resolve(s)}else"firefox"===g.browser?navigator.mediaDevices.getUserMedia({video:!0,fake:!0}).then(function(e){var r=e;n=!0,r=i(r,!0),t.resolve(r)},function(e){o.debug("RTCLocalMediaManager :: Error creating fake stream"),t.reject(e)}):t.resolve(null);return t.promise},stopLocalStreams:function(){this.stopLocalAudioStream(),this.stopLocalVideoStream()},stopLocalAudioStream:function(){this.stopMedia(this.model.get("localAudioStream"),"localAudioStream")},stopLocalVideoStream:function(){this.stopMedia(this.model.get("localVideoStream"),"localVideoStream")},stopPreviewStream:function(){this.stopMedia(this.model.get("previewStream"),"previewStream")},stopLocalStreamClone:function(){this.stopMedia(this.model.get("localStream"),"localStream")},stopMedia:function(e,t){i.isNull(e)||i.isUndefined(e)||(this.localMedia.stop(e),o.debug("RTCLocalMediaManager: "+t+" has been stopped."),this.model.set(t,null,{silent:!0}))},renderStream:function(e){return e.config=i.defaults({autoplay:!0,mirror:!1,muted:!1},e.config),this.attachMediaStream(e)},renderSelfView:function(e){return e.config=i.defaults(this.config.selfViewConfig,e.config),this.attachMediaStream(e)},attachMediaStream:function(e){return e.stream&&e.el?(e.el&&(e.el.oncontextmenu=function(){return!1}),h(e.stream,e.el,e.config)):(o.error("RTCLocalMediaManager: Incorrect params passed to attachmediastream API. stream: "+e.stream+", el: "+e.el),null)},getDevices:function(){var e=this,t=a.defer(),n="",r="",o={audioIn:null,videoIn:null};this.model.get("localAudioStream")&&(n=this.model.get("localAudioStream").getAudioTracks()[0].label),this.model.get("localVideoStream")&&(r=this.model.get("localVideoStream").getVideoTracks()[0].label);var s=function(s){var a={audioIn:[],videoIn:[],audioOut:[]};i.each(s,function(t,i,s){"audio"===t.kind||"audioinput"===t.kind?(a.audioIn.push(e.translateDeviceInfo(t)),t.label===n&&(o.audioIn=t)):"video"===t.kind||"videoinput"===t.kind?(a.videoIn.push(e.translateDeviceInfo(t)),t.label===r&&(o.videoIn=t)):"audiooutput"===t.kind&&a.audioOut.push(e.translateDeviceInfo(t))}),e.model.set("availableDevices",a),t.resolve({available:a,selected:o})};return navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(s).catch(function(e){t.reject("Error in navigator.mediaDevices.enumerateDevices API")}):MediaStreamTrack.getSources?MediaStreamTrack.getSources(s):t.reject("Browser doesn't support MediaStreamTrack.getSources API"),t.promise},translateDeviceInfo:function(e){var t=e.id||e.deviceId;return"audiooutput"===e.kind&&(t=this.transformSpeakerId(t,!0)),{id:t,label:e.label,kind:e.kind,facing:e.facing,groupId:e.groupId}},transformSpeakerId:function(e,t){return t?e+"_speaker":(e&&-1!==e.indexOf("_speaker")&&(e=e.split("_speaker")[0]),e)},updateStream:function(e){i.isUndefined(e.remoteStream)||this.model.set("remoteStream",e.remoteStream)},muteStreams:function(e){var t=a.defer(),n=[];return i.isUndefined(e.localAudio)||n.push(this.muteLocalAudio(e.localAudio)),i.isUndefined(e.localVideo)||n.push(this.muteLocalVideo(e.localVideo)),i.isUndefined(e.remoteAudio)||n.push(this.muteRemoteAudio(e.remoteAudio)),i.isUndefined(e.remoteVideo)||n.push(this.muteRemoteVideo(e.remoteVideo)),a.all(n).then(function(){t.resolve()},function(){o.error("RTCLocalMediaManager: Failed to mute local/remote stream")}),t.promise},muteLocalAudio:function(e){var t=a.defer(),n=this.model.get("localAudioStream"),r=this.isAudioMuted(n);return i.isBoolean(e)&&r!==e?(i.isNull(n)||i.isUndefined(n)?o.warn("Local Audio stream is null, cannot mute/unmute local audio"):(o.debug("RTCLocalMediaManager: "+(e?"Muting ":"Unmuting ")+"local audio stream now"),n.getAudioTracks().forEach(function(t){t.enabled=!e}),this.model.set("localAudioMuted",e),o.debug("RTCLocalMediaManager: Local Audio ",e?"muted":"unmuted")),t.resolve(),t.promise):(o.debug("Local Audio is already "+(r?"muted.":"unmuted.")+" Ignoring the mute request."),t.resolve(),t.promise)},muteLocalVideo:function(e){var t=a.defer(),n=this.model.get("localVideoMuted");return i.isBoolean(e)&&n!==e?(e?this._stopLocalVideo(t):this._resumeLocalVideo(t),t.promise):(o.debug("Local Video is already "+(n?"muted.":"unmuted.")+" Ignoring the mute request."),t.resolve(),t.promise)},_stopLocalVideo:function(e){var t=null;t=this.model.get("localVideoStream"),i.isNull(t)||i.isUndefined(t)?o.warn("Local Video stream is null, cannot mute/unmute local video"):(o.debug("RTCLocalMediaManager: Stopping/Muting local video stream now"),t.getVideoTracks().forEach(function(e){"firefox"===g.browser?e.enabled=!1:e.stop()}),o.debug("RTCLocalMediaManager: Local Video muted")),this.model.set("localVideoMuted",!0),this.model.set("localVideoStream",null),e.resolve()},_resumeLocalVideo:function(e){var t=c.deepMergeObjects(this.cachedMediaConstraints,{audio:!1});if(this.model.set("localVideoMuted",!1),"firefox"===g.browser){var n=this.model.get("localVideoStream");i.isNull(n)||i.isUndefined(n)||n.getVideoTracks().forEach(function(e){e.enabled=!0}),e.resolve()}else this._startMedia(t,"local_stream").then(function(t){o.debug("RTCLocalMediaManager: Local Video unmuted"),e.resolve()},function(t){o.warn("RTCLocalMediaManager: Failed to get local video stream: "+t),e.resolve()})},muteRemoteAudio:function(e){var t=a.defer(),n=this.model.get("remoteStream");return i.isNull(n)||i.isUndefined(n)?o.warn("Remote stream is null, cannot mute/unmute remote audio"):(n.getAudioTracks().forEach(function(t){t.enabled=!e}),this.model.set("remoteAudioMuted",e)),t.resolve(),t.promise},muteRemoteVideo:function(e){var t=a.defer(),n=this.model.get("remoteStream");return i.isNull(n)||i.isUndefined(n)?o.warn("Remote stream is null, cannot mute/unmute remote video"):(n.getVideoTracks().forEach(function(t){t.enabled=!e}),this.model.set("remoteVideoMuted",e)),t.resolve(),t.promise},isAudioMuted:function(e){var t=!0;return i.isNull(e)||i.isUndefined(e)||e.getAudioTracks().forEach(function(e){t=t&&!e.enabled}),t},startVolumeMonitor:function(e,t){i.extend(this.config.volumeMonitoring,t);var n=e.clone();n.getAudioTracks().forEach(function(e){e.enabled=!0}),n.getVideoTracks().forEach(function(e){e.stop()}),this.volumeMonitor=m(n,t),this.volumeMonitor.monitoredStream=n,this.volumeMonitor.on("volume_change",this.volumeLevelChanged),o.debug("RTCLocalMediaManager: Started volume monitor")},volumeLevelChanged:function(e,t){var n=Math.abs(1-Math.abs(e/100));"number"==typeof n&&(n=parseFloat(n.toFixed(3)));var r=n<1?n:0;this.model.set("volumeLevel",r),this.checkIfSpeaking(e)},checkIfSpeaking:function(e){e>=this.config.volumeMonitoring.threshold?(this.vadCount++,this.vadCount>=7&&(this.vadCount=20)):(this.vadCount--,this.vadCount<7&&(this.vadCount=0)),this.model.set("isSpeaking",this.vadCount>=7)},stopVolumeMonitor:function(){i.isNull(this.volumeMonitor)||(o.debug("RTCLocalMediaManager: Stopping volume monitor"),this.volumeMonitor.monitoredStream&&(this.volumeMonitor.monitoredStream.getTracks().forEach(function(e){e.stop()}),this.volumeMonitor.monitoredStream=null),this.volumeMonitor.stop())},setSpeaker:function(e){var t=this,n=e.mediaElements,r=e.speakerId;i.each(n,function(e){e&&"function"==typeof e.setSinkId&&r&&e.setSinkId(t.transformSpeakerId(r,!1))}),r&&r!==this.model.get("selectedSpeaker")&&(this.model.set("selectedSpeaker",r),this.sendDeviceInfo())},detectCameraStatus:function(e){var t,n=this,r=a.defer(),i="local_stream"===e?this.model.get("localVideoStream"):this.model.get("previewStream");return i&&"function"==typeof i.getVideoTracks?(t=i.getVideoTracks()[0])?window.setTimeout(function(){var i="local_stream"===e&&n.model.get("localVideoMuted");"ended"!==t.readyState||i?r.resolve(u.GET_LOCAL_MEDIA_STATES.AVAILABLE):(o.warn("RTCLocalMediaManager: Camera feed is unavailable, faulty camera or its in use by another program"),r.resolve(u.GET_LOCAL_MEDIA_STATES.SOURCE_UNAVAILABLE))},500):(o.warn("RTCLocalMediaManager: Stream doesn't have any video tracks"),r.resolve(u.GET_LOCAL_MEDIA_STATES.SOURCE_UNAVAILABLE)):r.resolve(u.GET_LOCAL_MEDIA_STATES.DEVICES_NOT_FOUND),r.promise},detectDeviceChange:function(e,t){var n=this.hasMicPreferenceChanged(e,t),r=this.hasCameraPreferenceChanged(e,t);this.model.set("selectedCamera",this.getSourceId(t.video)),this.model.set("selectedMic",this.getSourceId(t.audio)),(n||r)&&this.sendDeviceInfo()},sendDeviceInfo:function(){if(this.isSignallingChannelReady){var e=this.model.get("selectedMic"),t=this.model.get("selectedCamera"),n=this.model.get("selectedSpeaker"),r=this.getDeviceLabel(e,"audioIn"),i=this.getDeviceLabel(t,"videoIn"),s=this.getDeviceLabel(n,"audioOut");o.debug("RTCLocalMediaManager: Devices in use, Mic - "+r+", Camera - "+i+", Speaker - "+s);var a=l.getInfoMsg({type:"deviceinfo",device:{input:{audio:r,video:i},output:{audio:s,video:"Default"}}});f.sendMsg(a),d.onBlueJayRequest(a)}},getDeviceLabel:function(e,t){var n=null,r=this.model.get("availableDevices");return i.each(r[t],function(t,r,i){t.id===e&&(n=t.label)}),n},onReceiveConnectResponse:function(){this.isSignallingChannelReady=!0},close:function(){this.stopMediaCapture(),this.isSignallingChannelReady=!1,this.model.clear().set(v.defaults)},stopMediaCapture:function(){this.stopLocalStreams(),this.stopPreviewStream(),this.stopLocalStreamClone(),this.cachedMediaConstraints.audio.deviceId=null,this.cachedMediaConstraints.video.deviceId=null}});e.exports=y},function(e,t,n){var r=n(2),i=(n(5),Backbone.Model.extend({defaults:{bluejayReqMap:{},bluejayKeepAlive:{},bluejayRespMap:{},requestCallbacks:{},bluejayMuteMsg:{},bluejayTokenMsg:{},connectResponseReceived:!1,callState:"idle"},addRequest:function(e,t){this.get("bluejayReqMap")[e]=t},updateRequest:function(e,t){this.get("bluejayReqMap")[e]=t},removeRequest:function(e){this.get("bluejayReqMap")[e]&&this.unset("bluejayReqMap"[e],{silent:!0})},addResponse:function(e,t){this.get("bluejayRespMap")[e]=t},getRequest:function(e){return this.get("bluejayReqMap")[e]},getResponse:function(e){return this.get("bluejayRespMap")[e]},addKeepAlive:function(e){this.set("bluejayKeepAlive",e)},addMuteMessage:function(e){this.set("bluejayMuteMsg",e)},addTokenMessage:function(e){this.set("bluejayTokenMsg",e)},getMuteMessage:function(){return this.get("bluejayMuteMsg")},getTokenMessage:function(){return this.get("bluejayTokenMsg")},getAllRequestMsgIds:function(){return r.keys(this.get("bluejayReqMap"))},resetTransaction:function(){this.set(this.defaults,{silent:!0})}}));e.exports=i},function(e,t,n){var r=n(123),i=n(59),o=n(125),s=n(60),a=n(137);function c(){if("undefined"==typeof window)return!1;if(!window.navigator.mozGetUserMedia)return!1;var e=window.navigator.userAgent.match(/Firefox\/(\d+)\./);return(e&&e.length>=1&&parseInt(e[1],10))<50}function u(e){s.call(this);var t,n=this.config={detectSpeakingEvents:!1,audioFallback:!1,media:{audio:!0,video:!0},harkOptions:null,logger:a};for(t in e)e.hasOwnProperty(t)&&(this.config[t]=e[t]);this.logger=n.logger,this._log=this.logger.log.bind(this.logger,"LocalMedia:"),this._logerror=this.logger.error.bind(this.logger,"LocalMedia:"),this.localStreams=[],this.localScreens=[],navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||this._logerror("Your browser does not support local media capture."),this._audioMonitors=[],this.on("localStreamStopped",this._stopAudioMonitor.bind(this)),this.on("localScreenStopped",this._stopAudioMonitor.bind(this))}r.inherits(u,s),u.prototype.start=function(e,t){var n=this,r=e||this.config.media;this.emit("localStreamRequested",r),navigator.mediaDevices.getUserMedia(r).then(function(e){if(r.audio&&n.config.detectSpeakingEvents&&n._setupAudioMonitor(e,n.config.harkOptions),n.localStreams.push(e),e.getTracks().forEach(function(t){t.addEventListener("ended",function(){(function(e){var t=!0;return e.getTracks().forEach(function(e){t="ended"===e.readyState&&t}),t})(e)&&n._removeStream(e)})}),n.emit("localStream",e),t)return t(null,e)}).catch(function(e){return n.config.audioFallback&&"NotFoundError"===e.name&&!1!==r.video?(r.video=!1,void n.start(r,t)):(n.emit("localStreamRequestFailed",r),t?t(e,null):void 0)})},u.prototype.stop=function(e){this.stopStream(e),this.stopScreenShare(e)},u.prototype.stopStream=function(e){var t=this;e?this.localStreams.indexOf(e)>-1&&(e.getTracks().forEach(function(e){e.stop()}),c()&&this._removeStream(e)):this.localStreams.forEach(function(e){e.getTracks().forEach(function(e){e.stop()}),c()&&t._removeStream(e)})},u.prototype.startScreenShare=function(e,t){var n=this;this.emit("localScreenRequested"),"function"!=typeof e||t||(t=e,e=null),o(e,function(e,r){if(e?n.emit("localScreenRequestFailed"):(n.localScreens.push(r),r.getTracks().forEach(function(e){e.addEventListener("ended",function(){var e=!0;r.getTracks().forEach(function(t){e="ended"===t.readyState&&e}),e&&n._removeStream(r)})}),n.emit("localScreen",r)),t)return t(e,r)})},u.prototype.stopScreenShare=function(e){var t=this;e?this.localScreens.indexOf(e)>-1&&(e.getTracks().forEach(function(e){e.stop()}),c()&&this._removeStream(e)):this.localScreens.forEach(function(e){e.getTracks().forEach(function(e){e.stop()}),c()&&t._removeStream(e)})},u.prototype.mute=function(){this._audioEnabled(!1),this.emit("audioOff")},u.prototype.unmute=function(){this._audioEnabled(!0),this.emit("audioOn")},u.prototype.pauseVideo=function(){this._videoEnabled(!1),this.emit("videoOff")},u.prototype.resumeVideo=function(){this._videoEnabled(!0),this.emit("videoOn")},u.prototype.pause=function(){this.mute(),this.pauseVideo()},u.prototype.resume=function(){this.unmute(),this.resumeVideo()},u.prototype._audioEnabled=function(e){this.localStreams.forEach(function(t){t.getAudioTracks().forEach(function(t){t.enabled=!!e})})},u.prototype._videoEnabled=function(e){this.localStreams.forEach(function(t){t.getVideoTracks().forEach(function(t){t.enabled=!!e})})},u.prototype.isAudioEnabled=function(){var e=!0;return this.localStreams.forEach(function(t){t.getAudioTracks().forEach(function(t){e=e&&t.enabled})}),e},u.prototype.isVideoEnabled=function(){var e=!0;return this.localStreams.forEach(function(t){t.getVideoTracks().forEach(function(t){e=e&&t.enabled})}),e},u.prototype._removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1?(this.localStreams.splice(t,1),this.emit("localStreamStopped",e)):(t=this.localScreens.indexOf(e))>-1&&(this.localScreens.splice(t,1),this.emit("localScreenStopped",e))},u.prototype._setupAudioMonitor=function(e,t){this._log("Setup audio");var n,r=i(e,t),o=this;r.on("speaking",function(){o.emit("speaking")}),r.on("stopped_speaking",function(){n&&clearTimeout(n),n=setTimeout(function(){o.emit("stoppedSpeaking")},1e3)}),r.on("volume_change",function(e,t){o.emit("volumeChange",e,t)}),this._audioMonitors.push({audio:r,stream:e})},u.prototype._stopAudioMonitor=function(e){var t=-1;this._audioMonitors.forEach(function(n,r){n.stream===e&&(t=r)}),t>-1&&(this._audioMonitors[t].audio.stop(),this._audioMonitors.splice(t,1))},e.exports=u},function(e,t,n){(function(e,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(c(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(e).replace(o,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])g(a)||!S(a)?s+=" "+a:s+=" "+c(a);return s},t.deprecate=function(n,i){if(b(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var s,a={};function c(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),f(r,e,r.depth)}function u(e,t){var n=c.styles[t];return n?"["+c.colors[n][0]+"m"+e+"["+c.colors[n][1]+"m":e}function l(e,t){return e}function f(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=f(e,i,r)),i}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(v(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),T(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(n);if(0===s.length){if(E(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(C(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return d(n)}var u,l="",S=!1,w=["{","}"];(h(n)&&(S=!0,w=["[","]"]),E(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return C(n)&&(l=" "+RegExp.prototype.toString.call(n)),_(n)&&(l=" "+Date.prototype.toUTCString.call(n)),T(n)&&(l=" "+d(n)),0!==s.length||S&&0!=n.length?r<0?C(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=S?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)k(t,String(s))?o.push(p(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))}),o}(e,n,r,a,s):s.map(function(t){return p(e,n,r,a,t,S)}),e.seen.pop(),function(e,t,n){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,l,w)):w[0]+l+w[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),k(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(n)?f(e,c.value,null):f(e,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return"number"==typeof e}function y(e){return"string"==typeof e}function b(e){return void 0===e}function C(e){return S(e)&&"[object RegExp]"===w(e)}function S(e){return"object"===i(e)&&null!==e}function _(e){return S(e)&&"[object Date]"===w(e)}function T(e){return S(e)&&("[object Error]"===w(e)||e instanceof Error)}function E(e){return"function"==typeof e}function w(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(b(s)&&(s=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(s)){var n=r.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){};return a[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=y,t.isSymbol=function(e){return"symbol"===i(e)},t.isUndefined=b,t.isRegExp=C,t.isObject=S,t.isDate=_,t.isError=T,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===i(e)||void 0===e},t.isBuffer=n(124);var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":"),[e.getDate(),R[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(0),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,n(1),n(12))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return e&&"object"===n(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){var r=n(41);e.exports=function(e,t){var n,i=2===arguments.length,o=i?t:e;"chrome"===r.browserDetails.browser?sessionStorage.getScreenMediaJSExtensionId?chrome.runtime.sendMessage(sessionStorage.getScreenMediaJSExtensionId,{type:"getScreen",id:1},null,function(t){if(t&&""!==t.sourceId)(e=i&&e||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3}}}).video.mandatory.chromeMediaSourceId=t.sourceId,window.navigator.mediaDevices.getUserMedia(e).then(function(e){o(null,e)}).catch(function(e){o(e)});else{var n=new Error("NavigatorUserMediaError");n.name="NotAllowedError",o(n)}}):window.cefGetScreenMedia?window.cefGetScreenMedia(function(t){if(t)(e=i&&e||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3}}}).video.mandatory.chromeMediaSourceId=t,window.navigator.mediaDevices.getUserMedia(e).then(function(e){o(null,e)}).catch(function(e){o(e)});else{var n=new Error("cefGetScreenMediaError");n.name="CEF_GETSCREENMEDIA_CANCELED",o(n)}}):((n=new Error("Screensharing is not supported")).name="NotSupportedError",o(n)):"firefox"===r.browserDetails.browser&&r.browserDetails.version>=33?(e=i&&e||{video:{mediaSource:"window"}},window.navigator.mediaDevices.getUserMedia(e).then(function(e){o(null,e)}).catch(function(e){o(e)})):"edge"===r.browserDetails.browser&&"getDisplayMedia"in window.navigator?window.navigator.getDisplayMedia({video:!0}).then(function(e){o(null,e)}).catch(function(e){o(e)}):((n=new Error("Screensharing is not supported")).name="NotSupportedError",o(n))}},function(e,t,n){"use strict";var r=n(10);e.exports=function(e,t){var i=e&&e.window,o={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);var a=r.log,c=r.detectBrowser(i),u=n(127)||null,l=n(129)||null,f=n(133)||null,d=n(135)||null,p=n(136)||null,h={browserDetails:c,commonShim:p,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(c.browser){case"chrome":if(!u||!u.shimPeerConnection||!o.shimChrome)return a("Chrome shim is not included in this adapter release."),h;a("adapter.js shimming chrome."),h.browserShim=u,p.shimCreateObjectURL(i),u.shimGetUserMedia(i),u.shimMediaStream(i),u.shimSourceObject(i),u.shimPeerConnection(i),u.shimOnTrack(i),u.shimAddTrackRemoveTrack(i),u.shimGetSendersWithDtmf(i),u.shimSenderReceiverGetStats(i),u.fixNegotiationNeeded(i),p.shimRTCIceCandidate(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;case"firefox":if(!f||!f.shimPeerConnection||!o.shimFirefox)return a("Firefox shim is not included in this adapter release."),h;a("adapter.js shimming firefox."),h.browserShim=f,p.shimCreateObjectURL(i),f.shimGetUserMedia(i),f.shimSourceObject(i),f.shimPeerConnection(i),f.shimOnTrack(i),f.shimRemoveStream(i),f.shimSenderGetStats(i),f.shimReceiverGetStats(i),f.shimRTCDataChannel(i),p.shimRTCIceCandidate(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;case"edge":if(!l||!l.shimPeerConnection||!o.shimEdge)return a("MS edge shim is not included in this adapter release."),h;a("adapter.js shimming edge."),h.browserShim=l,p.shimCreateObjectURL(i),l.shimGetUserMedia(i),l.shimPeerConnection(i),l.shimReplaceTrack(i),l.shimGetDisplayMedia(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;case"safari":if(!d||!o.shimSafari)return a("Safari shim is not included in this adapter release."),h;a("adapter.js shimming safari."),h.browserShim=d,p.shimCreateObjectURL(i),d.shimRTCIceServerUrls(i),d.shimCreateOfferLegacy(i),d.shimCallbacksAPI(i),d.shimLocalStreamsAPI(i),d.shimRemoteStreamsAPI(i),d.shimTrackEventTransceiver(i),d.shimGetUserMedia(i),p.shimRTCIceCandidate(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;default:a("Unsupported browser!")}return h}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(10),o=i.log;function s(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){e.forEach(function(n){n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(function(i){i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach(function(n){e(t,t.get(n),r)})}))}(e,n,i)})}),i}e.exports={shimGetUserMedia:n(128),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"!==r(e)||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)i.wrapPeerConnectionEvent(e,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return n._ontrackpoly||(n._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.track.id}):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}),t.stream.getTracks().forEach(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===r.id}):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})},n.addEventListener("addstream",n._ontrackpoly)),t.apply(n,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"===r(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;n._senders=n._senders||[],o.apply(n,[e]),e.getTracks().forEach(function(e){n._senders.push(t(n,e))})};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],s.apply(t,[e]),e.getTracks().forEach(function(e){var n=t._senders.find(function(t){return t.track===e});n&&t._senders.splice(t._senders.indexOf(n),1)})}}else if("object"===r(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(e){if("object"===r(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(e,[]);return n.forEach(function(t){t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return s(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var o=e.RTCPeerConnection.prototype.getReceivers;o&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=o.apply(e,[]);return t.forEach(function(t){t._pc=e}),t}),i.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return s(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,i=arguments[0];return this.getSenders().forEach(function(e){e.track===i&&(t?r=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===i&&(n?r=!0:n=e),e.track===i}),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return a.apply(this,arguments)}}}},shimSourceObject:function(e){var t=e&&e.URL;"object"===r(e)&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var n=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)}),e.addEventListener("removetrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)})):this.src=""}}))},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var r=t.getSenders();n.apply(this,arguments);var i=t.getSenders().filter(function(e){return-1===r.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]}),i.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){if(e.RTCPeerConnection){var t=i.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return this.shimAddTrackRemoveTrackWithNative(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{},t.getTracks().forEach(function(e){if(n.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!n._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());n._streams[t.id]=i,n._reverseStreams[i.id]=t,t=i}r.apply(n,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},o.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===r.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(r.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{};var o=r._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then(function(){r.dispatchEvent(new Event("negotiationneeded"))});else{var s=new e.MediaStream([t]);r._streams[n.id]=s,r._reverseStreams[s.id]=n,r.addStream(s)}return r.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(e,[function(n){var r=c(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(e,arguments).then(function(t){return c(e,t)})}});var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===n))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");n._streams=n._streams||{},Object.keys(n._streams).forEach(function(r){n._streams[r].getTracks().find(function(t){return e.track===t})&&(t=n._streams[r])}),t&&(1===t.getTracks().length?n.removeStream(n._reverseStreams[t.id]):t.removeTrack(e.track),n.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}},shimPeerConnection:function(e){var t=i.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=function(t,n){return o("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,n)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}})),e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,r){var i=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return n.apply(this,arguments);if(0===n.length&&(0===arguments.length||"function"!=typeof arguments[0]))return n.apply(this,[]);var s=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},a=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return n.apply(this,[function(e){o[1](a(s(e)))},arguments[0]])}return new Promise(function(e,t){n.apply(i,[function(t){e(a(s(t)))},t])}).then(t,r)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,r=new Promise(function(r,i){n.apply(t,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===r(arguments[0])){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){n.apply(e,[r,i,t])})}return n.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var s=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?s.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},fixNegotiationNeeded:function(e){i.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e})},shimGetDisplayMedia:function(e,t){!e.navigator||!e.navigator.mediaDevices||"getDisplayMedia"in e.navigator.mediaDevices||("function"==typeof t?(e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})},e.navigator.getDisplayMedia=function(t){return i.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),e.navigator.mediaDevices.getDisplayMedia(t)}):console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(10),o=i.log;e.exports=function(e){var t=i.detectBrowser(e),n=e&&e.navigator,s=function(e){if("object"!==r(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var s={};"number"==typeof i.ideal?(s[o("min",n)]=i.ideal,t.optional.push(s),(s={})[o("max",n)]=i.ideal,t.optional.push(s)):(s[o("",n)]=i.ideal,t.optional.push(s))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===r(e.audio)){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=s(e.audio)}if(e&&"object"===r(e.video)){var c=e.video.facingMode;c=c&&("object"===r(c)?c:{ideal:c});var u,l=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l))if(delete e.video.facingMode,"environment"===c.exact||"environment"===c.ideal?u=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(u=["front"]),u)return n.mediaDevices.enumerateDevices().then(function(t){var n=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return u.some(function(t){return-1!==e.label.toLowerCase().indexOf(t)})});return!n&&t.length&&-1!==u.indexOf("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=s(e.video),o("chrome: "+JSON.stringify(e)),i(e)});e.video=s(e.video)}return o("chrome: "+JSON.stringify(e)),i(e)},c=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};n.getUserMedia=function(e,t,r){a(e,function(e){n.webkitGetUserMedia(e,t,function(e){r&&r(c(e))})})};var u=function(e){return new Promise(function(t,r){n.getUserMedia(e,t,r)})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:u,enumerateDevices:function(){return new Promise(function(t){var n={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:n[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),n.mediaDevices.getUserMedia){var l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return a(e,function(e){return l(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(c(e))})})}}else n.mediaDevices.getUserMedia=function(e){return u(e)};void 0===n.mediaDevices.addEventListener&&(n.mediaDevices.addEventListener=function(){o("Dummy mediaDevices.addEventListener called.")}),void 0===n.mediaDevices.removeEventListener&&(n.mediaDevices.removeEventListener=function(){o("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,n){"use strict";var r=n(10),i=n(130),o=n(131);e.exports={shimGetUserMedia:n(132),shimPeerConnection:function(e){var t=r.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var s=o(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=i(e.iceServers)),new s(e)},e.RTCPeerConnection.prototype=s.prototype},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(e,t){if("getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&!("getDisplayMedia"in e.navigator.mediaDevices)){var n=e.navigator.getDisplayMedia;e.navigator.mediaDevices.getDisplayMedia=function(t){return n.call(e.navigator,t)},e.navigator.getDisplayMedia=function(t){return r.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),n.call(e.navigator,t)}}}}},function(e,t,n){"use strict";var r=n(10);e.exports=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&r.deprecated("RTCIceServer.url","RTCIceServer.urls");var o="string"==typeof i;return o&&(i=[i]),i=i.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=o?i[0]:i,!!i.length}})}},function(e,t,n){"use strict";var r=n(61);function i(e,t,n,i,o){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),s=r(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function s(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout(function(){t._dispatchEvent("track",o)})}var l=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){i[e]=o[e].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)}),delete e.url,e.urls=i?r[0]:r,!!r.length}})}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(e){return e.track===t}))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},l.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},l.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},l.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var u=r.writeCandidate(a);s.candidate=Object.assign(s.candidate,r.parseCandidate(u)),s.candidate.candidate=u,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var l=r.getMediaSections(i._localDescription.sdp);l[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+l.join("");var f=i.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",s),f&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout(function(){s.forEach(function(e){o.onlocalcandidate(e)})},0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,i){var s=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),i&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},l.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n}),i.transceivers.forEach(function(e,t){i._gather(e.mid,t)});else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var a=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var s=i.transceivers[t],c=s.iceGatherer,u=s.iceTransport,l=s.dtlsTransport,f=s.localCapabilities,d=s.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length)&&!s.rejected){var p=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);a&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===u.state&&u.start(c,p,a?"controlling":"controlled"),"new"===l.state&&l.start(h));var m=o(f,d);i._transceive(s,m.codecs.length>0,!1)}})}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(i){var l=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!s("setRemoteDescription",i.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+l.signalingState));var f={};l.remoteStreams.forEach(function(e){f[e.id]=e});var d=[],p=r.splitSections(i.sdp),h=p.shift(),m=r.matchPrefix(h,"a=ice-lite").length>0,g=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=g;var v=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!v&&v.substr(14).split(" ").indexOf("trickle")>=0,p.forEach(function(s,c){var u=r.splitLines(s),p=r.getKind(s),v=r.isRejected(s)&&0===r.matchPrefix(s,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],b=r.getDirection(s,h),C=r.parseMsid(s),S=r.getMid(s)||r.generateIdentifier();if(v||"application"===p&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))l.transceivers[c]={mid:S,kind:p,protocol:y,rejected:!0};else{var _,T,E,w,x,R,k,A,I;!v&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(p,!0));var M,P,O=r.parseRtpParameters(s);v||(M=r.getIceParameters(s,h),(P=r.getDtlsParameters(s,h)).role="client"),k=r.parseRtpEncodingParameters(s);var N=r.parseRtcpParameters(s),j=r.matchPrefix(s,"a=end-of-candidates",h).length>0,D=r.matchPrefix(s,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!v&&g&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==i.type||v){if("answer"===i.type&&!v){T=(_=l.transceivers[c]).iceGatherer,E=_.iceTransport,w=_.dtlsTransport,x=_.rtpReceiver,R=_.sendEncodingParameters,A=_.localCapabilities,l.transceivers[c].recvEncodingParameters=k,l.transceivers[c].remoteCapabilities=O,l.transceivers[c].rtcpParameters=N,D.length&&"new"===E.state&&(!m&&!j||g&&0!==c?D.forEach(function(e){a(_.iceTransport,e)}):E.setRemoteCandidates(D)),g&&0!==c||("new"===E.state&&E.start(T,M,"controlling"),"new"===w.state&&w.start(P)),!o(_.localCapabilities,_.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&_.sendEncodingParameters[0].rtx&&delete _.sendEncodingParameters[0].rtx,l._transceive(_,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!x||"sendrecv"!==b&&"sendonly"!==b?delete _.rtpReceiver:(I=x.track,C?(f[C.stream]||(f[C.stream]=new e.MediaStream),n(I,f[C.stream]),d.push([I,x,f[C.stream]])):(f.default||(f.default=new e.MediaStream),n(I,f.default),d.push([I,x,f.default])))}}else{(_=l.transceivers[c]||l._createTransceiver(p)).mid=S,_.iceGatherer||(_.iceGatherer=l._createIceGatherer(c,g)),D.length&&"new"===_.iceTransport.state&&(!j||g&&0!==c?D.forEach(function(e){a(_.iceTransport,e)}):_.iceTransport.setRemoteCandidates(D)),A=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(A.codecs=A.codecs.filter(function(e){return"rtx"!==e.name})),R=_.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var L,F=!1;if("sendrecv"===b||"sendonly"===b){if(F=!_.rtpReceiver,x=_.rtpReceiver||new e.RTCRtpReceiver(_.dtlsTransport,p),F)I=x.track,C&&"-"===C.stream||(C?(f[C.stream]||(f[C.stream]=new e.MediaStream,Object.defineProperty(f[C.stream],"id",{get:function(){return C.stream}})),Object.defineProperty(I,"id",{get:function(){return C.track}}),L=f[C.stream]):(f.default||(f.default=new e.MediaStream),L=f.default)),L&&(n(I,L),_.associatedRemoteMediaStreams.push(L)),d.push([I,x,L])}else _.rtpReceiver&&_.rtpReceiver.track&&(_.associatedRemoteMediaStreams.forEach(function(t){var n,r,i=t.getTracks().find(function(e){return e.id===_.rtpReceiver.track.id});i&&(n=i,(r=t).removeTrack(n),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:n})))}),_.associatedRemoteMediaStreams=[]);_.localCapabilities=A,_.remoteCapabilities=O,_.rtpReceiver=x,_.rtcpParameters=N,_.sendEncodingParameters=R,_.recvEncodingParameters=k,l._transceive(l.transceivers[c],!1,F)}}}),void 0===l._dtlsRole&&(l._dtlsRole="offer"===i.type?"active":"passive"),l._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(f).forEach(function(t){var n=f[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout(function(){l._dispatchEvent("addstream",r)})}d.forEach(function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])})}}),d.forEach(function(e){e[2]||u(l,e[0],e[1],[])}),e.setTimeout(function(){l&&l.transceivers&&l.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter(function(e){return"audio"===e.kind}).length,s=n.transceivers.filter(function(e){return"video"===e.kind}).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)});o>0||s>0;)o>0&&(n._createTransceiver("audio"),o--),s>0&&(n._createTransceiver("video"),s--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(i,o){var s=i.track,a=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name})),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),u.headerExtensions.forEach(function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var l=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=u,i.sendEncodingParameters=l}),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))});var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var s=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(s+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,r){if(!(r+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}});var u=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(i,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){s=u;break}var l=n.transceivers[s];if(!l)return o(c("OperationError","Can not add ICE candidate"));if(l.rejected)return i();var f=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===f.protocol&&(0===f.port||9===f.port))return i();if(f.component&&1!==f.component)return i();if((0===s||s>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!a(l.iceTransport,f))return o(c("OperationError","Can not add ICE candidate"));var d=e.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[s]+="a="+(f.type?d:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);i()})},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])}),t})}}});var f=["createOffer","createAnswer"];return f.forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(f=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),l}},function(e,t,n){"use strict";e.exports=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(10);e.exports={shimGetUserMedia:n(134),shimOnTrack:function(e){"object"!==r(e)||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.transceiver={receiver:n.receiver},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),"object"===r(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"===r(e)&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(e){var t=i.detectBrowser(e);if("object"===r(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(n,r){if(t.version<38&&n&&n.iceServers){for(var i=[],o=0;o<n.iceServers.length;o++){var s=n.iceServers[o];if(s.hasOwnProperty("urls"))for(var a=0;a<s.urls.length;a++){var c={url:s.urls[a]};0===s.urls[a].indexOf("turn")&&(c.username=s.username,c.credential=s.credential),i.push(c)}else i.push(n.iceServers[o])}n.iceServers=i}return new e.mozRTCPeerConnection(n,r)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,r){return s.apply(this,[e||null]).then(function(e){if(t.version<48&&(e=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t}(e)),t.version<53&&!n)try{e.forEach(function(e){e.type=o[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,n){e.set(n,Object.assign({},t,{type:o[t.type]||t.type}))})}return e}).then(n,r)}}},shimSenderGetStats:function(e){if("object"===r(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(e,[]);return n.forEach(function(t){t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},shimReceiverGetStats:function(e){if("object"===r(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(e,[]);return n.forEach(function(t){t._pc=e}),n}),i.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;i.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(n){n.track&&-1!==e.getTracks().indexOf(n.track)&&t.removeTrack(n)})})},shimRTCDataChannel:function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},shimGetDisplayMedia:function(e,t){!e.navigator||!e.navigator.mediaDevices||"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)},e.navigator.getDisplayMedia=function(t){return i.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),e.navigator.mediaDevices.getDisplayMedia(t)})}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(10),o=i.log;e.exports=function(e){var t=i.detectBrowser(e),n=e&&e.navigator,s=e&&e.MediaStreamTrack,a=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,i,s){var c=function(e){if("object"!==r(e)||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"===r(e[n])?e[n]:{ideal:e[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof i.ideal?o[n]={min:i.ideal,max:i.ideal}:o[n]=i.ideal,e.advanced.push(o),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(o("spec: "+JSON.stringify(e)),e.audio&&(e.audio=c(e.audio)),e.video&&(e.video=c(e.video)),o("ff37: "+JSON.stringify(e))),n.mozGetUserMedia(e,i,function(e){s(a(e))})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:function(e){return new Promise(function(t,n){c(e,t,n)})},addEventListener:function(){},removeEventListener:function(){}}),n.mediaDevices.enumerateDevices=n.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},t.version<41){var u=n.mediaDevices.enumerateDevices.bind(n.mediaDevices);n.mediaDevices.enumerateDevices=function(){return u().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(t.version<49){var l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return l(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(a(e))})}}if(!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var f=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},d=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===r(e)&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),f(e.audio,"autoGainControl","mozAutoGainControl"),f(e.audio,"noiseSuppression","mozNoiseSuppression")),d(e)},s&&s.prototype.getSettings){var p=s.prototype.getSettings;s.prototype.getSettings=function(){var e=p.apply(this,arguments);return f(e,"mozAutoGainControl","autoGainControl"),f(e,"mozNoiseSuppression","noiseSuppression"),e}}if(s&&s.prototype.applyConstraints){var h=s.prototype.applyConstraints;s.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===r(e)&&(e=JSON.parse(JSON.stringify(e)),f(e,"autoGainControl","mozAutoGainControl"),f(e,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[e])}}}n.getUserMedia=function(e,r,o){if(t.version<44)return c(e,r,o);i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(r,o)}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(10);e.exports={shimLocalStreamsAPI:function(e){if("object"===r(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach(function(n){n.id===e&&(t=n)}),this._remoteStreams&&this._remoteStreams.forEach(function(n){n.id===e&&(t=n)}),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var n=this;e.getTracks().forEach(function(r){t.call(n,r,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,n){return n&&(this._localStreams?-1===this._localStreams.indexOf(n)&&this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var n=this,r=e.getTracks();this.getSenders().forEach(function(e){-1!==r.indexOf(e.track)&&n.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){if("object"===r(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}})}),t.apply(e,arguments)}}},shimCallbacksAPI:function(e){if("object"===r(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};var c=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=c}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,r.push(s)):r.push(e.iceServers[o])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"===r(e)&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var n=this;if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=n.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind});!1===e.offerToReceiveAudio&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveAudio||r||n.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var i=n.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind});!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection("sendonly"):"recvonly"===i.direction&&i.setDirection("inactive"):!0!==e.offerToReceiveVideo||i||n.addTransceiver("video")}return t.apply(n,arguments)}}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(61),o=n(10);e.exports={shimRTCIceCandidate:function(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===r(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),o=i.parseCandidate(e.candidate),s=Object.assign(n,o);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,o.wrapPeerConnectionEvent(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"===r(e)&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var n=t.createObjectURL.bind(t),i=t.revokeObjectURL.bind(t),s=new Map,a=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++a;return s.set(t,e),o.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return n(e)},t.revokeObjectURL=function(e){i(e),s.delete(e)};var c=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return c.get.apply(this)},set:function(e){return this.srcObject=s.get(e)||null,c.set.apply(this,[e])}});var u=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=s.get(arguments[1])||null),u.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=o.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,r,o,s;if(this._sctp=null,o=arguments[0],(s=i.splitSections(o.sdp)).shift(),s.some(function(e){var t=i.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})){var a,c=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),u=(e=c,r=65536,"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r),l=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var o=i.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],c);a=0===u&&0===l?Number.POSITIVE_INFINITY:0===u||0===l?Math.max(u,l):Math.min(u,l);var f={};Object.defineProperty(f,"maxMessageSize",{get:function(){return a}}),this._sctp=f}return n.apply(this,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},o.wrapPeerConnectionEvent(e,"datachannel",function(e){return n(e.channel,e.target),e})}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}}},function(e,t){for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),r=n.length,i=function(){},o={};r--;)o[n[r]]=i;e.exports=o},function(e,t,n){var r=n(41);e.exports=function(e,t,n){var i,o=t,s={autoplay:!0,mirror:!1,muted:!1,audio:!1,disableContextMenu:!1};if(n)for(i in n)s[i]=n[i];return o?"audio"===o.tagName.toLowerCase()&&(s.audio=!0):o=document.createElement(s.audio?"audio":"video"),s.disableContextMenu&&(o.oncontextmenu=function(e){e.preventDefault()}),s.autoplay&&(o.autoplay="autoplay"),s.muted&&(o.muted=!0),!s.audio&&s.mirror&&["","moz","webkit","o","ms"].forEach(function(e){var t=e?e+"Transform":"transform";o.style[t]="scaleX(-1)"}),"safari"===r.browserDetails.browser&&o.setAttribute("playsinline",!0),o.srcObject=e,o}},function(e,t,n){var r=n(8),i=n(4),o=n(2),s=n(5),a=n(3),c=n(140),u=n(13),l=n(14),f=n(62),d=n(23),p=n(28),h=n(33),m=n(64),g=n(18),v=n(9),y=i.Class({config:{keepAliveMaxFailures:6,keepAliveConnectorfailure:2,sdpParams:{videoRecvBitrate:1200}},peer:null,offerInProgress:!1,createOfferQueued:!1,keepAliveTimer:null,keepAliveFailedAttempts:0,isSignallingChannelReady:!1,constructor:function(e){o.bindAll(this),o.extend(this.config,e),o.extend(this,s.Events),this.BJ_CALLSTATES=l.BJ_CALLSTATES,this.WEBRTC_STATES=l.WEBRTC_STATES,p.setupMessageParser(this.getSignallingCallbacks()),this.iceCandidates=[],this.isSignalingChannelReady=!1,h.on("receivedConnectResponse",this.onReceiveConnectResponse),h.on("receivedKeepAliveResponse",this.onKeepAliveResponse)},createPeer:function(e){this.peer=new c(e),this.peer.on("iceCandidate",this.onNewIceCandiate),this.peer.model.on("change:iceGatheringState",this.onIceGatheringStateChanged),this.peer.model.on("change:iceConnectionState",this.onIceConnectionStateChange),this.peer.model.on("change:signalingState",this.onSignalingStateChange)},getPeer:function(){return this.peer},updateMeetingParams:function(e){if(this.meetingParams=e,this.meetingParams.maxBandwidth){var t=window.parseInt(this.meetingParams.maxBandwidth,10);t>=100&&t<=4096?(this.config.sdpParams.videoRecvBitrate=this.meetingParams.maxBandwidth,a.debug("RTCPeerConnectionManager :: Updating max session bitrate to - "+this.config.sdpParams.videoRecvBitrate)):a.debug("RTCPeerConnectionManager :: received invalid max bitrate "+t+", using default value")}else a.debug("RTCPeerConnectionManager :: using default max session bitrate - "+this.config.sdpParams.videoRecvBitrate)},signallingChannelCreated:function(){this.initKeepAliveMessage(),this.sendKeepAliveMessage(!1),this.isSignalingChannelReady=!0,this.enqueueIceCandidates()},initiateCall:function(e,t){var n=this;this.iceCandidates=[],this.createOffer(e).then(function(e){var t=d.getCurrentCallState();t===n.BJ_CALLSTATES.CONNECTING||t===n.BJ_CALLSTATES.INITIALISING||t===n.BJ_CALLSTATES.IDLE?n.sendConnectMessage(e):t!==n.BJ_CALLSTATES.RECONNECTING&&t!==n.BJ_CALLSTATES.REINITIALISING||n.sendUpdateMessage(e)},function(e){throw a.error("RTCPeerConnectionManager: Error while creating offerSdp, reconnecting the call"),d.callDisconnected(g.DISCONNECT_REASONS.SIG_CHANNEL_CLOSED),e})},sendIceCandidate:function(e){if(e){"firefox"===v.browser&&("sdparta_0"===e.sdpMid?e.sdpMid="audio":"sdparta_1"!==e.sdpMid&&"sdparta_2"!==e.sdpMid||(e.sdpMid="video",e.sdpMLineIndex=1));var t=u.getIceCandidateMessage(e);p.sendMsg(t),h.onBlueJayRequest(t)}},enqueueIceCandidates:function(){var e=this;e.iceCandidates.forEach(function(t){e.sendIceCandidate(t)})},onNewIceCandiate:function(e,t){!1===this.isSignalingChannelReady?this.iceCandidates.push(t):this.sendIceCandidate(t)},onIceGatheringStateChanged:function(e){d.iceGatheringStateChange(e.get("iceGatheringState"))},onIceConnectionStateChange:function(e){d.iceConnectionStateChange(e.get("iceConnectionState"))},onSignalingStateChange:function(e){d.signalingStateChange(e.get("signalingState"))},handleResponseMessage:function(e){return this.getPeer().handleResponseMessage(e)},handleErrorMessage:function(e){return this.getPeer().handleErrorMessage(e)},handleNotificationMessage:function(e){return this.getPeer().handleNotificationMessage(e)},handleRequestMessage:function(e){var t=u.METHODS,n=this.getPeer();switch(e.method){case t.CONNECT:return this.onConnect(n,e);case t.ANSWER:return this.onAnswer(n,e);case t.UPDATE:return this.onUpdate(n,e);case t.DISCONNECT:return this.onDisconnect(n,e);case t.KEEPALIVE:return this.onKeepAlive(n,e);case t.ICE:return this.onIceCandidate(n,e);default:a.error("RTCPeerConnectionManager: Method received in message: "+e.method+" is not supported.")}},onConnect:function(e,t){return e.handleOffer(t)},onAnswer:function(e,t){var n=this;return t.params.sessionDescription.sdp=f.maybeSetVideoReceiveBitRate(t.params.sessionDescription.sdp,n.config.sdpParams),e.handleAnswer(t).then(function(){n.offerInProgress=!1,n.createOfferQueued&&(a.debug("RTCPeerConnectionManager: Processing previously Queued 'update offer' request"),n.createUpdateOffer(),n.createOfferQueued=!1)})},onUpdate:function(e,t){return e.handleUpdate(t)},onDisconnect:function(e,t){return e.handleDisconnect(t)},onKeepAlive:function(e,t){return e.handleKeepAlive(t)},onIceCandidate:function(e,t){return e.handleIceCandidate(t.params.iceCandidate)},addPeerStream:function(e){var t=this.getPeer();return t?(t.addStream(e),this.createUpdateOffer(),!0):(a.warn("RTCPeerConnectionManager: RTCPeer does not exist, ignoring addStream API on it"),!1)},updatePeerStream:function(e){var t=this.getPeer();if(!t)return a.warn("RTCPeerConnectionManager: RTCPeer does not exist, ignoring updatePeerStream API on it"),!1;o.isUndefined(e.newAudioStream)||o.isNull(e.newAudioStream)||("firefox"===v.browser?t.replaceTrack("audio",e.newAudioStream):(t.removeAudioStream(),t.addStream(e.newAudioStream))),o.isUndefined(e.newVideoStream)||o.isNull(e.newVideoStream)||("firefox"===v.browser?t.replaceTrack("video",e.newVideoStream):(t.removeVideoStream(),t.addStream(e.newVideoStream))),"firefox"!==v.browser&&this.createUpdateOffer()},updateContentStream:function(e){this.getPeer().replaceTrack("content",e)},removePeerStream:function(e){var t=this.getPeer();return t?(t.removeStream(e),this.createUpdateOffer(),!0):(a.warn("RTCPeerConnectionManager: RTCPeer does not exist, ignoring removeStream API on it"),!1)},createUpdateOffer:function(e){var t=this;!1!==this.isSignallingChannelReady?this.createOffer(e).then(function(e){t.sendUpdateMessage(e)},function(e){a.error('RTCPeerConnectionManager: RTCPeer failed to create "updated" offer')}):this.createOfferQueued=!0},createOffer:function(e){var t=this.getPeer(),n=this,i=r.defer(),o=d.getCurrentCallState();return this.offerInProgress?(this.createOfferQueued=!0,a.debug("RTCPeerConnectionManager: Queing 'update offer' request. Current call state: ",o)):(n.offerInProgress=!0,t.createOffer(e).then(function(e){e.sdp=f.maybeSetVideoReceiveBitRate(e.sdp,n.config.sdpParams),e.sdp=f.maybeSetTrickleIceAttr(e.sdp),i.resolve(e)},function(e){n.offerInProgress=!1,i.reject(e)})),i.promise},sendConnectMessage:function(e){var t=u.getConnectMessage({sessionId:this.meetingParams.sessionId,endpointProperties:this.meetingParams.endpointDetails,sessionDescription:e,streamInfo:e.streamInfo,bundlingPolicy:this.peer.bundlePolicy});h.onBlueJayRequest(t),p.sendMsg(t)},sendUpdateMessage:function(e){var t=u.getUpdateMessage({sessionDescription:e,streamInfo:e.streamInfo});h.onBlueJayRequest(t),p.sendMsg(t)},sendKeepAliveMessage:function(e){if(!e||this.keepAliveFailedAttempts>=this.config.keepAliveMaxFailures-1){var t=u.getKeepaliveMessage();h.onKeepaliveRequest(t.id),p.sendMsg(t)}},getSignallingCallbacks:function(){return{request:this.onRequestMessage,response:this.onResponseMessage,error:this.onErrorMessage,notification:this.onNotificationMessage,invalidMessage:this.onInvalidMessage}},onRequestMessage:function(e){var t=u.getSuccessResponse(e.id);o.isUndefined(h.lookupOutgoingResponse(e.id))?e.method===u.METHODS.TOKEN?(m.handleTokenMessage(e),p.sendMsg(t)):this.handleRequestMessage(e).then(function(n){p.sendMsg(t),h.onOutgoingBlueJayResponse(e.id,t),"disconnect"===e.method&&d.callDisconnected(e.params)},function(t){a.debug("RTCPeerConnectionManager :: Error while handling request message "+t);var n=u.getErrorResponse(e.id,g.SIGNALING_ERRORS.BAD_REQUEST);p.sendMsg(n)}):p.sendMsg(t)},onResponseMessage:function(e){this.handleResponseMessage(e),h.onIncomingBlueJayResponse(e.id)},onErrorMessage:function(e){this.handleErrorMessage(e),e.error.code!==g.SIGNALING_ERRORS.METHOD_NOT_IMPLEMENTED.code?d.callDisconnected(g.DISCONNECT_REASONS.TRANSPORT_FAIL):a.warn("RTCPeerConnectionManager :: Method not Implemented, Message :: "+JSON.stringify(h.getRequestMessage(e.id)))},onNotificationMessage:function(e){this.handleNotificationMessage(e)},onInvalidMessage:function(e,t){var n=u.getErrorResponse(e.id,t);p.sendMsg(n)},initKeepAliveMessage:function(){var e=this;e.keepAliveTimer=setInterval(function(){"finished"===h.getKeepaliveMessageState()?(e.sendKeepAliveMessage(!1),e.keepAliveFailedAttempts=0):(e.keepAliveFailedAttempts++,e.keepAliveFailedAttempts==e.config.keepAliveConnectorfailure&&p.WS_STATES===l.WS_STATES.CONNECTED||e.keepAliveFailedAttempts>=e.config.keepAliveMaxFailures?(a.warn("RTCPeerConnectionManager: KeepAlive timeout has occurred, call will need to be reconnected!!"),d.callDisconnected(g.DISCONNECT_REASONS.KEEPALIVE_TIMEOUT)):e.sendKeepAliveMessage(!1))},h.config.keepaliveTimeout)},stopKeepAliveMessages:function(){this.keepAliveFailedAttempts=0,clearInterval(this.keepAliveTimer)},onReceiveConnectResponse:function(){this.isSignallingChannelReady=!0},onKeepAliveResponse:function(){this.keepAliveFailedAttempts=0},reset:function(){this.close()},close:function(){var e=this.getPeer();this.stopKeepAliveMessages(),this.createOfferQueued=!1,this.offerInProgress=!1,this.isSignalingChannelReady=!1,e&&e.close()}});e.exports=y},function(e,t,n){var r=n(8),i=n(4),o=n(2),s=n(5),a=n(3),c=(n(41),n(18)),u=n(13),l=n(141),f=n(14),d=n(22),p=n(143),h=n(23),m=n(62),g=n(144),v=n(9),y=i.Class({iceRestartTimer:null,iceRestartTimeout:1e4,iceConnectivityTimeout:2e4,iceConnectivityTimer:null,numIceCandidates:0,constructor:function(e){o.bindAll(this),o.extend(this,s.Events),this.isFirefox="firefox"===v.browser,this.ICE_CONNECTION_STATES=f.WEBRTC_STATES.iceConnectionState;var t=d.deepMergeObjects(p.getDefaults(),e.peerConfig);this.model=new p(t),this.isConnectionLost=!1,this.oldPktCount=0,this.maxPktRecvCounter=5,this.pktRecvCounter=this.maxPktRecvCounter,this.isClosing=!1,this.isRemoteMute=!1;var n=this.model.get("peerConnectionConfig"),r=this.model.get("peerConnectionConstraints");a.debug("RTCPeer: Force turn is enabled, get only relay ICE candidates"),n.iceTransportPolicy="relay",n.webrtcDisableBundling&&!this.isFirefox?(a.debug("RTCPeer: Disable ICE bundling"),n.bundlePolicy="balanced",this.bundlePolicy="balanced"):this.bundlePolicy="max-bundle",this.isFirefox&&n.iceServers.forEach(function(e){e.username=e.username+"#firefox"}),this.pc=new RTCPeerConnection(n,r),this.pc.onicecandidate=this.onIceCandidate,this.pc.onaddstream=this.onRemoteStreamAdded,this.pc.onremovestream=this.onRemoteStreamRemoved,this.pc.onsignalingstatechange=this.onSignalingStateChanged,this.pc.oniceconnectionstatechange=this.onIceConnectionStateChanged,this.pc.onicegatheringstatechange=this.onIceGatheringStateChanged,this.pc.onnegotiationneeded=this.onNegotiationNeeded,o.isNull(e.localAudioStream)||o.isUndefined(e.localAudioStream)||this.addStream(e.localAudioStream),o.isNull(e.localVideoStream)||o.isUndefined(e.localVideoStream)||this.addStream(e.localVideoStream),o.isNull(e.fakeStream)||o.isUndefined(e.fakeStream)||this.addStream(e.fakeStream),this.callStats=new l({peerConnection:this.pc,statsPollInterval:this.isFirefox?1e3:this.model.get("statsPollInterval")}),this.callStatsModel=this.callStats.model,this.callStats.on("rtcstats",this.checkFFMediaConnectivity),this.isFirefox&&(this.sdpInterop=new g.Interop),this.webrtcFec=n.webrtcFec},addStream:function(e){if(this.isPCClosed())return a.warn("RTCPeer: Peer connection is closed, ignoring addStream request"),c.PEER_CONNECTION_ERRORS.PC_CLOSED;this.pc.addStream(e),this.model.setStreamByType(e,"local",e),a.debug("RTCPeer: Added stream to peer connection: ",e.id)},removeStream:function(e){if(this.isPCClosed())return a.warn("RTCPeer: Peer connection is closed, ignoring removeStream request"),c.PEER_CONNECTION_ERRORS.PC_CLOSED;this.pc.removeStream(e),this.model.setStreamByType(e,"local",null),a.debug("RTCPeer: Removed stream from peer connection: ",e.id)},removeAudioStream:function(){var e=this.model.get("localAudioStream");o.isNull(e)||o.isUndefined(e)?a.debug("RTCPeer: Local Audio Stream in PC is null, cannot remove"):this.removeStream(e)},removeVideoStream:function(){var e=this.model.get("localVideoStream");o.isNull(e)||o.isUndefined(e)?a.debug("RTCPeer: Local Video Stream in PC is null, cannot remove"):this.removeStream(e)},onIceCandidate:function(e){var t=e.candidate;t?(this.model.set("iceGatheringState",this.pc.iceGatheringState),this.trigger("iceCandidate",this,t),this.numIceCandidates++):null===t&&(0===this.numIceCandidates?(a.debug("RTCPeer :: Received NULL Ice Candidate before gathering candidates"),this.onIceGatheringFailure()):(a.debug("RTCPeer: Ice Gathering complete, Ice Candidate count "+this.numIceCandidates),this.model.set("iceGatheringState",this.pc.iceGatheringState)))},onIceConnectionStateChanged:function(e){if(this.pc)switch(this.model.set("iceConnectionState",this.pc.iceConnectionState),a.debug("RTCPeer: iceConnectionState changed to: "+this.pc.iceConnectionState),this.pc.iceConnectionState){case this.ICE_CONNECTION_STATES.CHECKING:this.initIceConnectivityTimer();break;case this.ICE_CONNECTION_STATES.CONNECTED:case this.ICE_CONNECTION_STATES.COMPLETED:this.initCallStats(),this.clearIceConnectivityTimer();break;case this.ICE_CONNECTION_STATES.DISCONNECTED:this.initIceRestart(),this.initIceConnectivityTimer();break;case this.ICE_CONNECTION_STATES.FAILED:this.isFirefox?(a.warn("ICE connection failed, restarting the call"),h.callDisconnected(c.DISCONNECT_REASONS.ICE_CONNECTION_FAILED)):(this.initIceConnectivityTimer(),this.restartIce());break;case this.ICE_CONNECTION_STATES.CLOSED:this.isPCClosed()||this.trigger("iceConnectionClosed")}},ffIceConnectionChange:function(e){this.pc&&(this.model.set("iceConnectionState",e),e===this.ICE_CONNECTION_STATES.CONNECTED?this.clearIceConnectivityTimer():(this.initIceRestart(),this.initIceConnectivityTimer()))},initIceRestart:function(){var e=this,t=this.model.get("iceConnectionState");this.iceRestartTimer=window.setTimeout(function(){(t=e.model.get("iceConnectionState"))===e.ICE_CONNECTION_STATES.CONNECTED||t===e.ICE_CONNECTION_STATES.COMPLETED?e.clearIceRestartTimer():e.restartIce()},this.iceRestartTimeout)},restartIce:function(){this.trigger("restartICE"),this.clearIceRestartTimer(),this.isConnectionLost=!1},initIceConnectivityTimer:function(){var e=this;null===e.iceConnectivityTimer&&(e.iceConnectivityTimer=setTimeout(function(){var t=e.model.get("iceConnectionState");t!==e.ICE_CONNECTION_STATES.CONNECTED&&t!==e.ICE_CONNECTION_STATES.COMPLETED&&(a.warn("Can not establish ICE connectivity, restarting the call"),0===e.numIceCandidates?h.callDisconnected(c.DISCONNECT_REASONS.ICE_GATHERING_FAILED):h.callDisconnected(c.DISCONNECT_REASONS.ICE_CONNECTION_FAILED))},e.iceConnectivityTimeout))},clearIceRestartTimer:function(){this.iceRestartTimer&&window.clearTimeout(this.iceRestartTimer),this.iceRestartTimer=null},clearIceConnectivityTimer:function(){this.iceConnectivityTimer&&window.clearTimeout(this.iceConnectivityTimer),this.iceConnectivityTimer=null},onIceGatheringStateChanged:function(e){a.debug("RTCPeer: Received 'iceGatheringStateChange' event")},onNegotiationNeeded:function(e){},onSignalingStateChanged:function(e){this.pc&&(a.debug("RTCPeer: signalingState changed to: "+this.pc.signalingState),this.model.set("signalingState",this.pc.signalingState),"closed"!==this.pc.signalingState||this.isClosing||h.callDisconnected(c.DISCONNECT_REASONS.SIG_CHANNEL_CLOSED))},onIceCandidatesEnded:function(){a.debug("RTCPeer: Received 'endOfCandidates' event")},onRemoteStreamAdded:function(e){var t=e.stream;o.isNull(t)||o.isUndefined(t)?a.error("RTCPeer: onRemoteStreamAdded event has invalid stream in it: ",t):(this.model.setStreamByType(t,"remote",t),a.debug("RTCPeer: Connector added a stream to peer connection: ",t))},onRemoteStreamRemoved:function(e){var t=e.stream;o.isNull(t)||o.isUndefined(t)?a.error("RTCPeer: onRemoteStreamRemoved event has invalid stream in it: ",t):(this.model.setStreamByType(t,"remote",null),a.debug("RTCPeer: Connector removed a stream from peer connection: ",t))},initCallStats:function(){this.callStats.startPollingStats()},checkFFMediaConnectivity:function(e){if(!this.isRemoteMute&&"connected"===this.model.get("iceConnectionState")){var t=0;Object.keys(e).find(function(n){var r,i;r=e[n],i="inboundrtp",r.type!=i||r.isRemote||(t+=e[n].packetsReceived)}),!!(t-this.oldPktCount)?(this.pktRecvCounter=this.maxPktRecvCounter,this.isConnectionLost&&(this.isConnectionLost=!1,this.ffIceConnectionChange("connected"),a.debug("RTCPeer :: ICE connected"))):this.pktRecvCounter?this.pktRecvCounter--:this.isConnectionLost||(this.ffIceConnectionChange("disconnected"),this.isConnectionLost=!0,a.debug("RTPeer :: ICE disconnected")),this.oldPktCount=t}},handleResponseMessage:function(e){},handleErrorMessage:function(e){a.debug("RTCPeer: Received 'error' message: "+e)},handleNotificationMessage:function(e){a.debug("RTCPeer: Received 'notification' message: "+e);var t=u.METHODS;switch(e.method){case t.CANDIDATE:this.pc.processIce(e.iceCandidate);break;default:a.error("RTCPeer: Method received in notification message: "+e.method+" is not supported.")}},createOffer:function(e){var t=this,n=r.defer();if(this.isFirefox)i=e;else var i=o.extend({},this.model.get("receiveMedia"),e);i&&i.iceRestart&&(this.numIceCandidates=0);return this.isPCClosed()?(a.warn("RTCPeer: Peer connection is closed, ignoring createOffer request"),n.reject(c.PEER_CONNECTION_ERRORS.PC_CLOSED)):this.pc.createOffer(function(e){(!t.webrtcFec||t.isFirefox||v.version<"48")&&(v.version<"51"&&!t.isFirefox?(e.sdp=m.maybeRemoveCodecFromSDP(e.sdp,"98"),e.sdp=m.maybeRemoveCodecFromSDP(e.sdp,"116")):e.sdp=m.maybeRemoveVideoFec(e.sdp,{videoFec:"false"})),t.pc.setLocalDescription(e,function(){t.isFirefox&&((e=t.sdpInterop.toPlanB(e)).sdp=m.maybeReplaceVideoPortNumber(e.sdp,9)),e=t._appendInfoToSdp(e),t.model.set("localSdp",e),n.resolve(e)},function(e){a.error("RTCPeer: Error while setting localSdp: "+e),n.reject(e)})},function(e){a.error("RTCPeer: Error while creating offer sdp: "+e),n.reject(e)},i),n.promise},handleOffer:function(e){var t=this,n=e.params.sessionDescription,i=r.defer(),o=function(e){a.error("RTCPeer: Error while processing incoming offer request: "+e),i.reject(e)};return this.isPCClosed()?(a.warn("RTCPeer: Peer connection is closed, ignoring handleOffer request"),i.reject(c.PEER_CONNECTION_ERRORS.PC_CLOSED)):this.pc.setRemoteDescription(new RTCSessionDescription(n),function(){t.model.set("remoteSdp",n),t.pc.createAnswer(function(e){t.pc.setLocalDescription(answer,function(){e=t._appenInfotoSdp(e),t.model.set("localSdp",e),i.resolve()},o)},o)},o),i.promise},handleAnswer:function(e){var t=this,n=e.params.sessionDescription,i=r.defer();return this.isPCClosed()?(a.warn("RTCPeer: Peer connection is closed, ignoring handleAnswer request"),i.reject(c.PEER_CONNECTION_ERRORS.PC_CLOSED)):(this.isFirefox&&(n=this.sdpInterop.toUnifiedPlan(n)),this.pc.setRemoteDescription(new RTCSessionDescription(n),function(){t.model.set("remoteSdp",n),i.resolve()},function(e){a.error("RTCPeer: Error while setting remote description: "+e),i.reject(e)})),i.promise},handleUpdate:function(e){var t=r.defer();return a.warn("RTCPeer: 'update' Method is not supported yet"),t.resolve(),t.promise},handleKeepAlive:function(e){a.debug("RTCPeer: Received a keepalive message");var t=r.defer();return t.resolve(),t.promise},handleDisconnect:function(e){var t=r.defer();return this.pc?(this.isClosing=!0,"closed"!==this.pc.signalingState&&this.pc.close(),this.model.set(p.getDefaults()),this.pc=null):a.warn("RTCPeer: This Peer Connection has already been closed!!"),t.resolve(),t.promise},handleIceCandidate:function(e){var t=r.defer();if(this.isFirefox&&("audio"===e.sdpMid?e.sdpMid="sdparta_0":(e.sdpMid="sdparta_1",e.sdpMLineIndex=1)),this.pc){var n=new RTCIceCandidate({sdpMLineIndex:e.sdpMLineIndex,candidate:e.candidate,sdpMid:e.sdpMid});this.pc.addIceCandidate(n),t.resolve()}return t.promise},isPCClosed:function(){return!0===this.model.get("closed")||"closed"===this.pc.signalingState},_appendInfoToSdp:function(e){var t=new Object({audioMsid:"",videoMsid:"",contnetMsid:""});return this.pc.getLocalStreams().forEach(function(e){switch(e.bjn_label){case"local_av_stream":t.audioMsid=e.id,t.videoMsid=e.id;break;case"local_audio_stream":t.audioMsid=e.id;break;case"local_video_stream":t.videoMsid=e.id;break;case"content_stream":case"fake_stream":t.contentMsid=e.id;break;default:a.error("RTCPeer: Invalid Stream found in PC "+e.bjn_label)}}),e.streamInfo=t,e},onIceGatheringFailure:function(){var e=this;window.setTimeout(function(){0===e.numIceCandidates&&(a.warn("RTCPeer :: Received only NULL Ice Candidate before gathering candidates, Restarting the call"),h.callDisconnected(c.DISCONNECT_REASONS.ICE_GATHERING_FAILED))},5e3)},replaceTrack:function(e,t){var n=this,r=null;if("audio"===e||"video"===e?r="audio"===e?this.model.get("localAudioStream"):this.model.get("localVideoStream"):t?(this.model.setStreamByType(t,"local",t),r=this.model.get("fakeStream")):(r=this.model.get("localContentStream"),t=this.model.get("fakeStream"),this.model.setStreamByType(r,"local",null)),o.isNull(r)||o.isUndefined(r)||!this.pc)a.debug("RTCPeer: Local Stream in PC is null, cannot replace the track");else if(r.id!==t.id){var i=r.getTracks()[0].id;this.pc.getSenders().forEach(function(e){e&&e.track.id===i&&(e.replaceTrack(t.getTracks()[0]),n.model.setStreamByType(t,"local",t))})}},close:function(){a.debug("RTCPeer: closing RTCPeerConnection now"),this.isClosing=!0,this.clearIceConnectivityTimer(),this.clearIceRestartTimer(),this.handleDisconnect(),this.callStats.close(),this.numIceCandidates=0}});e.exports=y},function(e,t,n){var r=n(4),i=n(2),o=n(5),s=n(3),a=n(142),c=n(9),u=r.Class({STATIC:{},constructor:function(e){i.bindAll(this),i.extend(this,o.Events),this.model=new a,this.peerConnection=e.peerConnection,this.pollInterval=e.statsPollInterval},startPollingStats:function(){var e=this;this.pollStatsHandle||(s.debug("RTCCallStats: Starting call stats poll with interval: ",this.pollInterval),this.pollStatsHandle=window.setInterval(function(){e.getStats({peerConnection:e.peerConnection,success:e.getStatsSuccess,error:e.getStatsError})},this.pollInterval))},stopPollingStats:function(){this.pollStatsHandle?(s.debug("RTCCallStats: Stopping call stats poll"),window.clearInterval(this.pollStatsHandle),this.pollStatsHandle=null):s.warn("RTCCallStats: Call stats poll already stopped")},getStats:function(e){var t=e.peerConnection;t&&t.getStats&&t.getStats(null,e.success,e.error)},getStatsSuccess:function(e){"firefox"===c.browser&&this.trigger("rtcstats",e),this.model.updateStats(e)},getStatsError:function(e){s.error("RTCCallStats: Failed to get webrtc call stats",e)},close:function(){this.stopPollingStats(),this.model.set(a.defaults)}});e.exports=u},function(e,t,n){var r=n(5),i=n(2),o=(n(3),n(9)),s=r.Model.extend({STATIC:{LABELS:{VIDEO_TRACK:"video_label",CONTENT_TRACK:"content_label"}},defaults:{audioInputLevel:null,audioPacketsSent:null,audioPacketsRecvd:null,videoRecvHeight:null,videoRecvWidth:null,contentRecvHeight:null,contentRecvWidth:null},updateStats:function(e){var t=[];Object.keys(e).forEach(function(n){var r={},i=e[n];Object.keys(i).forEach(function(e){r[e]=i[e]}),t.push(r)}),this.parseStats(t)},parseStats:function(e){var t={},n=this;i.each(e,function(e,r,s){if("firefox"!==o.browser){if("ssrc"===e.type)if(e.id&&-1!==e.id.indexOf("_send")&&(i.isUndefined(e.audioInputLevel)||(t.audioInputLevel=e.audioInputLevel,t.audioPacketsSent=e.packetsSent)),e.id&&-1!==e.id.indexOf("_recv"))i.isUndefined(e.audioOutputLevel)||(t.audioPacketsRecvd=e.packetsReceived);else switch(e.googTrackId){case n.STATIC.LABELS.VIDEO_TRACK:t.videoRecvHeight=e.googFrameHeightReceived?parseInt(e.googFrameHeightReceived,10):null,t.videoRecvWidth=e.googFrameWidthReceived?parseInt(e.googFrameWidthReceived,10):null;break;case n.STATIC.LABELS.CONTENT_TRACK:t.contentRecvHeight=e.googFrameHeightReceived?parseInt(e.googFrameHeightReceived,10):null,t.contentRecvWidth=e.googFrameWidthReceived?parseInt(e.googFrameWidthReceived,10):null}}else"outboundrtp"===e.type&&"audio"===e.mediaType?t.audioPacketsSent=e.packetsSent:"inboundrtp"===e.type&&"audio"===e.mediaType&&(t.audioPacketsRecvd=e.packetsReceived)}),this.set(t)}});e.exports=s},function(e,t,n){var r=n(5),i=n(22),o=r.Model.extend({initialize:function(){},setStreamByType:function(e,t,n){var r="local"===t?i.getLocalStreamType(e):i.getRemoteStreamType(e);this.set(r,n)}},{getDefaults:function(){return{id:null,receiveMedia:{offerToReceiveAudio:!0,offerToReceiveVideo:!0},peerConnectionConfig:{iceServers:[],bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",iceTransports:"all"},peerConnectionConstraints:{optional:[]},iceGatheringState:"",iceConnectionState:"",useTrickleICE:!1,localSdp:null,remoteSdp:null,localVideoStream:null,localAudioStream:null,localContentStream:null,remoteStream:null,remoteContentStream:null,closed:!1,signalingState:""}}});e.exports=o},function(e,t,n){t.Interop=n(145)},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(146),o=n(150);function s(){this.cache={}}e.exports=s,s.prototype.getFirstSendingIndexFromAnswer=function(e){if(!this.cache.answer)return null;var t=i.parse(this.cache.answer);if(t&&t.media&&Array.isArray(t.media))for(var n=0;n<t.media.length;n++)if(t.media[n].type==e&&(!t.media[n].direction||"sendrecv"===t.media[n].direction||"sendonly"===t.media[n].direction))return n;return null},s.prototype.toPlanB=function(e){var t=this;if("object"!==r(e)||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=i.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length<=3&&n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Unified Plan."),e;for(var o=e.sdp,s=!1,a=0;a<n.media.length;a++){n.media[a].rtp.forEach(function(e){if("NULL"===e.codec){s=!0;var n=i.parse(t.cache.offer);e.codec=n.media[a].rtp[0].codec}})}s&&(o=i.write(n)),this.cache[e.type]=o;var c=n.media;n.media=[];var u={},l=[];c.forEach(function(e){if(("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");if("application"===e.type)return n.media.push(e),void l.push(e.mid);void 0===u[e.type]&&(u[e.type]=e),"object"===r(e.sources)&&Object.keys(e.sources).forEach(function(t){"object"!==r(u[e.type].sources)&&(u[e.type].sources={}),u[e.type].sources[t]=e.sources[t],void 0!==e.msid&&(u[e.type].sources[t].msid=e.msid)}),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&(void 0!==u[e.type].ssrcGroups&&Array.isArray(u[e.type].ssrcGroups)||(u[e.type].ssrcGroups=[]),u[e.type].ssrcGroups=u[e.type].ssrcGroups.concat(e.ssrcGroups)),u[e.type]===e&&(e.candidates=c[0].candidates,e.iceUfrag=c[0].iceUfrag,e.icePwd=c[0].icePwd,e.fingerprint=c[0].fingerprint,e.mid=e.type,delete e.bundleOnly,delete e.msid,l.push(e.type),n.media.push(e))}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=l.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var f=i.write(n);return new RTCSessionDescription({type:e.type,sdp:f})},s.prototype.toUnifiedPlan=function(e){var t=this;if("object"!==r(e)||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=i.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length>3||!n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Plan B."),e;var s=[];n.media.forEach(function(e){s.push(e.mid)});var a,c=!1;if(void 0!==n.groups&&Array.isArray(n.groups)&&(c=n.groups.every(function(e){return"BUNDLE"!==e.type||o.apply(e.mids.sort(),[s.sort()])})),!c)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.");void 0!==this.cache[e.type]&&(a=i.parse(this.cache[e.type]));var u={audio:{},video:{}},l={};if(n.media.forEach(function(t){if(("string"!=typeof t.rtcpMux||"rtcp-mux"!==t.rtcpMux)&&"inactive"!==t.direction)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"!==t.type){var n=t.sources,i=t.ssrcGroups,o=t.candidates,s=t.iceUfrag,c=t.icePwd,f=t.fingerprint,d=t.port;delete t.sources,delete t.ssrcGroups,delete t.candidates,delete t.iceUfrag,delete t.icePwd,delete t.fingerprint,delete t.port,delete t.mid;var p={};void 0!==i&&Array.isArray(i)&&i.forEach(function(e){"SIM"!==e.semantics&&void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(t){void 0===p[t]&&(p[t]=[]),p[t].push(e)})});var h={};"object"===r(n)&&Object.keys(n).forEach(function(i){var m;"offer"!==e.type||n[i].msid?(void 0!==p[i]&&Array.isArray(p[i])&&p[i].some(function(e){return e.ssrcs.some(function(e){if("object"===r(h[e]))return m=h[e],!0})}),"object"===r(m)?(m.sources[i]=n[i],delete n[i].msid):(m=Object.create(t),h[i]=m,void 0!==n[i].msid&&(m.msid=n[i].msid,m.direction="sendrecv",delete n[i].msid),m.sources={},m.sources[i]=n[i],m.ssrcGroups=p[i],void 0!==a&&void 0!==a.media&&Array.isArray(a.media)&&a.media.forEach(function(e){"object"===r(e.sources)&&Object.keys(e.sources).forEach(function(t){t===i&&(m.mid=e.mid)})}),void 0===m.mid&&(e.type,m.mid=[t.type,"-",i].join("")),m.candidates=o,m.iceUfrag=s,m.icePwd=c,m.fingerprint=f,m.port=d,l[m.mid]=m)):u[t.type][i]=n[i]})}else l[t.mid]=t}),n.media=[],s=[],"offer"===e.type)for(var f=0;f<a.media.length;f++){var d=a.media[f];void 0===l[d.mid]&&(delete d.msid,delete d.sources,delete d.ssrcGroups,d.direction&&"sendrecv"!==d.direction?"sendonly"===d.direction&&(d.direction="inactive"):d.direction="recvonly"),n.media.push(d),"string"==typeof d.mid&&s.push(d.mid)}else void 0!==a&&void 0!==a.media&&Array.isArray(a.media)&&a.media.forEach(function(e){s.push(e.mid),void 0!==l[e.mid]?n.media.push(l[e.mid]):(delete e.msid,delete e.sources,delete e.ssrcGroups,e.direction&&"sendrecv"!==e.direction||(e.direction="recvonly"),e.direction&&"sendonly"!==e.direction||(e.direction="inactive"),n.media.push(e))}),Object.keys(l).forEach(function(e){-1===s.indexOf(e)&&(s.push(e),"recvonly"===l[e].direction?n.media.some(function(t){if(("sendrecv"===t.direction||"sendonly"===t.direction)&&t.type===l[e].type)return Object.keys(l[e].sources).forEach(function(n){t.sources[n]=l[e].sources[n]}),!0}):n.media.push(l[e]))});["audio","video"].forEach(function(e){if(n&&n.media&&Array.isArray(n.media)){var r=null;if(Object.keys(u[e]).length>0&&null===(r=t.getFirstSendingIndexFromAnswer(e)))for(var i=0;i<n.media.length;i++)if(n.media[i].type===e){r=i;break}if(r&&n.media.length>r){var o=n.media[r];Object.keys(u[e]).forEach(function(t){o.sources&&o.sources[t]&&console.warn("Replacing an existing SSRC."),o.sources||(o.sources={}),o.sources[t]=u[e][t]})}}}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=s.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var p=0;s=[],n.media.forEach(function(e){0==p?e.mid="sdparta_0":1==p?e.mid="sdparta_1":2==p&&(e.mid="sdparta_2"),s.push(e.mid),p++}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=s.join(" "),!0});var h=i.write(n);return this.cache[e.type]=h,new RTCSessionDescription({type:e.type,sdp:h})}},function(e,t,n){var r=n(147);t.write=function(e,t){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach(function(e){void 0!==e.sources&&0!==Object.keys(e.sources).length&&(e.ssrcs=[],Object.keys(e.sources).forEach(function(t){var n=e.sources[t];Object.keys(n).forEach(function(r){e.ssrcs.push({id:t,attribute:r,value:n[r]})})}),delete e.sources),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),void 0!==e&&void 0!==e.groups&&Array.isArray(e.groups)&&e.groups.forEach(function(e){void 0!==e.mids&&Array.isArray(e.mids)&&(e.mids=e.mids.join(" "))}),r.write(e,t)},t.parse=function(e){var t=r.parse(e);return void 0!==t&&void 0!==t.media&&Array.isArray(t.media)&&t.media.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources={},e.ssrcs.forEach(function(t){e.sources[t.id]||(e.sources[t.id]={}),e.sources[t.id][t.attribute]=t.value}),delete e.ssrcs),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),void 0!==t&&void 0!==t.groups&&Array.isArray(t.groups)&&t.groups.forEach(function(e){"string"==typeof e.mids&&(e.mids=e.mids.split(" "))}),t}},function(e,t,n){var r=n(148),i=n(149);t.write=i,t.parse=r.parse,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},o=n(63),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach(function(e){var t=e[0],s=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var a=0;a<(o[t]||[]).length;a+=1){var c=o[t][a];if(c.reg.test(s))return i(c,r,s)}}),t.media=n,t};var a=function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=r(n[1])),e};t.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(a,{})},t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t}},function(e,t,n){var r=n(63),i=/%[sdv%]/g,o=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var o=0;o<t.names.length;o+=1){var s=t.names[o];t.name?r.push(n[t.name][s]):r.push(n[t.names[o]])}else r.push(n[t.name]);return function(e){var t=1,n=arguments,r=n.length;return e.replace(i,function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})}.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||s,i=t.innerOrder||a,c=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?c.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){c.push(o(t,n,e))})})}),e.media.forEach(function(e){c.push(o("m",r.m[0],e)),i.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?c.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){c.push(o(t,n,e))})})})}),c.join("\r\n")+"\r\n"}},function(e,t){e.exports=function e(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var n=0,r=this.length;n<r;n++)if(this[n]instanceof Array&&t[n]instanceof Array){if(!e.apply(this[n],[t[n]]))return!1}else if(this[n]!=t[n])return!1;return!0}},function(e,t,n){var r=n(5),i=n(27),o=n(2),s=n(3),a=n(14),c=r.Model.extend({defaults:{localContentStream:null,chromeMediaSourceId:null,isChromeExtensionInstalled:!1,extensionStatus:a.EXTENSION_STATES.NOT_INSTALLED,screenShareState:null,tokenStatus:null,presentationToken:{},firefoxScreenShareCancelled:null},isExtensionInstalled:function(){var e=i("body").find(".InMeetingExtensionIsInstalled"),t=!1,n=this;o.each(e,function(e,r,o){i(e).attr("data-extension-id")===n.get("extensionId")&&(t=!0)});var r=this.get("extensionStatus")===a.EXTENSION_STATES.INSTALLED;return t||r?(s.debug("RTCScreenSharingModel: The Screen Sharing Chrome extension has been installed."),!0):(s.warn("RTCScreenSharingModel: The Screen Sharing Chrome extension is not installed."),!1)},isExtensionInstalling:function(){return this.model.get("extensionStatus")===a.EXTENSION_STATES.INSTALLING}});e.exports=c},function(e,t,n){var r=n(153),i=n(154),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r,i,o=n(65),s=n(66),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var p=o();null==f&&(f=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=h-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||h>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,c=m,i=d;var v=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;l[u++]=v>>>24&255,l[u++]=v>>>16&255,l[u++]=v>>>8&255,l[u++]=255&v;var y=h/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var b=0;b<6;++b)l[u+b]=f[b];return t||s(l)}},function(e,t,n){var r=n(65),i=n(66);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){var r=n(4),i=n(2),o=n(5),s=(n(3),n(8)),a=o.Model.extend({defaults:{supportsOutputSpeakerSelection:null}}),c=r.Class({STATIC:{},constructor:function(e){i.bindAll(this),this.model=new a},detectCapabilities:function(){var e=s.defer();return this.detectOutputSpeakerSelection(),e.resolve(),e.promise},detectOutputSpeakerSelection:function(){$("body").append('<video id="testSpeakerSelection" style="display:none"></video>');var e=$("#testSpeakerSelection")[0];this.model.set("supportsOutputSpeakerSelection",!(!e||void 0===e.setSinkId)),$("#testSpeakerSelection").remove()}});e.exports=new c},function(e,t,n){var r=n(67);e.exports={aggregatePairing:function(e,t){var n={url:"/seamapi/v1/services/pairingCodeGenerator?stringifyOauthJson=false&includeProfilePictureUrl=false&includePhoneContactInfo=false&includePairing=false",body:e};r.post(n,t)},webRTCPairing:function(e,t){var n={url:"/seamapi/v1/user/"+e.oauthInfo.scope.meeting.leaderId+"/live_meetings/"+e.oauthInfo.scope.meeting.meetingNumericId+"/pairing_code/webrtc?access_token="+encodeURIComponent(e.oauthInfo.access_token),body:{endpointType:4,userId:e.oauthInfo.scope.meeting.leaderId,languageCode:"en",capabilities:["AUDIO","VIDEO","CONTENT"]}};r.post(n,t)},sipDialout:function(e,t,n){var i={url:"/seamapi/v1/user/"+e.oauthInfo.scope.meeting.leaderId+"/live_meetings/"+e.oauthInfo.scope.meeting.meetingNumericId+"/dialout/pstn?access_token="+encodeURIComponent(e.oauthInfo.access_token),body:{uri:t}};r.post(i,n)}}},function(e,t,n){var r=n(68),i=n(69),o=n(159),s=n(160),a=n(3);e.exports=function(){var e=s(),t=r||{user:{name:"Client_SDK_Test"},events:["meeting","endpoint"]},n=new i,c=new o(n,{init:!0}),u=!1;return{connect:function(n,r){var s={websocketURL:n.events.url,oauthInfo:n.oauthInfo,user:{name:t.user.name,leaderId:n.oauthInfo.scope.meeting.leaderId},events:t.events};e.registerHandler({onMessage:function(e,t){var n={};if(t.body&&t.body){try{n=JSON.parse(t.body)}catch(e){a.debug("corrupted json message body",e)}n.timestamp=t.timestamp,n.event&&("statechange.endpoints"===n.event.substr(0,21)?function(e){u&&a.debug("MAIN: onEndpointNotification msg = ",e);var t=e.meetingGuid;e.props&&e.props.f&&(a.debug("MAIN: @"+e.timestamp+" "+t+" contain these eps: "),(c=c||new o(new i)).fullUpdate(e.props,{init:!0}),a.debug("onFullRoster:3 roster = ",c.collection),u&&e.props.f.forEach(function(t){a.debug("MAIN: @"+e.timestamp+" "+t.n+"("+t.E1+") as a "+t.e+" ("+t.t+")")})),e.props&&e.props.a&&(c.partialUpdate(e.props),u&&e.props.a.forEach(function(n){a.debug("MAIN: @"+e.timestamp+" "+n.n+"("+n.E1+") is added to "+t+" as a "+n.e+" ("+n.t+")")})),e.props&&e.props.m&&(c.partialUpdate(e.props),u&&(a.debug("partialUpdate: roster = ",c.collection),a.debug("partialUpdate: self = ",c.selfParticipant),e.props.m.forEach(function(t){a.debug("MAIN: @"+e.timestamp+" "+t.E1+" is modified")}))),e.props&&e.props.d&&(c.partialUpdate(e.props),u&&(a.debug("partialUpdatedelete: roster = ",c.collection),a.debug("partialUpdatedelete: self = ",c.selfParticipant),e.props.d.forEach(function(n){a.debug("MAIN: @"+e.timestamp+" "+n.n+"("+n.E1+") is deleted from "+t)})))}(n):"statechange.livemeeting"===n.event.substr(0,23)?function(e){u&&(a.debug("MAIN: onMeetingNotification msg = ",e),a.debug("MAIN: @"+e.timestamp+" "+e.props.meetingId+" ("+e.props.meetingGuid+") has title = "+e.props.title+" is "+e.props.status))}(n):"dialout.notification"===n.event&&function(e){u&&(a.debug("MAIN: onDialoutNotification msg = ",e),a.debug("MAIN: @"+e.timestamp+" dialout statusCode = "+e.status+" ("+e.statusCode+")"))}(n))}}},"meeting.notification.msg"),e.connect(s).then(function(t){a.debug("MAIN: WEBSOCKET connect sucess ",t);var n={};n.E1=t.seamGuid,n.ch=t.guid?t.guid:"",n.m=t.meetingGuid?t.meetingGuid:"",a.debug("local selfParticipant = ",n),c.assignedSelf(n),a.debug("roster.selfParticipant = ",c.selfParticipant),e.registerHandler({onMessage:function(e,t){var n;n=t,a.debug("MAIN: onChat msg = ",n)}},"meeting.chat.msg"),e.onBeforeReconnect=function(e){a.debug("attempt",e)},e.onError=function(e){a.debug("error",e)}}).error(function(e){a.debug("could not able to create websocket connection to BJN cloud",e)})},close:function(){a.debug("WebSocketClient.close executed"),e.close()},roster:c,setLogging:function(e){a.debug("EventServiceClient verbose logging: "+e),u=e}}}},function(e,t,n){var r=n(5),i=n(2),o=r.Model.extend({idAttribute:"connectionGuid"},{translationMatrix:function(e){var t=i.clone(e);return t.capabilities&&(t.capabilities=i.map(t.capabilities,function(e){return e.toLowerCase()})),t}});o.Collection=r.Collection.extend({model:o}),e.exports=o},function(e,t,n){var r=n(2),i=n(4),o=n(69),s=n(70),a=n(3),c=i.Class({constructor:function(e){r.bindAll(this),this.collection=e,this.selfParticipant=new s},extractSelf:function(e){var t,n,i,o=this.selfParticipant?this.selfParticipant.id:null;e.f&&(r(e.f).filter(function(e){return!o||s.getId(e)!==o||(t=e,!1)}),a.debug("newFullself = ",t),t&&this.processSelf(t,this.selfParticipant)),e.a&&(r(e.a).filter(function(e){return!o||s.getId(e)!==o||(n=e,!1)}),n&&this.processSelf(n,this.selfParticipant)),e.m&&(r(e.m).filter(function(e){return!o||s.getId(e)!==o||(i=e,!1)}),i&&this.processSelf(i,this.selfParticipant)),e.d&&r(e.d).filter(r.bind(function(e){return!o||s.getId(e)!==o||(this.selfLeft(),!1)},this))},fullUpdate:function(e,t){a.debug("fullUpdate rawParticipantData = ",e),a.debug("fullUpdate options = ",t.selfParticipant);var n=this.collection?this.collection:new o,i=[],s=[],c=[],u=[];this.extractSelf(e),r(e.f).each(function(e){var t=n.getExistingForRaw(e);t?(s.push(e),u.push(t.get("id"))):i.push(e)}),r(r.difference(r.pluck(n.models,"id"),u)).each(function(e){c.push(n.get(e))}),this.processAdded(i,t),this.processModified(s,t),this.processDeleted(c,t,!0)},partialUpdate:function(e,t){this.extractSelf(e),e.a&&this.processAdded(e.a,t),e.m&&this.processModified(e.m,t),e.d&&this.processDeleted(e.d,t)},processAdded:function(e,t){var n=this.collection,i=r(e).map(r.bind(function(e){var t=n.model.translateAttributes(e,void 0);return new n.model(t)},this)).filter(function(e){return e.get("isVisible")});r.each(i,function(e){n.add(e,t)})},processModified:function(e,t){var n=this.collection,i=r(e).map(function(e){return n.model.translateAttributes(e,n.getExistingForRaw(e))});r.each(i,function(e){var t=n.get(e.id);t&&t.set(e)})},processDeleted:function(e,t,n){var i=this.collection;r(e).each(function(e){var t=n?i.get(e):i.getExistingForRaw(e);t&&t.destroy()})},assignedSelf:function(e){var t,n=this.collection;this.selfParticipant.id=e.E1,n&&(a.debug("currData = ",n),n=r(n).filter(function(n){return a.debug("participant = ",n),!!n&&(!e||!e.E1||n.id!==e.E1||(t=n,!1))}),t?this.processSelf(t):s.translateAttributes(e,this.selfParticipant))},processSelf:function(e,t){if(void 0!==e){var n=t||new s,r=this.collection.model.translateAttributes(e,n);n.set(r)}},selfLeft:function(){},registerMeetingEventsProcessor:function(e){var t=this.collection?this.collection:new o;this.meetingEventsProcessor=e;var n=this;r.defer(function(){n.meetingEventsProcessor.processFullRoster(t)})}});e.exports=c},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(2),o=n(161),s=n(162),a=n(58),c=n(3);e.exports=function(){var e,t,n,u=a.transitions.transition,l=a.transitions.afterTransition,f=a.triggers.anyOf,d=[],p=null,h=function(e,t,n){return i.invoke(i.filter(e,function(e){return void 0!==e[t]}),t,n)},m=0,g={},v=["websocket","xdr-streaming","xhr-streaming","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],y=a.create({initial:"idle",events:{register:u({from:["idle"],to:"connecting"}),assignGuid:u({from:["connecting","reconnecting"],to:"connected"}),close:u({from:"connected",to:"disconnected"}),closedUnexpectedly:u({from:"connected",to:"reconnecting"}),reconnect:u({from:["connecting","reconnecting","disconnected"],to:"reconnecting"})},triggers:[{event:"close",activatedBy:f(["remoteClose","pairingError","kicked","crash","idleTimeout","clientClose"])},{event:"closedUnexpectedly",activatedBy:f(["networkIssue"])}],callbacks:[l({to:"closed"},function(){p.close(),c.debug("Closing Socket...")}),l({to:"connected"},function(){}),l({to:"reconnecting"},function(){n&&clearTimeout(n),1e3===m&&c.debug("Cannot setup sockJS connection, max reconnects attempted"),setTimeout(function(){m<1e3&&setTimeout(function(){h(i.values(g),"onBeforeReconnect",m),E(e,!0),m++},1e3*(m>10?10:m))},100)})]}),b=function(){return"connected"===y.getState()},C=function(){return{guid_assigned:_,remoteclose:function(){c.debug("remote close"),y.trigger("remoteClose")},pairingError:function(){y.trigger("pairingError")},kicked:function(){y.trigger("kicked")}}},S=function(e,t){"meeting.register"===e||b()?p.send(JSON.stringify([e,t||{}])):c.debug("Cant send event yet -- sock or guid not ready")},_=function(e){t=e.seamGuid,c.debug("Self GuidAssigned",t),y.assignGuid(),h(i.values(g),"onConnect",e)},T=function(){c.debug("client side closing"),n&&clearTimeout(n),y.trigger("clientClose"),p.close("3077","client-closing on keep alive failure")},E=function(t,a){return new o(function(o,u){g.guidAssigned={onConnect:o},a&&(c.debug("Reconnecting"),c.debug(y.getState())),e=t,c.debug("Params = ",e),c.debug("websocketUrl = ",e.websocketURL),p=new s(e.websocketURL,{},{cookie:!0,protocols_whitelist:v}),n=setTimeout(function(){b()?clearTimeout(n):(c.debug("closing due to socket timeout"),y.close(),y.reconnect())},15e3),e.access_token,p.onopen=function(){!function(e){var t={access_token:e.oauthInfo.access_token,numeric_id:e.oauthInfo.scope.meeting.meetingNumericId,leader_id:e.oauthInfo.scope.meeting.leaderId,protocol:"2",events:e.events,user:{full_name:e.user.name,is_leader:e.user.leaderId}},n=i.extend.apply(null,i.union([{},t],i.map(d,function(e){return i.isFunction(e)?e():e})));y.register(),c.debug("register: on state = "+y.getState()+", message = meeting.register, "+JSON.stringify(n)),S("meeting.register",n);var r=setTimeout(function(){"connected"!==y.getState()?(c.debug("reconnecting as NO guid_assigned during timeout"),c.debug(y.getState()),y.reconnect()):clearTimeout(r)},5e3)}(e),h(i.values(g),"onopen",e)},p.onmessage=function(e){try{var t=JSON.parse(e.data);if(2==t.length&&"object"===r(t[1])){var n=t[0];switch(n){case"keepalive":S("heartbeat");break;case"refresh":break;default:var o=t[1],s=n.match("([^.]*)$")[0];if(s in C())C()[s](o);else{var a=i.keys(g),u=i.find(a,function(e){return n.match("^"+e)});g[u]&&g[u].onMessage&&g[u].onMessage(n,o)}}}else c.debug("JSON Received but not valid event: "+(t[0]||""))}catch(t){c.debug("Invalid JSON from SockJSClient - "+e.data,t)}},p.onclose=function(e){"connected"===y.getState()&&y.closedUnexpectedly()},p.onerror=function(e){c.debug("Error Handler called.",e),h(i.values(g),"onError",e)}})};return{sendEvent:S,connect:E,close:T,registerHandler:function(e,t,n){g[t]=e,n&&d.push(n)}}}},function(e,t,n){(function(n,r,i){var o,s,a,c;function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2018 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */c=function(){var e,t,o;return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}e.any=function(e){return n(e)},e.prototype.any=function(){return n(this)}}},{}],2:[function(e,t,r){"use strict";var i;try{throw new Error}catch(e){i=e}var o=e("./schedule"),s=e("./queue"),a=e("./util");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function u(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function l(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function f(e){this._normalQueue._pushOne(e),this._queueTick()}function d(e){for(;e.length()>0;)p(e)}function p(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var n=e.shift(),r=e.shift();t.call(n,r)}}c.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},c.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(e,t){t?(n.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),n.exit(2)):this.throwLater(e)},c.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(c.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?u.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},c.prototype.invoke=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},c.prototype.settlePromises=function(e){this._trampolineEnabled?f.call(this,e):this._schedule(function(){e._settlePromises()})}):(c.prototype.invokeLater=u,c.prototype.invoke=l,c.prototype.settlePromises=f),c.prototype._drainQueues=function(){d(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,d(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},t.exports=c,t.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var u=n(o),l=new e(t);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(u),u instanceof e){var d={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:u};f._then(t,s,void 0,l,d),u._then(a,c,void 0,l,d),l._setOnCancel(u)}else l._resolveCallback(f);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){var n=e("./util"),r=n.canEvaluate;n.isIdentifier;function i(e){return function(e,r){var i;if(null!=e&&(i=e[r]),"function"!=typeof i){var o="Object "+n.classString(e)+" has no method '"+n.toString(r)+"'";throw new t.TypeError(o)}return i}(e,this.pop()).apply(e,this)}function o(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(i,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=s;else if(r){var n=(void 0)(e);t=null!==n?n:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),s=o.tryCatch,a=o.errorObj,c=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=s(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),r=e("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(e,s,a){return function(c){var u=a._boundValue();e:for(var l=0;l<e.length;++l){var f=e[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(c instanceof f)return i(s).call(u,c)}else if("function"==typeof f){var d=i(f).call(u,c);if(d===o)return d;if(d)return i(s).call(u,c)}else if(n.isObject(c)){for(var p=r(f),h=0;h<p.length;++h){var m=p[h];if(f[m]!=c[m])continue e}return i(s).call(u,c)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){var t=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var e=n.length-1;if(e>=0)return n[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},r.CapturedTrace=null,r.create=function(){if(t)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,c=e.prototype._promiseCreated;r.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=c,t=!1},t=!0,e.prototype._pushContext=r.prototype._pushContext,e.prototype._popContext=r.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},r}},{}],9:[function(e,t,r){"use strict";t.exports=function(t,r){var i,o,s,a=t._getDomain,c=t._async,l=e("./errors").Warning,f=e("./util"),d=e("./es5"),p=f.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,m=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,y=null,b=!1,C=!(0==f.env("BLUEBIRD_DEBUG")),S=!(0==f.env("BLUEBIRD_WARNINGS")||!C&&!f.env("BLUEBIRD_WARNINGS")),_=!(0==f.env("BLUEBIRD_LONG_STACK_TRACES")||!C&&!f.env("BLUEBIRD_LONG_STACK_TRACES")),T=0!=f.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(S||!!f.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},t.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},t.prototype._notifyUnhandledRejectionIsHandled=function(){z("rejectionHandled",i,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),z("unhandledRejection",o,e,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(e,t,n){return q(e,t,n||this)},t.onPossiblyUnhandledRejection=function(e){var t=a();o="function"==typeof e?null===t?e:f.domainBind(t,e):void 0},t.onUnhandledRejectionHandled=function(e){var t=a();i="function"==typeof e?null===t?e:f.domainBind(t,e):void 0};var E=function(){};t.longStackTraces=function(){if(c.haveItemsQueued()&&!ee.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ee.longStackTraces&&$()){var e=t.prototype._captureStackTrace,n=t.prototype._attachExtraTrace,i=t.prototype._dereferenceTrace;ee.longStackTraces=!0,E=function(){if(c.haveItemsQueued()&&!ee.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=n,t.prototype._dereferenceTrace=i,r.deactivateLongStackTraces(),c.enableTrampoline(),ee.longStackTraces=!1},t.prototype._captureStackTrace=B,t.prototype._attachExtraTrace=U,t.prototype._dereferenceTrace=V,r.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return ee.longStackTraces&&$()};var w=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return f.global.dispatchEvent(e),function(e,t){var n={detail:t,cancelable:!0};d.defineProperty(n,"promise",{value:t.promise}),d.defineProperty(n,"reason",{value:t.reason});var r=new CustomEvent(e.toLowerCase(),n);return!f.global.dispatchEvent(r)}}if("function"==typeof Event){e=new Event("CustomEvent");return f.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,d.defineProperty(n,"promise",{value:t.promise}),d.defineProperty(n,"reason",{value:t.reason}),!f.global.dispatchEvent(n)}}return(e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),f.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!f.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),x=f.isNode?function(){return n.emit.apply(n,arguments)}:f.global?function(e){var t="on"+e.toLowerCase(),n=f.global[t];return!!n&&(n.apply(f.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function R(e,t){return{promise:t}}var k={promiseCreated:R,promiseFulfilled:R,promiseRejected:R,promiseResolved:R,promiseCancelled:R,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:R},A=function(e){var t=!1;try{t=x.apply(null,arguments)}catch(e){c.throwLater(e),t=!0}var n=!1;try{n=w(e,k[e].apply(null,arguments))}catch(e){c.throwLater(e),n=!0}return n||t};function I(){return!1}function M(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+f.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function P(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?f.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function O(){return this._onCancelField}function N(e){this._onCancelField=e}function j(){this._cancellationParent=void 0,this._onCancelField=void 0}function D(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}t.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&E()),"warnings"in e){var n=e.warnings;ee.warnings=!!n,T=ee.warnings,f.isObject(n)&&"wForgottenReturn"in n&&(T=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!ee.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=j,t.prototype._propagateFrom=D,t.prototype._onCancel=O,t.prototype._setOnCancel=N,t.prototype._attachCancellationCallback=P,t.prototype._execute=M,L=D,ee.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!ee.monitoring?(ee.monitoring=!0,t.prototype._fireEvent=A):!e.monitoring&&ee.monitoring&&(ee.monitoring=!1,t.prototype._fireEvent=I)),t},t.prototype._fireEvent=I,t.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(e){},t.prototype._attachCancellationCallback=function(e){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._dereferenceTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(e,t){};var L=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function F(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function B(){this._trace=new Q(this._peekContext())}function U(e,t){if(p(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=G(e);f.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),f.notEnumerableProp(e,"__stackCleaned__",!0)}}}function V(){this._trace=void 0}function q(e,n,r){if(ee.warnings){var i,o=new l(e);if(n)r._attachExtraTrace(o);else if(ee.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(o);else{var s=G(o);o.stack=s.message+"\n"+s.stack.join("\n")}A("warning",o)||W(o,"",!0)}}function H(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||v.test(r),o=i&&X(r);i&&!o&&(b&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function G(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||v.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:H(t)}}function W(e,t,n){if("undefined"!=typeof console){var r;if(f.isObject(e)){var i=e.stack;r=t+y(i,e)}else r=t+String(e);"function"==typeof s?s(r,n):"function"!=typeof console.log&&"object"!==u(console.log)||console.log(r)}}function z(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){c.throwLater(e)}"unhandledRejection"===e?A(e,n,r)||i||W(n,"Unhandled rejection "):A(e,r)}function J(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():f.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}function $(){return"function"==typeof Z}var X=function(){return!1},K=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Y(e){var t=e.match(K);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function Q(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);Z(this,Q),t>32&&this.uncycle()}f.inherits(Q,Error),r.CapturedTrace=Q,Q.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<e;++r){var s=n[t[r].stack];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var a=r>0?t[r-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var c=a._length+1,u=r-2;u>=0;--u)t[u]._length=c,c++;return}}}},Q.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=G(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(H(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(a=s;a>=0;--a){var c=r[a];if(t[i]!==c)break;t.pop(),i--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),f.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),f.notEnumerableProp(e,"__stackCleaned__",!0)}};var Z=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():J(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=e,y=t;var n=Error.captureStackTrace;return X=function(e){return h.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,y=t,b=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(y=function(e,t){return"string"==typeof e?e:"object"!==u(t)&&"function"!=typeof t||void 0===t.name||void 0===t.message?J(t):t.toString()},null):(v=e,y=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(s=function(e){console.warn(e)},f.isNode&&n.stderr.isTTY?s=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:f.isNode||"string"!=typeof(new Error).stack||(s=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var ee={warnings:S,longStackTraces:!1,cancellation:!1,monitoring:!1};return _&&t.longStackTraces(),{longStackTraces:function(){return ee.longStackTraces},warnings:function(){return ee.warnings},cancellation:function(){return ee.cancellation},monitoring:function(){return ee.monitoring},propagateFromFunction:function(){return L},boundValueFunction:function(){return F},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&T){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),c=H(a),u=c.length-1;u>=0;--u){var l=c[u];if(!m.test(l)){var f=l.match(g);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(c.length>0){var d=c[0];for(u=0;u<a.length;++u)if(a[u]===d){u>0&&(s="\n"+a[u-1]);break}}}var p="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(p,!0,t)}},setBounds:function(e,t){if($()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),s=-1,a=-1,c=0;c<i.length;++c)if(u=Y(i[c])){n=u.fileName,s=u.line;break}for(c=0;c<o.length;++c){var u;if(u=Y(o[c])){r=u.fileName,a=u.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(X=function(e){if(h.test(e))return!0;var t=Y(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}},warn:q,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),q(n)},CapturedTrace:Q,fireDomEvent:w,fireGlobalEvent:x}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();return this.caught(n,function(){return r})}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.reduce,r=e.all;function i(){return r(this)}e.prototype.each=function(e){return n(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return n(this,e,t,t)},e.each=function(e,r){return n(e,r,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,r){return n(e,r,t,t)}}},{}],12:[function(e,t,n){"use strict";var r,i,o=e("./es5"),s=o.freeze,a=e("./util"),c=a.inherits,u=a.notEnumerableProp;function l(e,t){function n(r){if(!(this instanceof n))return new n(r);u(this,"message","string"==typeof r?r:t),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}var f=l("Warning","warning"),d=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),h=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(e){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(h.prototype[m[g]]=Array.prototype[m[g]]);o.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var v=0;function y(e){if(!(this instanceof y))return new y(e);u(this,"name","OperationalError"),u(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(u(this,"message",e.message),u(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}h.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return v--,t},c(y,Error);var b=Error.__BluebirdErrorTypes__;b||(b=s({CancellationError:d,TimeoutError:p,OperationalError:y,RejectionError:y,AggregateError:h}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:a,names:a,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return s}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=t.CancellationError,s=i.errorObj,a=e("./catch_filter")(r);function c(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function u(e){this.finallyHandler=e}function l(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function f(){return p.call(this,this.promise._target()._settledValue())}function d(e){if(!l(this,e))return s.e=e,s}function p(e){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),e);if(c===r)return c;if(void 0!==c){i._setReturnedNonUndefined();var p=n(c,i);if(p instanceof t){if(null!=this.cancelPromise){if(p._isCancelled()){var h=new o("late cancellation observer");return i._attachExtraTrace(h),s.e=h,s}p.isPending()&&p._attachCancellationCallback(new u(this))}return p._then(f,d,void 0,this,void 0)}}}return i.isRejected()?(l(this),s.e=e,s):(l(this),e)}return c.prototype.isFinallyHandler=function(){return 0===this.type},u.prototype._resultCancelled=function(){l(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new c(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,p,p)},t.prototype.tap=function(e){return this._passThrough(e,1,p)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,p);var r,o=new Array(n-1),s=0;for(r=0;r<n-1;++r){var c=arguments[r];if(!i.isObject(c))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(c)));o[s++]=c}o.length=s;var u=arguments[r];return this._passThrough(a(o,u,this),1,void 0,p)},c}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=e("./errors").TypeError,c=e("./util"),u=c.errorObj,l=c.tryCatch,f=[];function d(e,n,i,o){if(s.cancellation()){var a=new t(r),c=this._finallyPromise=new t(r);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new t(r))._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(d,o),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=l(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=l(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=l(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(e){var n=this._promise;if(e===u)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof t||null!==(o=function(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=l(n[o])(e);if(r._popContext(),s===u){r._pushContext();var a=t.reject(u.e);return r._popContext(),a}var c=i(s,r);if(c instanceof t)return c}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=d,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+c.classString(e));f.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new d(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var r=[].slice.call(arguments);e&&r.pop();var i=new n(r).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=t._getDomain,c=e("./util"),l=c.tryCatch,f=c.errorObj,d=t._async;function p(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=a();this._callback=null===i?t:c.domainBind(i,t),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function h(e,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var s=0;if(void 0!==i){if("object"!==u(i)||null===i)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));s=i.concurrency}return new p(e,n,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}c.inherits(p,n),p.prototype._asyncInit=function(){this._init$(void 0,-2)},p.prototype._init=function(){},p.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),a=this._preservedValues,c=this._limit;if(n<0){if(r[n=-1*n-1]=e,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var u=this._promise,d=this._callback,p=u._boundValue();u._pushContext();var h=l(d).call(p,e,n,o),m=u._popContext();if(s.checkForgottenReturns(h,m,null!==a?"Promise.filter":"Promise.map",u),h===f)return this._reject(h.e),!0;var g=i(h,this._promise);if(g instanceof t){var v=(g=g._target())._bitField;if(0==(50397184&v))return c>=1&&this._inFlight++,r[n]=g,g._proxy(this,-1*(n+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(g._reason()),!0):(this._cancel(),!0);h=g._value()}r[n]=h}return++this._totalResolved>=o&&(null!==a?this._filter(r,a):this._resolve(r),!0)},p.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},p.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},p.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return h(this,e,t,null)},t.map=function(e,t,n,r){return h(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=a(e).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+s.classString(e));var r,c=new t(n);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],l=arguments[2];r=s.isArray(u)?a(e).apply(l,u):a(e).call(l,u)}else r=a(e)();var f=c._popContext();return o.checkForgottenReturns(r,f,"Promise.try",c),c._resolveFromSyncValue(r),c},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";var r=e("./util"),i=r.maybeWrapAsError,o=e("./errors").OperationalError,s=e("./es5");var a=/^(?:name|message|stack|cause)$/;function c(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new o(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=s.keys(e),i=0;i<n.length;++i){var c=n[i];a.test(c)||(t[c]=e[c])}return t}return r.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(n,r){if(null!==e){if(n){var o=c(i(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(r);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),r=t._async,i=n.tryCatch,o=n.errorObj;function s(e,t){if(!n.isArray(e))return a.call(this,e,t);var s=i(t).apply(this._boundValue(),[null].concat(e));s===o&&r.throwLater(s.e)}function a(e,t){var n=this._boundValue(),s=void 0===e?i(t).call(n,null):i(t).call(n,null,e);s===o&&r.throwLater(s.e)}function c(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var s=i(t).call(this._boundValue(),e);s===o&&r.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=a;void 0!==t&&Object(t).spread&&(n=s),this._then(n,c,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,t,r){"use strict";t.exports=function(){var r=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new A.PromiseInspection(this._target())},o=function(e){return A.reject(new h(e))};function s(){}var a,c={},u=e("./util");a=u.isNode?function(){var e=n.domain;return void 0===e&&(e=null),e}:function(){return null},u.notEnumerableProp(A,"_getDomain",a);var l=e("./es5"),f=e("./async"),d=new f;l.defineProperty(A,"_async",{value:d});var p=e("./errors"),h=A.TypeError=p.TypeError;A.RangeError=p.RangeError;var m=A.CancellationError=p.CancellationError;A.TimeoutError=p.TimeoutError,A.OperationalError=p.OperationalError,A.RejectionError=p.OperationalError,A.AggregateError=p.AggregateError;var g=function(){},v={},y={},b=e("./thenables")(A,g),C=e("./promise_array")(A,g,b,o,s),S=e("./context")(A),_=S.create,T=e("./debuggability")(A,S),E=(T.CapturedTrace,e("./finally")(A,b,y)),w=e("./catch_filter")(y),x=e("./nodeback"),R=u.errorObj,k=u.tryCatch;function A(e){e!==g&&function(e,t){if(null==e||e.constructor!==A)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new h("expecting a function but got "+u.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function I(e){this.promise._resolveCallback(e)}function M(e){this.promise._rejectCallback(e,!1)}function P(e){var t=new A(g);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return A.prototype.toString=function(){return"[object Promise]"},A.prototype.caught=A.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var s=arguments[n];if(!u.isObject(s))return o("Catch statement predicate: expecting an object but got "+u.classString(s));r[i++]=s}return r.length=i,e=arguments[n],this.then(void 0,w(r,e,this))}return this.then(void 0,e)},A.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},A.prototype.then=function(e,t){if(T.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+u.classString(e);arguments.length>1&&(n+=", "+u.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},A.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},A.prototype.spread=function(e){return"function"!=typeof e?o("expecting a function but got "+u.classString(e)):this.all()._then(e,void 0,void 0,v,void 0)},A.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},A.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},A.prototype.error=function(e){return this.caught(u.originatesFromRejection,e)},A.getNewLibraryCopy=t.exports,A.is=function(e){return e instanceof A},A.fromNode=A.fromCallback=function(e){var t=new A(g);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=k(e)(x(t,n));return r===R&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},A.all=function(e){return new C(e).promise()},A.cast=function(e){var t=b(e);return t instanceof A||((t=new A(g))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},A.resolve=A.fulfilled=A.cast,A.reject=A.rejected=function(e){var t=new A(g);return t._captureStackTrace(),t._rejectCallback(e,!0),t},A.setScheduler=function(e){if("function"!=typeof e)throw new h("expecting a function but got "+u.classString(e));return d.setScheduler(e)},A.prototype._then=function(e,t,n,r,i){var o=void 0!==i,s=o?i:new A(g),c=this._target(),l=c._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=a();if(0!=(50397184&l)){var p,h,v=c._settlePromiseCtx;0!=(33554432&l)?(h=c._rejectionHandler0,p=e):0!=(16777216&l)?(h=c._fulfillmentHandler0,p=t,c._unsetRejectionIsUnhandled()):(v=c._settlePromiseLateCancellationObserver,h=new m("late cancellation observer"),c._attachExtraTrace(h),p=t),d.invoke(v,c,{handler:null===f?p:"function"==typeof p&&u.domainBind(f,p),promise:s,receiver:r,value:h})}else c._addCallbacks(e,t,s,r,f);return s},A.prototype._length=function(){return 65535&this._bitField},A.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},A.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},A.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},A.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},A.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},A.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},A.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},A.prototype._isFinal=function(){return(4194304&this._bitField)>0},A.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},A.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},A.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},A.prototype._setAsyncGuaranteed=function(){d.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},A.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==c)return void 0===t&&this._isBound()?this._boundValue():t},A.prototype._promiseAt=function(e){return this[4*e-4+2]},A.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},A.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},A.prototype._boundValue=function(){},A.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=c),this._addCallbacks(t,n,r,i,null)},A.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=c),this._addCallbacks(n,r,i,o,null)},A.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:u.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:u.domainBind(i,t));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof e&&(this[s+0]=null===i?e:u.domainBind(i,e)),"function"==typeof t&&(this[s+1]=null===i?t:u.domainBind(i,t))}return this._setLength(o+1),o},A.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},A.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(r(),!1);var n=b(e,this);if(!(n instanceof A))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var c=new m("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}else this._reject(r())}},A.prototype._rejectCallback=function(e,t,n){var r=u.ensureErrorObject(e),i=r===e;if(!i&&!n&&T.warnings()){var o="a promise was rejected with a non-error: "+u.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},A.prototype._resolveFromExecutor=function(e){if(e!==g){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},A.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===v?n&&"number"==typeof n.length?o=k(e).apply(this._boundValue(),n):(o=R).e=new h("cannot .spread() a non-array: "+u.classString(n)):o=k(e).call(t,n);var s=r._popContext();0==(65536&(i=r._bitField))&&(o===y?r._reject(n):o===R?r._rejectCallback(o.e,!1):(T.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},A.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},A.prototype._followee=function(){return this._rejectionHandler0},A.prototype._setFollowee=function(e){this._rejectionHandler0=e},A.prototype._settlePromise=function(e,t,n,r){var o=e instanceof A,a=this._bitField,c=0!=(134217728&a);0!=(65536&a)?(o&&e._invokeInternalOnCancel(),n instanceof E&&n.isFinallyHandler()?(n.cancelPromise=e,k(t).call(n,r)===R&&e._reject(R.e)):t===i?e._fulfill(i.call(n)):n instanceof s?n._promiseCancelled(e):o||e instanceof C?e._cancel():n.cancel()):"function"==typeof t?o?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof s?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):o&&(c&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(r):e._reject(r))},A.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof A?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof A&&n._reject(i)},A.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},A.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},A.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},A.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():d.settlePromises(this),this._dereferenceTrace())}},A.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return d.fatalError(e,u.isNode);(65535&t)>0?d.settlePromises(this):this._ensurePossibleRejectionHandled()}},A.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},A.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},A.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},A.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},A.defer=A.pending=function(){return T.deprecated("Promise.defer","new Promise"),{promise:new A(g),resolve:I,reject:M}},u.notEnumerableProp(A,"_makeSelfResolutionError",r),e("./method")(A,g,b,o,T),e("./bind")(A,g,b,T),e("./cancel")(A,C,o,T),e("./direct_resolve")(A),e("./synchronous_inspection")(A),e("./join")(A,C,b,g,d,a),A.Promise=A,A.version="3.5.3",e("./map.js")(A,C,o,b,g,T),e("./call_get.js")(A),e("./using.js")(A,o,b,_,g,T),e("./timers.js")(A,g,T),e("./generators.js")(A,o,g,b,s,T),e("./nodeify.js")(A),e("./promisify.js")(A,g),e("./props.js")(A,C,b,o),e("./race.js")(A,g,b,o),e("./reduce.js")(A,C,o,b,g,T),e("./settle.js")(A,C,T),e("./some.js")(A,C,o),e("./filter.js")(A,g),e("./each.js")(A,g),e("./any.js")(A),u.toFastProperties(A),u.toFastProperties(A.prototype),P({a:1}),P({b:2}),P({c:3}),P(1),P(function(){}),P(void 0),P(!1),P(new A(g)),T.setBounds(f.firstLineError,u.lastLineError),A}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var s=e("./util");s.isArray;function a(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,o){var a=r(this._values,this._promise);if(a instanceof t){var c=(a=a._target())._bitField;if(this._values=a,0==(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var u=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(u,!1)}},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<n;++a){var c=r(e[a],i);s=c instanceof t?(c=c._target())._bitField:null,o?null!==s&&c.suppressUnhandledRejections():null!==s?0==(50397184&s)?(c._proxy(this,a),this._values[a]=c):o=0!=(33554432&s)?this._promiseFulfilled(c._value(),a):0!=(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(c,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){var r={},i=e("./util"),o=e("./nodeback"),s=i.withAppended,a=i.maybeWrapAsError,c=i.canEvaluate,l=e("./errors").TypeError,f={__isPromisified__:!0},d=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),p=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function h(e){return!d.test(e)}function m(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function g(e,t,n){var r=i.getDataPropertyOrDefault(e,t+n,f);return!!r&&m(r)}function v(e,t,n,r){for(var o=i.inheritedDataKeys(e),s=[],a=0;a<o.length;++a){var c=o[a],u=e[c],f=r===p||p(c,u,e);"function"!=typeof u||m(u)||g(e,c,t)||!r(c,u,e,f)||s.push(c,u)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,n),s}var y=function(e){return e.replace(/([$])/,"\\$")};var b=c?void 0:function(e,c,u,l,f,d){var p=function(){return this}(),h=e;function m(){var i=c;c===r&&(i=this);var u=new t(n);u._captureStackTrace();var l="string"==typeof h&&this!==p?this[h]:e,f=o(u,d);try{l.apply(i,s(arguments,f))}catch(e){u._rejectCallback(a(e),!0,!0)}return u._isFateSealed()||u._setAsyncGuaranteed(),u}return"string"==typeof h&&(e=l),i.notEnumerableProp(m,"__isPromisified__",!0),m};function C(e,t,n,o,s){for(var a=new RegExp(y(t)+"$"),c=v(e,t,a,n),u=0,l=c.length;u<l;u+=2){var f=c[u],d=c[u+1],p=f+t;if(o===b)e[p]=b(f,r,f,d,t,s);else{var h=o(d,function(){return b(f,r,f,d,t,s)});i.notEnumerableProp(h,"__isPromisified__",!0),e[p]=h}}return i.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new l("expecting a function but got "+i.classString(e));if(m(e))return e;var n=function(e,t,n){return b(e,t,void 0,e,null,n)}(e,void 0===(t=Object(t)).context?r:t.context,!!t.multiArgs);return i.copyDescriptors(e,n,h),n},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!==u(e))throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var o=t.filter;"function"!=typeof o&&(o=p);var s=t.promisifier;if("function"!=typeof s&&(s=b),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(e),c=0;c<a.length;++c){var f=e[a[c]];"constructor"!==a[c]&&i.isClass(f)&&(C(f.prototype,r,o,s,n),C(f,r,o,s,n))}return C(e,r,o,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o,s=e("./util"),a=s.isObject,c=e("./es5");"function"==typeof Map&&(o=Map);var u=function(){var e=0,t=0;function n(n,r){this[e]=n,this[e+t]=r,e++}return function(r){t=r.size,e=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function l(e){var t,n=!1;if(void 0!==o&&e instanceof o)t=u(e),n=!0;else{var r=c.keys(e),i=r.length;t=new Array(2*i);for(var s=0;s<i;++s){var a=r[s];t[s]=e[a],t[s+i]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function f(e){var n,o=r(e);return a(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(l,n),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new o,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],s=e[r];t.set(i,s)}return t}(this._values);else{n={};for(var r=this.length(),i=0,s=this.length();i<s;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return f(this)},t.props=function(e){return f(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+t],e[o+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),s=function(e){return e.then(function(t){return a(t,e)})};function a(e,a){var c=r(e);if(c instanceof t)return s(c);if(null===(e=o.asArray(e)))return i("expecting an array or an iterable object but got "+o.classString(e));var u=new t(n);void 0!==a&&u._propagateFrom(a,3);for(var l=u._fulfill,f=u._reject,d=0,p=e.length;d<p;++d){var h=e[d];(void 0!==h||d in e)&&t.cast(h)._then(l,f,void 0,u,null)}return u}t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=t._getDomain,c=e("./util"),u=c.tryCatch;function l(e,n,r,i){this.constructor$(e);var s=a();this._fn=null===s?n:c.domainBind(s,n),void 0!==r&&(r=t.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function f(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function d(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+c.classString(t)):new l(e,t,n,i).promise()}function p(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(e){var n,r=this.array,i=r._promise,o=u(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(r._currentCancellable=n);var a=i._popContext();return s.checkForgottenReturns(n,a,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}c.inherits(l,n),l.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},l.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},l.prototype._iterate=function(e){var n,r;this._values=e;var i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(p,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(f,f,void 0,n,this)},t.prototype.reduce=function(e,t){return d(this,e,t,null)},t.reduce=function(e,t,n,r){return d(e,t,n,r)}}},{"./util":36}],29:[function(e,t,o){"use strict";var s,a=e("./util"),c=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var u=r.setImmediate,l=n.nextTick;s=a.isRecentNode?function(e){u.call(r,e)}:function(e){l.call(n,e)}}else if("function"==typeof c&&"function"==typeof c.resolve){var f=c.resolve();s=function(e){f.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==i?function(e){i(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),n=!1}).observe(r,t);return function(i){var o=new MutationObserver(function(){o.disconnect(),i()});o.observe(e,t),n||(n=!0,r.classList.toggle("foo"))}}();t.exports=s},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=t.PromiseInspection;function o(e){this.constructor$(e)}e("./util").inherits(o,n),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=e("./errors").RangeError,s=e("./errors").AggregateError,a=i.isArray,c={};function u(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new u(e),i=n.promise();return n.setHowMany(t),n.init(),i}i.inherits(u,n),u.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(e){this._howMany=e},u.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},u.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(e){this._values.push(e)},u.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return l(e,t)},t.prototype.some=function(e){return l(this,e)},t._SomePromiseArray=u}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){var r=e("./util"),i=r.errorObj,o=r.isObject;var s={}.hasOwnProperty;return function(e,a){if(o(e)){if(e instanceof t)return e;var c=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(e);if(c===i){a&&a._pushContext();var u=t.reject(c.e);return a&&a._popContext(),u}if("function"==typeof c)return function(e){try{return s.call(e,"_promise0")}catch(e){return!1}}(e)?(u=new t(n),e._then(u._fulfill,u._reject,void 0,u,null),u):function(e,o,s){var a=new t(n),c=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var u=!0,l=r.tryCatch(o).call(e,function(e){a&&(a._resolveCallback(e),a=null)},function(e){a&&(a._rejectCallback(e,u,!0),a=null)});return u=!1,a&&l===i&&(a._rejectCallback(l.e,!0,!0),a=null),c}(e,c,a)}return e}}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,i){var o,c;return void 0!==i?(o=t.resolve(i)._then(a,null,null,e,void 0),r.cancellation()&&i instanceof t&&o._setOnCancel(i)):(o=new t(n),c=setTimeout(function(){o._fulfill()},+e),r.cancellation()&&o._setOnCancel(new s(c)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};t.prototype.delay=function(e){return c(e,this)};function u(e){return clearTimeout(this.handle),e}function l(e){throw clearTimeout(this.handle),e}t.prototype.timeout=function(e,t){var n,a;e=+e;var c=new s(setTimeout(function(){n.isPending()&&function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),i.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()}(n,t,a)},e));return r.cancellation()?(a=this.then(),(n=a._then(u,l,void 0,c,void 0))._setOnCancel(c)):n=this._then(u,l,void 0,c,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=e("./util"),c=e("./errors").TypeError,u=e("./util").inherits,l=a.errorObj,f=a.tryCatch,d={};function p(e){setTimeout(function(){throw e},0)}function h(e,n){var i=0,s=e.length,a=new t(o);return function o(){if(i>=s)return a._fulfill();var c=function(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(c instanceof t&&c._isDisposable()){try{c=r(c._getDisposer().tryDispose(n),e.promise)}catch(e){return p(e)}if(c instanceof t)return c._then(o,p,null,null,null)}o()}(),a}function m(e,t,n){this._data=e,this._promise=t,this._context=n}function g(e,t,n){this.constructor$(e,t,n)}function v(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function y(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},m.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==d?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},m.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},u(g,m),g.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},y.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[e-1];if("function"!=typeof o)return n("expecting a function but got "+a.classString(o));var c=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,c=!1):(i=arguments,e--);for(var u=new y(e),d=0;d<e;++d){var p=i[d];if(m.isDisposer(p)){var g=p;(p=p.promise())._setDisposable(g)}else{var b=r(p);b instanceof t&&(p=b._then(v,null,null,{resources:u,index:d},void 0))}u[d]=p}var C=new Array(u.length);for(d=0;d<C.length;++d)C[d]=t.resolve(u[d]).reflect();var S=t.all(C).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void S.cancel();e[t]=n.value()}_._pushContext(),o=f(o);var r=c?o.apply(void 0,e):o(e),i=_._popContext();return s.checkForgottenReturns(r,i,"Promise.using",_),r}),_=S.lastly(function(){var e=new t.PromiseInspection(S);return h(u,e)});return u.promise=_,_._setOnCancel(u),_},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new g(e,this,i());throw new c}}},{"./errors":12,"./util":36}],36:[function(e,t,i){"use strict";var o=e("./es5"),s="undefined"==typeof navigator,a={e:{}},c,l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==this?this:null;function f(){try{var e=c;return c=null,e.apply(this,arguments)}catch(e){return a.e=e,a}}function d(e){return c=e,f}var p=function(e,t){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=e,this.constructor$=t,t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}return r.prototype=t.prototype,e.prototype=new r,e.prototype};function h(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function m(e){return"function"==typeof e||"object"===u(e)&&null!==e}function g(e){return h(e)?new Error(k(e)):e}function v(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i}function y(e,t,n){if(!o.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function b(e,t,n){if(h(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(e,t,r),e}function C(e){throw e}var S=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(o.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var s;try{s=n(e)}catch(e){return r}for(var a=0;a<s.length;++a){var c=s[a];if(!i[c]){i[c]=!0;var u=Object.getOwnPropertyDescriptor(e,c);null!=u&&null==u.get&&null==u.set&&r.push(c)}}e=o.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<e.length;++s)if(r.call(e[s],o))continue e;i.push(o)}return i}}(),_=/this\s*\.\s*\S+\s*=/;function T(e){try{if("function"==typeof e){var t=o.names(e.prototype),n=o.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=_.test(e+"")&&o.names(e).length>0;if(n||r||i)return!0}return!1}catch(e){return!1}}function E(e){function t(){}t.prototype=e;var n=new t;function r(){return u(n.foo)}return r(),r(),e}var w=/^[a-z$_][a-z$_0-9]*$/i;function x(e){return w.test(e)}function R(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r}function k(e){try{return e+""}catch(e){return"[no string representation]"}}function A(e){return e instanceof Error||null!==e&&"object"===u(e)&&"string"==typeof e.message&&"string"==typeof e.name}function I(e){try{b(e,"isOperational",!0)}catch(e){}}function M(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function P(e){return A(e)&&o.propertyIsWritable(e,"stack")}var O="stack"in new Error?function(e){return P(e)?e:new Error(k(e))}:function(e){if(P(e))return e;try{throw new Error(k(e))}catch(e){return e}};function N(e){return{}.toString.call(e)}function j(e,t,n){for(var r=o.names(e),i=0;i<r.length;++i){var s=r[i];if(n(s))try{o.defineProperty(t,s,o.getDescriptor(e,s))}catch(e){}}}var D=function(e){return o.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var L="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};D=function(e){return o.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?L(e):null}}var F=void 0!==n&&"[object process]"===N(n).toLowerCase(),B=void 0!==n&&void 0!==n.env;function U(e){return B?n.env[e]:void 0}function V(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function q(e,t){return e.bind(t)}var H={isClass:T,isIdentifier:x,inheritedDataKeys:S,getDataPropertyOrDefault:y,thrower:C,isArray:o.isArray,asArray:D,notEnumerableProp:b,isPrimitive:h,isObject:m,isError:A,canEvaluate:s,errorObj:a,tryCatch:d,inherits:p,withAppended:v,maybeWrapAsError:g,toFastProperties:E,filledRange:R,toString:k,canAttachTrace:P,ensureErrorObject:O,originatesFromRejection:M,markAsOriginatingFromRejection:I,classString:N,copyDescriptors:j,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:F,hasEnvVariables:B,env:U,global:l,getNativePromise:V,domainBind:q},G;H.isRecentNode=H.isNode&&(G=n.versions.node.split(".").map(Number),0===G[0]&&G[1]>10||G[0]>0),H.isNode&&H.toFastProperties(n);try{throw new Error}catch(e){H.lastLineError=e}t.exports=H},{"./es5":13}]},{},[4])(4)},"object"==u(t)&&void 0!==e?e.exports=c():(s=[],void 0===(a="function"==typeof(o=c)?o.apply(t,s):o)||(e.exports=a)),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(12),n(1),n(46).setImmediate)},function(e,t,n){"use strict";(function(t){var r=n(163);e.exports=n(179)(r),"_sockjs_onload"in t&&setTimeout(t._sockjs_onload,1)}).call(this,n(1))},function(e,t,n){"use strict";e.exports=[n(164),n(169),n(75),n(76),n(43)(n(76)),n(80),n(43)(n(80)),n(81),n(175),n(43)(n(81)),n(176)]},function(e,t,n){"use strict";var r=n(15),i=n(7),o=n(0),s=n(6).EventEmitter,a=n(168),c=function(){};function u(e,t,n){if(!u.enabled())throw new Error("Transport created when disabled");s.call(this),c("constructor",e);var o=this,l=i.addPath(e,"/websocket");l="https"===l.slice(0,5)?"wss"+l.slice(5):"ws"+l.slice(4),this.url=l,this.ws=new a(this.url,[],n),this.ws.onmessage=function(e){c("message event",e.data),o.emit("message",e.data)},this.unloadRef=r.unloadAdd(function(){c("unload"),o.ws.close()}),this.ws.onclose=function(e){c("close event",e.code,e.reason),o.emit("close",e.code,e.reason),o._cleanup()},this.ws.onerror=function(e){c("error event",e),o.emit("close",1006,"WebSocket connection broken"),o._cleanup()}}o(u,s),u.prototype.send=function(e){var t="["+e+"]";c("send",t),this.ws.send(t)},u.prototype.close=function(){c("close");var e=this.ws;this._cleanup(),e&&e.close()},u.prototype._cleanup=function(){c("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),r.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},u.enabled=function(){return c("enabled"),!!a},u.transportName="websocket",u.roundTrips=2,e.exports=u},function(e,t,n){"use strict";(function(t){t.crypto&&t.crypto.getRandomValues?e.exports.randomBytes=function(e){var n=new Uint8Array(e);return t.crypto.getRandomValues(n),n}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this,n(1))},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var r,i=Object.prototype.hasOwnProperty;function o(e){return decodeURIComponent(e.replace(/\+/g," "))}t.stringify=function(e,t){t=t||"";var n,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)i.call(e,o)&&((n=e[o])||null!==n&&n!==r&&!isNaN(n)||(n=""),s.push(encodeURIComponent(o)+"="+encodeURIComponent(n)));return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=o(t[1]),s=o(t[2]);i in r||(r[i]=s)}return r}},function(e,t,n){"use strict";(function(t){var n=t.WebSocket||t.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0}).call(this,n(1))},function(e,t,n){"use strict";(function(t){var r=n(0),i=n(20),o=n(34),s=n(35),a=n(24),c=n(25);function u(e){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",o,s)}r(u,i),u.enabled=function(e){return!e.nullOrigin&&(!c.isOpera()&&s.enabled)},u.transportName="xhr-streaming",u.roundTrips=2,u.needBody=!!t.document,e.exports=u}).call(this,n(1))},function(e,t,n){"use strict";var r=n(0),i=n(6).EventEmitter,o=function(){};function s(e,t){o(e),i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}r(s,i),s.prototype.send=function(e){o("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},s.prototype.sendScheduleWait=function(){o("sendScheduleWait");var e,t=this;this.sendStop=function(){o("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){o("timeout"),t.sendStop=null,t.sendSchedule()},25)},s.prototype.sendSchedule=function(){o("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(o("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},s.prototype._cleanup=function(){o("_cleanup"),this.removeAllListeners()},s.prototype.close=function(){o("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=s},function(e,t,n){"use strict";var r=n(0),i=n(6).EventEmitter,o=function(){};function s(e,t,n){o(t),i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}r(s,i),s.prototype._scheduleReceiver=function(){o("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){o("message",t),e.emit("message",t)}),t.once("close",function(n,r){o("close",n,r,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))})},s.prototype.abort=function(){o("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=s},function(e,t,n){"use strict";var r=n(0),i=n(6).EventEmitter,o=n(77),s=function(){};function a(e){s(e),i.call(this);var t=this,n=this.es=new o(e);n.onmessage=function(e){s("message",e.data),t.emit("message",decodeURI(e.data))},n.onerror=function(e){s("error",n.readyState,e);var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}r(a,i),a.prototype.abort=function(){s("abort"),this._cleanup(),this._close("user")},a.prototype._cleanup=function(){s("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},a.prototype._close=function(e){s("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},e.exports=a},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";(function(t){var r=n(0),i=n(26),o=n(7),s=n(6).EventEmitter,a=n(19),c=function(){};function u(e){c(e),s.call(this);var n=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),e=o.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c("using htmlfile",u.htmlfileEnabled);var r=u.htmlfileEnabled?i.createHtmlfile:i.createIframe;t[i.WPrefix][this.id]={start:function(){c("start"),n.iframeObj.loaded()},message:function(e){c("message",e),n.emit("message",e)},stop:function(){c("stop"),n._cleanup(),n._close("network")}},this.iframeObj=r(e,function(){c("callback"),n._cleanup(),n._close("permanent")})}r(u,s),u.prototype.abort=function(){c("abort"),this._cleanup(),this._close("user")},u.prototype._cleanup=function(){c("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete t[i.WPrefix][this.id]},u.prototype._close=function(e){c("_close",e),this.emit("close",null,e),this.removeAllListeners()},u.htmlfileEnabled=!1;var l=["Active"].concat("Object").join("X");if(l in t)try{u.htmlfileEnabled=!!new t[l]("htmlfile")}catch(e){}u.enabled=u.htmlfileEnabled||i.iframeEnabled,e.exports=u}).call(this,n(1))},function(e,t,n){"use strict";var r=n(0),i=n(20),o=n(75),s=n(34),a=n(42);function c(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,a)}r(c,i),c.enabled=o.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},function(e,t,n){"use strict";(function(t){var r=n(0),i=n(73),o=n(177),s=n(178);function a(e){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",s,o)}r(a,i),a.enabled=function(){return!!t.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a}).call(this,n(1))},function(e,t,n){"use strict";(function(t){var r=n(26),i=n(19),o=n(25),s=n(7),a=n(0),c=n(6).EventEmitter,u=function(){};function l(e){u(e);var n=this;c.call(this),r.polluteGlobalNamespace(),this.id="a"+i.string(6);var o=s.addQuery(e,"c="+encodeURIComponent(r.WPrefix+"."+this.id));t[r.WPrefix][this.id]=this._callback.bind(this),this._createScript(o),this.timeoutId=setTimeout(function(){u("timeout"),n._abort(new Error("JSONP script loaded abnormally (timeout)"))},l.timeout)}a(l,c),l.prototype.abort=function(){if(u("abort"),t[r.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},l.timeout=35e3,l.scriptErrorTimeout=1e3,l.prototype._callback=function(e){u("_callback",e),this._cleanup(),this.aborting||(e&&(u("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},l.prototype._abort=function(e){u("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},l.prototype._cleanup=function(){if(u("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete t[r.WPrefix][this.id]},l.prototype._scriptError=function(){u("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},l.scriptErrorTimeout))},l.prototype._createScript=function(e){u("_createScript",e);var n,r=this,s=this.script=t.document.createElement("script");if(s.id="a"+i.string(8),s.src=e,s.type="text/javascript",s.charset="UTF-8",s.onerror=this._scriptError.bind(this),s.onload=function(){u("onload"),r._abort(new Error("JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(){if(u("onreadystatechange",s.readyState),/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){r.loadedOkay=!0;try{s.onclick()}catch(e){}}s&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===s.async&&t.document.attachEvent)if(o.isOpera())(n=this.script2=t.document.createElement("script")).text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=n.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(e){}s.async=!0}void 0!==s.async&&(s.async=!0);var a=t.document.getElementsByTagName("head")[0];a.insertBefore(s,a.firstChild),n&&a.insertBefore(n,a.firstChild)},e.exports=l}).call(this,n(1))},function(e,t,n){"use strict";(function(t){var r,i,o=n(19),s=n(7),a=function(){};e.exports=function(e,n,c){a(e,n),r||(a("createForm"),(r=t.document.createElement("form")).style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",(i=t.document.createElement("textarea")).name="d",r.appendChild(i),t.document.body.appendChild(r));var u="a"+o.string(8);r.target=u,r.action=s.addQuery(s.addPath(e,"/jsonp_send"),"i="+u);var l=function(e){a("createIframe",e);try{return t.document.createElement('<iframe name="'+e+'">')}catch(r){var n=t.document.createElement("iframe");return n.name=e,n}}(u);l.id=u,l.style.display="none",r.appendChild(l);try{i.value=n}catch(e){}r.submit();var f=function(e){a("completed",u,e),l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout(function(){a("cleaning up",u),l.parentNode.removeChild(l),l=null},500),i.value="",c(e))};return l.onerror=function(){a("onerror",u),f()},l.onload=function(){a("onload",u),f()},l.onreadystatechange=function(e){a("onreadystatechange",u,l.readyState,e),"complete"===l.readyState&&f()},function(){a("aborted",u),f(new Error("Aborted"))}}}).call(this,n(1))},function(e,t,n){"use strict";(function(t){n(180);var r,i=n(71),o=n(0),s=n(11),a=n(19),c=n(181),u=n(7),l=n(15),f=n(182),d=n(44),p=n(25),h=n(183),m=n(45),g=n(72),v=n(82),y=n(184),b=n(185),C=n(186),S=function(){};function _(e,t,n){if(!(this instanceof _))return new _(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=_.CONNECTING,this.extensions="",this.protocol="",(n=n||{}).protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{};var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return a.string(r)}}this._server=n.server||a.numberString(1e3);var o=new i(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var s="https:"===o.protocol;if("https:"===v.protocol&&!s)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var c=t.sort();c.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<c.length-1&&e===c[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var l=u.getOrigin(v.href);this._origin=l?l.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,S("using url",this.url),this._urlInfo={nullOrigin:!p.hasDomain(),sameOrigin:u.isOriginEqual(this.url,v.href),sameScheme:u.isSchemeEqual(this.url,v.href)},this._ir=new C(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function T(e){return 1e3===e||e>=3e3&&e<=4999}o(_,g),_.prototype.close=function(e,t){if(e&&!T(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==_.CLOSING&&this.readyState!==_.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},_.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===_.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===_.OPEN&&this._transport.send(c.quote(e))},_.version=n(79),_.CONNECTING=0,_.OPEN=1,_.CLOSING=2,_.CLOSED=3,_.prototype._receiveInfo=function(e,t){if(S("_receiveInfo",t),this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=d.extend(e,this._urlInfo),S("info",e);var n=r.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,S(this._transports.length+" enabled transports"),this._connect()}else this._close(1002,"Cannot connect to server")},_.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(S("attempt",e.transportName),e.needBody&&(!t.document.body||void 0!==t.document.readyState&&"complete"!==t.document.readyState&&"interactive"!==t.document.readyState))return S("waiting for body"),this._transports.unshift(e),void l.attachEvent("load",this._connect.bind(this));var n=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),n),S("using timeout",n);var r=u.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName];S("transport url",r);var o=new e(r,this._transUrl,i);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},_.prototype._transportTimeout=function(){S("_transportTimeout"),this.readyState===_.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},_.prototype._transportMessage=function(e){S("_transportMessage",e);var t,n=this,r=e.slice(0,1),i=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new m("heartbeat")),void S("heartbeat",this.transport)}if(i)try{t=s.parse(i)}catch(e){S("bad json",i)}if(void 0!==t)switch(r){case"a":Array.isArray(t)&&t.forEach(function(e){S("message",n.transport,e),n.dispatchEvent(new b(e))});break;case"m":S("message",this.transport,t),this.dispatchEvent(new b(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}else S("empty payload",i)},_.prototype._transportClose=function(e,t){S("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),T(e)||2e3===e||this.readyState!==_.CONNECTING?this._close(e,t):this._connect()},_.prototype._open=function(){S("_open",this._transport.transportName,this.readyState),this.readyState===_.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=_.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new m("open")),S("connected",this.transport)):this._close(1006,"Server lost session")},_.prototype._close=function(e,t,n){S("_close",this.transport,e,t,n,this.readyState);var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===_.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=_.CLOSING,setTimeout(function(){this.readyState=_.CLOSED,r&&this.dispatchEvent(new m("error"));var i=new y("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null,S("disconnected")}.bind(this),0)},_.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return r=f(e),n(189)(_,e),_}}).call(this,n(1))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o=Array.prototype,s=Object.prototype,a=Function.prototype,c=String.prototype,u=o.slice,l=s.toString,f=function(e){return"[object Function]"===s.toString.call(e)},d=function(e){return"[object String]"===l.call(e)},p=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();i=p?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var h=function(e,t,n){for(var r in t)s.hasOwnProperty.call(t,r)&&i(e,r,t[r],n)},m=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function g(){}h(a,{bind:function(e){var t=this;if(!f(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=u.call(arguments,1),r=Math.max(0,t.length-n.length),i=[],o=0;o<r;o++)i.push("$"+o);var s=Function("binder","return function ("+i.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof s){var r=t.apply(this,n.concat(u.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(u.call(arguments)))});return t.prototype&&(g.prototype=t.prototype,s.prototype=new g,g.prototype=null),s}}),h(Array,{isArray:function(e){return"[object Array]"===l.call(e)}});var v,y,b,C=Object("a"),S="a"!==C[0]||!(0 in C);h(o,{forEach:function(e){var t=m(this),n=S&&d(this)?this.split(""):t,r=arguments[1],i=-1,o=n.length>>>0;if(!f(e))throw new TypeError;for(;++i<o;)i in n&&e.call(r,n[i],i,t)}},(v=o.forEach,y=!0,b=!0,v&&(v.call("foo",function(e,t,n){"object"!==r(n)&&(y=!1)}),v.call([1],function(){b="string"==typeof this},"x")),!(v&&y&&b)));var _=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);h(o,{indexOf:function(e){var t=S&&d(this)?this.split(""):m(this),n=t.length>>>0;if(!n)return-1;var r,i,o=0;for(arguments.length>1&&(r=arguments[1],(i=+r)!=i?i=0:0!==i&&i!==1/0&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i))),o=i),o=o>=0?o:Math.max(0,n+o);o<n;o++)if(o in t&&t[o]===e)return o;return-1}},_);var T,E=c.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(T=void 0===/()??/.exec("")[1],c.split=function(e,t){var n=this;if(void 0===e&&0===t)return[];if("[object RegExp]"!==l.call(e))return E.call(this,e,t);var r,i,s,a,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),f=0;for(e=new RegExp(e.source,u+"g"),n+="",T||(r=new RegExp("^"+e.source+"$(?!\\s)",u)),t=void 0===t?-1>>>0:t>>>0;(i=e.exec(n))&&!((s=i.index+i[0].length)>f&&(c.push(n.slice(f,i.index)),!T&&i.length>1&&i[0].replace(r,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(i[e]=void 0)}),i.length>1&&i.index<n.length&&o.push.apply(c,i.slice(1)),a=i[0].length,f=s,c.length>=t));)e.lastIndex===i.index&&e.lastIndex++;return f===n.length?!a&&e.test("")||c.push(""):c.push(n.slice(f)),c.length>t?c.slice(0,t):c}):"0".split(void 0,0).length&&(c.split=function(e,t){return void 0===e&&0===t?[]:E.call(this,e,t)});var w=c.substr,x="".substr&&"b"!=="0b".substr(-1);h(c,{substr:function(e,t){return w.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},x)},function(e,t,n){"use strict";var r,i=n(11),o=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var t=i.stringify(e);return o.lastIndex=0,o.test(t)?(r||(r=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n}(o)),t.replace(o,function(e){return r[e]})):t}}},function(e,t,n){"use strict";e.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){e&&("websocket"===e.transportName&&!1===n.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(n)?(e.transportName,r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)):e.transportName))}),r}}}},function(e,t,n){"use strict";(function(t){var n={};["log","debug","warn"].forEach(function(e){var r;try{r=t.console&&t.console[e]&&t.console[e].apply}catch(e){}n[e]=r?function(){return t.console[e].apply(t.console,arguments)}:"log"===e?function(){}:n.log}),e.exports=n}).call(this,n(1))},function(e,t,n){"use strict";var r=n(0),i=n(45);function o(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}r(o,i),e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(45);function o(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}r(o,i),e.exports=o},function(e,t,n){"use strict";var r=n(6).EventEmitter,i=n(0),o=n(7),s=n(42),a=n(35),c=n(24),u=n(187),l=n(188),f=n(84),d=function(){};function p(e,t){d(e);var n=this;r.call(this),setTimeout(function(){n.doXhr(e,t)},0)}i(p,r),p._getReceiver=function(e,t,n){return n.sameOrigin?new f(t,c):a.enabled?new f(t,a):s.enabled&&n.sameScheme?new f(t,s):l.enabled()?new l(e,t):new f(t,u)},p.prototype.doXhr=function(e,t){var n=this,r=o.addPath(e,"/info");d("doXhr",r),this.xo=p._getReceiver(e,r,t),this.timeoutRef=setTimeout(function(){d("timeout"),n._cleanup(!1),n.emit("finish")},p.timeout),this.xo.once("finish",function(e,t){d("finish",e,t),n._cleanup(!0),n.emit("finish",e,t)})},p.prototype._cleanup=function(e){d("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},p.prototype.close=function(){d("close"),this.removeAllListeners(),this._cleanup(!1)},p.timeout=8e3,e.exports=p},function(e,t,n){"use strict";var r=n(6).EventEmitter;function i(){var e=this;r.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},i.timeout)}n(0)(i,r),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,e.exports=i},function(e,t,n){"use strict";(function(t){var r=n(6).EventEmitter,i=n(0),o=n(11),s=n(15),a=n(78),c=n(83),u=function(){};function l(e,n){var i=this;r.call(this);var l=function(){var t=i.ifr=new a(c.transportName,n,e);t.once("message",function(e){if(e){var t;try{t=o.parse(e)}catch(t){return u("bad json",e),i.emit("finish"),void i.close()}var n=t[0],r=t[1];i.emit("finish",n,r)}i.close()}),t.once("close",function(){i.emit("finish"),i.close()})};t.document.body?l():s.attachEvent("load",l)}i(l,r),l.enabled=function(){return a.enabled()},l.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=l}).call(this,n(1))},function(e,t,n){"use strict";var r=n(7),i=n(15),o=n(11),s=n(190),a=n(83),c=n(26),u=n(82);e.exports=function(e,t){var n,l={};t.forEach(function(e){e.facadeTransport&&(l[e.facadeTransport.transportName]=e.facadeTransport)}),l[a.transportName]=a,e.bootstrap_iframe=function(){var t;c.currentWindowId=u.hash.slice(1);i.attachEvent("message",function(i){if(i.source===parent&&(void 0===n&&(n=i.origin),i.origin===n)){var a;try{a=o.parse(i.data)}catch(e){return void i.data}if(a.windowId===c.currentWindowId)switch(a.type){case"s":var f;try{f=o.parse(a.data)}catch(e){a.data;break}var d=f[0],p=f[1],h=f[2],m=f[3];if(d!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+d+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(h,u.href)||!r.isOriginEqual(m,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+h+", "+m+")");t=new s(new l[p](h,m));break;case"m":t._send(a.data);break;case"c":t&&t._close(),t=null}}}),c.postMessage("s")}}},function(e,t,n){"use strict";var r=n(11),i=n(26);function o(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}o.prototype._transportClose=function(e,t){i.postMessage("c",r.stringify([e,t]))},o.prototype._transportMessage=function(e){i.postMessage("t",e)},o.prototype._send=function(e){this._transport.send(e)},o.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=o},function(e,t,n){var r=n(67),i=function(e){var t=new Date,n=t.getTime(),r=t;r.setHours(r.getHours()+1),r=r.getTime();var i={description:"",addAttendeePasscode:!1,endPointVersion:"1.80",timezone:"US/Mountain",end:"",title:"Test Meeting",advancedMeetingOptions:{allowStream:!1,autoRecord:!1,muteParticipantsOnEntry:!1,encryptionType:"ENCRYPTED_ONLY",makeDefault:!1,moderatorLess:!0,videoBestFit:!1,disallowChat:!1,publishMeeting:!1,showAllAttendeesInMeetingInvite:!1},isLargeMeeting:!1,endPointType:"WEB_APP",start:"",recurrencePattern:{recurrenceCount:0,daysOfWeekMask:0,frequency:0,recurrenceType:"NONE",weekOfMonth:"NONE",monthOfYear:"NONE",endDate:null,dayOfMonth:0}};return i.start=n,i.end=r,i};e.exports={scheduleMeeting:function(e,t){var n={url:"/seamapi/v1/user/"+e.leaderId+"/scheduled_meeting/?access_token="+encodeURIComponent(e.userToken),body:i()};r.post(n,t)}}},function(e,t,n){var r=n(3);e.exports=function(e){r.debug("(webrtcclientsdk.js) client Ref Design loading...");var t={muteParams:{localAudio:!1,localVideo:!1}},n={major:1,minor:2,build:0},i={audio:{},video:{}},o=null,s=null,a=null,c=!1,u=null,l=null,f=null,d=null,p=null,h=null,m=null,g=null,v=null,y=null,b=function(){var t="local_stream";c&&(t="preview_stream"),e.getLocalMedia(i,t).then(function(e){for(var t=0;t<e.length;t++)"local_audio_stream"===e[t].bjn_label?l=e[t]:"local_video_stream"===e[t].bjn_label&&(f=e[t]);C(f),c=!0,h&&h()},function(e){r.debug("getLocalMedia error:\n"+JSON.stringify(e,null,2))})},C=function(t){t?(e.renderSelfView({stream:t,el:o}),h&&h(!1)):r.debug("updateSelfView no stream!!!")},S=function(e){e&&r.debug("Audio Path Change")},_=function(n){e.endMeeting(),t={muteParams:{localAudio:!1,localVideo:!1}},c=!1,r.debug("Leaving meeting")},T=function(e){r.debug("Remote Connection state :: "+e),m&&m(e)},E=function(e){r.debug("Local Connection state :: "+e),g&&g(e)},w=function(t){d=t,t&&(r.debug("Remote stream updated"),e.renderStream({stream:d,el:s}))},x=function(t){p=t,t&&(r.debug("Content stream updated"),e.renderStream({stream:t,el:a})),y&&y(null!=t)},R=function(e){r.debug("Error has occured :: "+e),_(),v&&v(e)};return{initialize:function(t){r.debug("bjnrtcsdk initializing"),u=t.devices,o=t.localVideoEl,s=t.remoteVideoEl,a=t.contentVideoEl,h=t.evtVideoUnmute,m=t.evtRemoteConnectionStateChange,g=t.evtLocalConnectionStateChange,v=t.evtOnError,t.evtContentShareStateChange&&(y=t.evtContentShareStateChange),e.setBandwidth(t.bandWidth),c=!1,b(),e.localVideoStreamChange=C,e.localAudioStreamChange=S,e.remoteEndPointStateChange=T,e.localEndPointStateChange=E,e.remoteStreamChange=w,e.error=R,e.contentStreamChange=x},toggleVideoMute:function(n){var r=!!t.muteParams.localVideo;return t.muteParams.localVideo=!r,e.muteStreams(t.muteParams),!r},toggleAudioMute:function(n){var r=!!t.muteParams.localAudio;return t.muteParams.localAudio=!r,e.muteStreams(t.muteParams),!r},changeAudioInput:function(t){var n=u.audioIn[t].id;r.debug("Audio Input is changed: "+n),i.audio.deviceId=n,e.stopLocalStreams(),b()},changeAudioOutput:function(t){var n=u.audioOut[t].id;r.debug("Audio Output is changed: "+n),e.setSpeaker({speakerId:n,mediaElements:[s]})},changeVideoInput:function(t){var n=u.videoIn[t].id;r.debug("Video Input is changed: "+n),i.video.deviceId=n,e.stopLocalStreams(),b()},setVideoBandwidth:function(t){r.debug("Video BW is changed: "+t),e.setBandwidth(t)},joinMeeting:function(t){""!=t.numericMeetingId&&""!=t.displayName&&(r.debug("*** Joining meeting id: "+t.numericMeetingId),e.startMeeting(t))},leaveMeeting:_,version:function(){return n},getLocalAudioStream:function(){return l},getLocalVideoStream:function(){return f},getRemoteStream:function(){return d},getContentStream:function(){return p}}}},function(e,t,n){var r=n(3);e.exports=function(e){r.debug("(webrtcroster.js) Roster Object...");return{initialize:function(){},getParticipant:function(t){var n=null;return t>=0&&t<e.roster.collection.length&&(n=e.roster.collection.at(t)),n},getPartyCount:function(){return e.roster.collection.length},isMe:function(t){var n=!1;return t&&t.id&&(n=t.id==e.roster.selfParticipant.id),n},onChange:function(t,n,r){t?e.roster.collection.bind("change:"+n,r):e.roster.collection.unbind("change:"+n)},onJoin:function(t,n){t?e.roster.collection.bind("add",n):e.roster.collection.unbind("add")},onLeave:function(t,n){t?e.roster.collection.bind("remove",n):e.roster.collection.unbind("remove")},close:function(){e.roster.collection.unbind(""),e.close()}}}}]);